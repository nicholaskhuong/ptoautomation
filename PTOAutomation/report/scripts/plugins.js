/**
 * @author nghia.khuong
 * @email nghia.khuong@enclave.vn, khuongdainghia@gmail.com
 * @function jReport needed libraries
 * @version 1.6
 * @create date: 06 Apr 2012
 * @last update: 16 Dec 2013
 **/
/*---------------------------------------------------------------------------------------------------------------------------------------*/  
/**
 * jLayout v0.4
 * License: BSD license
 * © 2008-2010 Bram Stein  
 * http://www.bramstein.com/projects/jlayout/jquery-plugin.html
 * Provides four layout algorithms for laying out HTML elements in web pages
 */
(function($){var num=function(value){return parseInt(value,10)||0};$.each(['min','max'],function(i,name){$.fn[name+'Size']=function(value){var width,height;if(value){if(value.width!==undefined){this.css(name+'-width',value.width)}if(value.height!==undefined){this.css(name+'-height',value.height)}return this}else{width=this.css(name+'-width');height=this.css(name+'-height');return{'width':(name==='max'&&(width===undefined||width==='none'||num(width)===-1)&&Number.MAX_VALUE)||num(width),'height':(name==='max'&&(height===undefined||height==='none'||num(height)===-1)&&Number.MAX_VALUE)||num(height)}}}});$.fn.isVisible=function(){return this.is(':visible')};$.each(['border','margin','padding'],function(i,name){$.fn[name]=function(value){if(value){if(value.top!==undefined){this.css(name+'-top'+(name==='border'?'-width':''),value.top)}if(value.bottom!==undefined){this.css(name+'-bottom'+(name==='border'?'-width':''),value.bottom)}if(value.left!==undefined){this.css(name+'-left'+(name==='border'?'-width':''),value.left)}if(value.right!==undefined){this.css(name+'-right'+(name==='border'?'-width':''),value.right)}return this}else{return{top:num(this.css(name+'-top'+(name==='border'?'-width':''))),bottom:num(this.css(name+'-bottom'+(name==='border'?'-width':''))),left:num(this.css(name+'-left'+(name==='border'?'-width':''))),right:num(this.css(name+'-right'+(name==='border'?'-width':'')))}}}})})(jQuery);(function(){jLayout=(typeof jLayout==='undefined')?{}:jLayout;jLayout.border=function(spec){var my={},that={},east=spec.east,west=spec.west,north=spec.north,south=spec.south,center=spec.center;my.hgap=spec.hgap||0;my.vgap=spec.vgap||0;that.items=function(){var items=[];if(east){items.push(east)}if(west){items.push(west)}if(north){items.push(north)}if(south){items.push(south)}if(center){items.push(center)}return items};that.layout=function(container){var size=container.bounds(),insets=container.insets(),top=insets.top,bottom=size.height-insets.bottom,left=insets.left,right=size.width-insets.right,tmp;if(north&&north.isVisible()){tmp=north.preferredSize();north.bounds({'x':left,'y':top,'width':right-left,'height':tmp.height});north.doLayout();top+=tmp.height+my.vgap}if(south&&south.isVisible()){tmp=south.preferredSize();south.bounds({'x':left,'y':bottom-tmp.height,'width':right-left,'height':tmp.height});south.doLayout();bottom-=tmp.height+my.vgap}if(east&&east.isVisible()){tmp=east.preferredSize();east.bounds({'x':right-tmp.width,'y':top,'width':tmp.width,'height':bottom-top});east.doLayout();right-=tmp.width+my.hgap}if(west&&west.isVisible()){tmp=west.preferredSize();west.bounds({'x':left,'y':top,'width':tmp.width,'height':bottom-top});west.doLayout();left+=tmp.width+my.hgap}if(center&&center.isVisible()){center.bounds({'x':left,'y':top,'width':right-left,'height':bottom-top});center.doLayout()}size=null;insets=null;top=null;bottom=null;left=null;right=null;tmp=null;return container};function typeLayout(type){return function(container){var insets=container.insets(),width=0,height=0,type_size;if(east&&east.isVisible()){type_size=east[type+'Size']();width+=type_size.width+my.hgap;height=type_size.height}if(west&&west.isVisible()){type_size=west[type+'Size']();width+=type_size.width+my.hgap;height=Math.max(type_size.height,height)}if(center&&center.isVisible()){type_size=center[type+'Size']();width+=type_size.width;height=Math.max(type_size.height,height)}if(north&&north.isVisible()){type_size=north[type+'Size']();width=Math.max(type_size.width,width);height+=type_size.height+my.vgap}if(south&&south.isVisible()){type_size=south[type+'Size']();width=Math.max(type_size.width,width);height+=type_size.height+my.vgap}return{'width':width+insets.left+insets.right,'height':height+insets.top+insets.bottom}}}that.preferred=typeLayout('preferred');that.minimum=typeLayout('minimum');that.maximum=typeLayout('maximum');return that}}());if(jQuery&&jLayout){(function($){function wrap(item,resize){var that={};$.each(['min','max'],function(i,name){that[name+'imumSize']=function(value){var l=item.data('jlayout');if(l){return l[name+'imum'](that)}else{return item[name+'Size'](value)}}});$.extend(that,{doLayout:function(){var l=item.data('jlayout');if(l){l.layout(that)}item.css({position:'absolute'});l=null},isVisible:function(){return item.isVisible()},insets:function(){var p=item.padding(),b=item.border();return{'top':p.top,'bottom':p.bottom+b.bottom+b.top,'left':p.left,'right':p.right+b.right+b.left}},bounds:function(value){var tmp={};if(value){if(typeof value.x==='number'){tmp.left=value.x}if(typeof value.y==='number'){tmp.top=value.y}if(typeof value.width==='number'){tmp.width=(value.width-(item.outerWidth(true)-item.width()));tmp.width=(tmp.width>=0)?tmp.width:0}if(typeof value.height==='number'){tmp.height=value.height-(item.outerHeight(true)-item.height());tmp.height=(tmp.height>=0)?tmp.height:0}item.css(tmp);tmp=null;return item}else{tmp=item.position();return{'x':tmp.left,'y':tmp.top,'width':item.outerWidth(false),'height':item.outerHeight(false)}}},preferredSize:function(){var minSize,maxSize,margin=item.margin(),size={width:0,height:0},l=item.data('jlayout');if(l&&resize){size=l.preferred(that);minSize=that.minimumSize();maxSize=that.maximumSize();size.width+=margin.left+margin.right;size.height+=margin.top+margin.bottom;if(size.width<minSize.width||size.height<minSize.height){size.width=Math.max(size.width,minSize.width);size.height=Math.max(size.height,minSize.height)}else if(size.width>maxSize.width||size.height>maxSize.height){size.width=Math.min(size.width,maxSize.width);size.height=Math.min(size.height,maxSize.height)}}else{size=that.bounds();size.width+=margin.left+margin.right;size.height+=margin.top+margin.bottom}minSize=null;maxSize=null;margin=null;l=null;return size}});return that}$.fn.layout=function(options){var opts=$.extend({},$.fn.layout.defaults,options);return $.each(this,function(){var element=$(this),o=(element.data('layout'))?$.extend(opts,element.data('layout')):opts,elementWrapper=wrap(element,o.resize);if(o.type==='border'&&typeof jLayout.border!=='undefined'){$.each(['north','south','west','east','center'],function(i,name){if(element.children().hasClass(name)){o[name]=wrap(element.children('.'+name+':first'))}});element.data('jlayout',jLayout.border(o))}else if(o.type==='grid'&&typeof jLayout.grid!=='undefined'){o.items=[];element.children().each(function(i){if(!$(this).hasClass('ui-resizable-handle')){o.items[i]=wrap($(this))}});element.data('jlayout',jLayout.grid(o))}else if(o.type==='flexGrid'&&typeof jLayout.flexGrid!=='undefined'){o.items=[];element.children().each(function(i){if(!$(this).hasClass('ui-resizable-handle')){o.items[i]=wrap($(this))}});element.data('jlayout',jLayout.flexGrid(o))}else if(o.type==='column'&&typeof jLayout.column!=='undefined'){o.items=[];element.children().each(function(i){if(!$(this).hasClass('ui-resizable-handle')){o.items[i]=wrap($(this))}});element.data('jlayout',jLayout.column(o))}else if(o.type==='flow'&&typeof jLayout.flow!=='undefined'){o.items=[];element.children().each(function(i){if(!$(this).hasClass('ui-resizable-handle')){o.items[i]=wrap($(this))}});element.data('jlayout',jLayout.flow(o))}if(o.resize){elementWrapper.bounds(elementWrapper.preferredSize())}elementWrapper.doLayout();element.css({position:'relative'});if($.ui!==undefined){element.addClass('ui-widget')}o=null;opts=null;element=null;elementWrapper=null})};$.fn.layout.defaults={resize:true,type:'grid'}}(jQuery))}
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * jQuery Cookie Plugin v1.4.0
 * License: MIT license
 * © 2013 Klaus Hartl
 * https://github.com/carhartl/jquery-cookie
 */
(function(a){if(typeof define==='function'&&define.amd){define(['jquery'],a)}else{a(jQuery)}}(function($){var k=/\+/g;function encode(s){return m.raw?s:encodeURIComponent(s)}function decode(s){return m.raw?s:decodeURIComponent(s)}function stringifyCookieValue(a){return encode(m.json?JSON.stringify(a):String(a))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\')}try{s=decodeURIComponent(s.replace(k,' '))}catch(e){return}try{return m.json?JSON.parse(s):s}catch(e){}}function read(s,a){var b=m.raw?s:parseCookieValue(s);return $.isFunction(a)?a(b):b}var m=$.cookie=function(a,b,c){if(b!==undefined&&!$.isFunction(b)){c=$.extend({},m.defaults,c);if(typeof c.expires==='number'){var d=c.expires,t=c.expires=new Date();t.setDate(t.getDate()+d)}return(document.cookie=[encode(a),'=',stringifyCookieValue(b),c.expires?'; expires='+c.expires.toUTCString():'',c.path?'; path='+c.path:'',c.domain?'; domain='+c.domain:'',c.secure?'; secure':''].join(''))}var e=a?undefined:{};var f=document.cookie?document.cookie.split('; '):[];for(var i=0,l=f.length;i<l;i++){var g=f[i].split('=');var h=decode(g.shift());var j=g.join('=');if(a&&a===h){e=read(j,b);break}if(!a&&(j=read(j))!==undefined){e[h]=j}}return e};m.defaults={};$.removeCookie=function(a,b){if($.cookie(a)!==undefined){$.cookie(a,'',$.extend({},b,{expires:-1}));return true}return false}}));
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * JQuery zTree core 3.1
 * License: MIT license
 * © 2010 Hunter.z (baby666.cn)
 * email: hunter.z@263.net
 * http://code.google.com/p/jquerytree/

 * Date: 2012-02-14
 */
 ;(function($){var y={},roots={},caches={},zId=0,_consts={event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:true,dblClickExpand:true,expandSpeed:"fast",fontCss:{},nameIsHTML:false,selectedMulti:true,showIcon:true,showLine:true,showTitle:true},data:{key:{children:"children",name:"name",title:""},simpleData:{enable:false,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:false,leaf:false}},showTestSummaryAtALevelOfLessThan:-1,detectAndShowNew:false,defaultlink:{url:"",target:"",linkParams:{}},async:{enable:false,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null}},_initRoot=function(a){var b=data.getRoot(a);if(!b){b={};data.setRoot(a,b)}b.children=[];b.expandTriggerFlag=false;b.curSelectedList=[];b.noSelection=true;b.createdNodes=[]},_initCache=function(a){var b=data.getCache(a);if(!b){b={};data.setCache(a,b)}b.nodes=[];b.doms=[]},_bindEvent=function(a){var b=a.treeObj,c=consts.event;b.unbind(c.NODECREATED);b.bind(c.NODECREATED,function(b,c,d){tools.apply(a.callback.onNodeCreated,[b,c,d])});b.unbind(c.CLICK);b.bind(c.CLICK,function(b,c,d,e){tools.apply(a.callback.onClick,[b,c,d,e])});b.unbind(c.EXPAND);b.bind(c.EXPAND,function(b,c,d){tools.apply(a.callback.onExpand,[b,c,d])});b.unbind(c.COLLAPSE);b.bind(c.COLLAPSE,function(b,c,d){tools.apply(a.callback.onCollapse,[b,c,d])});b.unbind(c.ASYNC_SUCCESS);b.bind(c.ASYNC_SUCCESS,function(b,c,d,e){tools.apply(a.callback.onAsyncSuccess,[b,c,d,e])});b.unbind(c.ASYNC_ERROR);b.bind(c.ASYNC_ERROR,function(b,c,d,e,f,g){tools.apply(a.callback.onAsyncError,[b,c,d,e,f,g])})},_eventProxy=function(a){var b=a.target,c=y[a.data.treeId],d="",e=null,f="",g="",h=null,i=null,j=null;if(tools.eqs(a.type,"mousedown")){g="mousedown"}else{if(tools.eqs(a.type,"mouseup")){g="mouseup"}else{if(tools.eqs(a.type,"contextmenu")){g="contextmenu"}else{if(tools.eqs(a.type,"click")){if(tools.eqs(b.tagName,"button")){b.blur()}if(tools.eqs(b.tagName,"button")&&b.getAttribute("treeNode"+consts.id.SWITCH)!==null){d=b.parentNode.id;f="switchNode"}else{j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(j){d=j.parentNode.id;f="clickNode"}}}else{if(tools.eqs(a.type,"dblclick")){g="dblclick";j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(j){d=j.parentNode.id;f="switchNode"}}}}}}if(g.length>0&&d.length==0){j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(j){d=j.parentNode.id}}if(d.length>0){e=data.getNodeCache(c,d);switch(f){case"switchNode":if(!e.isParent){f=""}else{if(tools.eqs(a.type,"click")||tools.eqs(a.type,"dblclick")&&tools.apply(c.view.dblClickExpand,[c.treeId,e],c.view.dblClickExpand)){h=handler.onSwitchNode}else{f=""}}break;case"clickNode":h=handler.onClickNode;break}}switch(g){case"mousedown":i=handler.onZTreeMousedown;break;case"mouseup":i=handler.onZTreeMouseup;break;case"dblclick":i=handler.onZTreeDblclick;break;case"contextmenu":i=handler.onZTreeContextmenu;break}var k={stop:false,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i};return k},_initNode=function(a,b,c,d,e,f,g){if(!c){return}var h=a.data.key.children;c.level=b;c.tId=a.treeId+"_"+ ++zId;c.parentTId=d?d.tId:null;if(c[h]&&c[h].length>0){if(typeof c.open=="string"){c.open=tools.eqs(c.open,"true")}c.open=!!c.open;c.isParent=true;c.zAsync=true}else{c.open=false;if(typeof c.isParent=="string"){c.isParent=tools.eqs(c.isParent,"true")}c.isParent=!!c.isParent;c.zAsync=!c.isParent}c.isFirstNode=e;c.isLastNode=f;c.getParentNode=function(){return data.getNodeCache(a,c.parentTId)};c.getPreNode=function(){return data.getPreNode(a,c)};c.getNextNode=function(){return data.getNextNode(a,c)};c.isAjaxing=false;data.fixPIdKeyValue(a,c)},_init={bind:[_bindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(a,b){data.getCache(a).nodes[b.tId]=b},addAfterA:function(a){_init.afterA.push(a)},addBeforeA:function(a){_init.beforeA.push(a)},addInnerAfterA:function(a){_init.innerAfterA.push(a)},addInnerBeforeA:function(a){_init.innerBeforeA.push(a)},addInitBind:function(a){_init.bind.push(a)},addInitCache:function(a){_init.caches.push(a)},addInitNode:function(a){_init.nodes.push(a)},addInitProxy:function(a){_init.proxys.push(a)},addInitRoot:function(a){_init.roots.push(a)},addNodesData:function(a,b,c){var d=a.data.key.children;if(!b[d]){b[d]=[]}if(b[d].length>0){b[d][b[d].length-1].isLastNode=false;view.setNodeLineIcos(a,b[d][b[d].length-1])}b.isParent=true;b[d]=b[d].concat(c)},addSelectedNode:function(a,b){var c=data.getRoot(a);if(!data.isSelectedNode(a,b)){c.curSelectedList.push(b)}},addCreatedNode:function(a,b){if(!!a.callback.onNodeCreated||!!a.view.addDiyDom){var c=data.getRoot(a);c.createdNodes.push(b)}},addZTreeTools:function(a){_init.zTreeTools.push(a)},exSetting:function(a){$.extend(true,_setting,a)},fixPIdKeyValue:function(a,b){if(a.data.simpleData.enable){b[a.data.simpleData.pIdKey]=b.parentTId?b.getParentNode()[a.data.simpleData.idKey]:a.data.simpleData.rootPId}},getAfterA:function(a,b,c){for(var d=0,e=_init.afterA.length;d<e;d++){_init.afterA[d].apply(this,arguments)}},getBeforeA:function(a,b,c){for(var d=0,e=_init.beforeA.length;d<e;d++){_init.beforeA[d].apply(this,arguments)}},getInnerAfterA:function(a,b,c){for(var d=0,e=_init.innerAfterA.length;d<e;d++){_init.innerAfterA[d].apply(this,arguments)}},getInnerBeforeA:function(a,b,c){for(var d=0,e=_init.innerBeforeA.length;d<e;d++){_init.innerBeforeA[d].apply(this,arguments)}},getCache:function(a){return caches[a.treeId]},getNextNode:function(a,b){if(!b){return null}var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a);if(b.isLastNode){return null}else{if(b.isFirstNode){return d[c][1]}else{for(var e=1,f=d[c].length-1;e<f;e++){if(d[c][e]===b){return d[c][e+1]}}}}return null},getNodeByParam:function(a,b,c,d){if(!b||!c){return null}var e=a.data.key.children;for(var f=0,g=b.length;f<g;f++){if(b[f][c]==d){return b[f]}var h=data.getNodeByParam(a,b[f][e],c,d);if(h){return h}}return null},getNodeCache:function(a,b){if(!b){return null}var c=caches[a.treeId].nodes[b];return c?c:null},getNodes:function(a){return data.getRoot(a)[a.data.key.children]},getNodesByParam:function(a,b,c,d){if(!b||!c){return[]}var e=a.data.key.children,f=[];for(var g=0,h=b.length;g<h;g++){if(b[g][c]==d){f.push(b[g])}f=f.concat(data.getNodesByParam(a,b[g][e],c,d))}return f},getNodesByParamFuzzy:function(a,b,c,d){if(!b||!c){return[]}var e=a.data.key.children,f=[];for(var g=0,h=b.length;g<h;g++){if(typeof b[g][c]=="string"&&b[g][c].indexOf(d)>-1){f.push(b[g])}f=f.concat(data.getNodesByParamFuzzy(a,b[g][e],c,d))}return f},getNodesByFilter:function(a,b,c,d){if(!b)return d?null:[];var e=a.data.key.children,f=d?null:[];for(var g=0,h=b.length;g<h;g++){if(tools.apply(c,[b[g]],false)){if(d){return b[g]}f.push(b[g])}var i=data.getNodesByFilter(a,b[g][e],c,d);if(d&&!!i){return i}f=d?i:f.concat(i)}return f},getPreNode:function(a,b){if(!b){return null}var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a);if(b.isFirstNode){return null}else{if(b.isLastNode){return d[c][d[c].length-2]}else{for(var e=1,f=d[c].length-1;e<f;e++){if(d[c][e]===b){return d[c][e-1]}}}}return null},getRoot:function(a){return a?roots[a.treeId]:null},getSetting:function(a){return y[a]},getSettings:function(){return y},getTitleKey:function(a){return a.data.key.title===""?a.data.key.name:a.data.key.title},getZTreeTools:function(a){var b=this.getRoot(this.getSetting(a));return b?b.treeTools:null},initCache:function(a){for(var b=0,c=_init.caches.length;b<c;b++){_init.caches[b].apply(this,arguments)}},initNode:function(a,b,c,d,e,f){for(var g=0,h=_init.nodes.length;g<h;g++){_init.nodes[g].apply(this,arguments)}},initRoot:function(a){for(var b=0,c=_init.roots.length;b<c;b++){_init.roots[b].apply(this,arguments)}},isSelectedNode:function(a,b){var c=data.getRoot(a);for(var d=0,e=c.curSelectedList.length;d<e;d++){if(b===c.curSelectedList[d]){return true}}return false},removeNodeCache:function(a,b){var c=a.data.key.children;if(b[c]){for(var d=0,e=b[c].length;d<e;d++){arguments.callee(a,b[c][d])}}delete data.getCache(a).nodes[b.tId]},removeSelectedNode:function(a,b){var c=data.getRoot(a);for(var d=0,e=c.curSelectedList.length;d<e;d++){if(b===c.curSelectedList[d]||!data.getNodeCache(a,c.curSelectedList[d].tId)){c.curSelectedList.splice(d,1);d--;e--}}},setCache:function(a,b){caches[a.treeId]=b},setRoot:function(a,b){roots[a.treeId]=b},setZTreeTools:function(a,b){for(var c=0,d=_init.zTreeTools.length;c<d;c++){_init.zTreeTools[c].apply(this,arguments)}},transformToArrayFormat:function(a,b){if(!b){return[]}var c=a.data.key.children,d=[];if(tools.isArray(b)){for(var e=0,f=b.length;e<f;e++){d.push(b[e]);if(b[e][c]){d=d.concat(data.transformToArrayFormat(a,b[e][c]))}}}else{d.push(b);if(b[c]){d=d.concat(data.transformToArrayFormat(a,b[c]))}}return d},transformTozTreeFormat:function(a,b){var c,d,e=a.data.simpleData.idKey,f=a.data.simpleData.pIdKey,g=a.data.key.children;if(!e||e==""||!b){return[]}if(tools.isArray(b)){var h=[];var i=[];for(c=0,d=b.length;c<d;c++){i[b[c][e]]=b[c]}for(c=0,d=b.length;c<d;c++){if(i[b[c][f]]&&b[c][e]!=b[c][f]){if(!i[b[c][f]][g]){i[b[c][f]][g]=[]}i[b[c][f]][g].push(b[c])}else{h.push(b[c])}}return h}else{return[b]}}},event={bindEvent:function(a){for(var b=0,c=_init.bind.length;b<c;b++){_init.bind[b].apply(this,arguments)}},bindTree:function(a){var b={treeId:a.treeId},c=a.treeObj;c.unbind("click",event.proxy);c.bind("click",b,event.proxy);c.unbind("dblclick",event.proxy);c.bind("dblclick",b,event.proxy);c.unbind("mouseover",event.proxy);c.bind("mouseover",b,event.proxy);c.unbind("mouseout",event.proxy);c.bind("mouseout",b,event.proxy);c.unbind("mousedown",event.proxy);c.bind("mousedown",b,event.proxy);c.unbind("mouseup",event.proxy);c.bind("mouseup",b,event.proxy);c.unbind("contextmenu",event.proxy);c.bind("contextmenu",b,event.proxy)},doProxy:function(a){var b=[];for(var c=0,d=_init.proxys.length;c<d;c++){var e=_init.proxys[c].apply(this,arguments);b.push(e);if(e.stop){break}}return b},proxy:function(a){var b=data.getSetting(a.data.treeId);if(!tools.uCanDo(b,a)){return true}var c=event.doProxy(a),d=true,e=false;for(var f=0,g=c.length;f<g;f++){var h=c[f];if(h.nodeEventCallback){e=true;d=h.nodeEventCallback.apply(h,[a,h.node])&&d}if(h.treeEventCallback){e=true;d=h.treeEventCallback.apply(h,[a,h.node])&&d}}try{if(e&&$("input:focus").length==0){tools.noSel(b)}}catch(a){}return d}},handler={onSwitchNode:function(a,b){var c=y[a.data.treeId];if(b.open){if(tools.apply(c.callback.beforeCollapse,[c.treeId,b],true)==false){return true}data.getRoot(c).expandTriggerFlag=true;view.switchNode(c,b)}else{if(tools.apply(c.callback.beforeExpand,[c.treeId,b],true)==false){return true}data.getRoot(c).expandTriggerFlag=true;view.switchNode(c,b)}return true},onClickNode:function(a,b){var c=y[a.data.treeId],d=c.view.autoCancelSelected&&a.ctrlKey&&data.isSelectedNode(c,b)?0:c.view.autoCancelSelected&&a.ctrlKey&&c.view.selectedMulti?2:1;if(tools.apply(c.callback.beforeClick,[c.treeId,b,d],true)==false){return true}if(d===0){view.cancelPreSelectedNode(c,b)}else{view.selectNode(c,b,d===2)}c.treeObj.trigger(consts.event.CLICK,[c.treeId,b,d]);return true},onZTreeMousedown:function(a,b){var c=y[a.data.treeId];if(tools.apply(c.callback.beforeMouseDown,[c.treeId,b],true)){tools.apply(c.callback.onMouseDown,[a,c.treeId,b])}return true},onZTreeMouseup:function(a,b){var c=y[a.data.treeId];if(tools.apply(c.callback.beforeMouseUp,[c.treeId,b],true)){tools.apply(c.callback.onMouseUp,[a,c.treeId,b])}return true},onZTreeDblclick:function(a,b){var c=y[a.data.treeId];if(tools.apply(c.callback.beforeDblClick,[c.treeId,b],true)){tools.apply(c.callback.onDblClick,[a,c.treeId,b])}return true},onZTreeContextmenu:function(a,b){var c=y[a.data.treeId];if(tools.apply(c.callback.beforeRightClick,[c.treeId,b],true)){tools.apply(c.callback.onRightClick,[a,c.treeId,b])}return typeof c.callback.onRightClick!="function"}},tools={apply:function(a,b,c){if(typeof a=="function"){return a.apply(z,b?b:[])}return c},canAsync:function(a,b){var c=a.data.key.children;return b&&b.isParent&&!(b.zAsync||b[c]&&b[c].length>0)},clone:function(a){var b;if(a instanceof Array){b=[];var c=a.length;while(c--){b[c]=arguments.callee(a[c])}return b}else{if(typeof a=="function"){return a}else{if(a instanceof Object){b={};for(var d in a){b[d]=arguments.callee(a[d])}return b}else{return a}}}},eqs:function(a,b){return a.toLowerCase()===b.toLowerCase()},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},getMDom:function(a,b,c){if(!b){return null}while(b&&b.id!==a.treeId){for(var d=0,e=c.length;b.tagName&&d<e;d++){if(tools.eqs(b.tagName,c[d].tagName)&&b.getAttribute(c[d].attrName)!==null){return b}}b=b.parentNode}return null},noSel:function(a){var b=data.getRoot(a);if(b.noSelection){try{window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}catch(c){}}},uCanDo:function(a,b){return true}},view={addNodes:function(a,b,c,d){if(a.data.keep.leaf&&b&&!b.isParent){return}if(!tools.isArray(c)){c=[c]}if(a.data.simpleData.enable){c=data.transformTozTreeFormat(a,c)}if(b){var e=$("#"+b.tId+consts.id.SWITCH),f=$("#"+b.tId+consts.id.ICON),g=$("#"+b.tId+consts.id.UL);if(!b.open){view.replaceSwitchClass(b,e,consts.folder.CLOSE);view.replaceIcoClass(b,f,consts.folder.CLOSE);b.open=false;g.css({display:"none"})}data.addNodesData(a,b,c);view.createNodes(a,b.level+1,c,b);if(!d){view.expandCollapseParentNode(a,b,true)}}else{data.addNodesData(a,data.getRoot(a),c);view.createNodes(a,0,c,null)}},appendNodes:function(a,b,c,d,e,f){if(!c){return[]}var g=[],h=a.data.key.children,i=a.data.key.name,j=data.getTitleKey(a);for(var k=0,l=c.length;k<l;k++){var m=c[k],n=d?d:data.getRoot(a),o=n[h],p=o.length==c.length&&k==0,q=k==c.length-1;if(e){data.initNode(a,b,m,d,p,q,f);data.addNodeCache(a,m)}var r=[];if(m[h]&&m[h].length>0){r=view.appendNodes(a,b+1,m[h],m,e,f&&m.open)}if(f){var s=view.makeNodeUrl(a,m),t=view.makeNodeFontCss(a,m),u=[];for(var v in t){u.push(v,":",t[v],";")}var w=a.view.nameIsHTML?m[i]:m[i].replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">");g.push("<li id='",m.tId,"' tip='",w,"' class=' level",m.level,m.rpt=="0"?" ignore":"","' treenode>","<button type='button' hidefocus='true'"," id='",m.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(a,m),"' treeNode",consts.id.SWITCH,"></button>");data.getBeforeA(a,m,g);if(a.showTestSummaryAtALevelOfLessThan>m.level){if(m.total){g.push("<a id='",m.tId,consts.id.A,"' tip='",w,' <span class="tsSummary">',m.total,' [<span class="pass">',m.pass,'</span>/<span class="fail">',m.total-m.pass,"</span>]</span>","' class='level",m.level," tooltip' treeNode",consts.id.A,' onclick="',m.click||"",'" ',s!=null&&s.length>0?"href='"+s+"'":""," target='",view.makeNodeTarget(a,m),"' style='",u.join(""),"'")}else{g.push("<a id='",m.tId,consts.id.A,"' tip='",w,"' class='level",m.level," tooltip' treeNode",consts.id.A,' onclick="',m.click||"",'" ',s!=null&&s.length>0?"href='"+s+"'":""," target='",view.makeNodeTarget(a,m),"' style='",u.join(""),"'")}}else{g.push("<a id='",m.tId,consts.id.A,"' class='level",m.level," tooltip' treeNode",consts.id.A,' onclick="',m.click||"",'" ',s!=null&&s.length>0?"href='"+s+"'":""," target='",view.makeNodeTarget(a,m),"' style='",u.join(""),"'")}if(tools.apply(a.view.showTitle,[a.treeId,m],a.view.showTitle)&&m[j]){g.push("tip='",m[j].replace(/'/g,"&#39;").replace(/</g,"<").replace(/>/g,">"),"'")}g.push(">");data.getInnerBeforeA(a,m,g);if(m.status!=null){g.push("<button type='button' hidefocus='true' id='",m.tId+"_2",consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",m.status==null?"":"icon-"+((m.status==1)?'pass':'fail'),"' style='",view.makeNodeIcoStyle(a,m),"'></button>")}if(m.level>=0){if(a.detectAndShowNew&&(m.isnew==1)){g.push("<button type='button' hidefocus='true' id='",m.tId+"_9",consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='","ico-new","' style='",view.makeNodeIcoStyle(a,m),"'></button>")}}if(a.showTestSummaryAtALevelOfLessThan>m.level){var x="";if(m.total){x=" <span class='tsSummary'> "+m.total+" [<span class='pass'>"+m.pass+"</span>"+"/"+"<span class='fail'>"+(m.total-m.pass)+"</span>]"+"</span>"}g.push("<button type='button' hidefocus='true' id='",m.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(a,m),"' style='",view.makeNodeIcoStyle(a,m),"'></button>","<span id='",m.tId,consts.id.SPAN,"'>",w,x,"</span>")}else{if(m.pot==0){g.push("<button type='button' hidefocus='true' id='",m.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(a,m),"' style='",view.makeNodeIcoStyle(a,m),"'></button>","<span id='",m.tId,consts.id.SPAN,"'>",w,"</span>")}else{g.push("<button type='button' hidefocus='true' id='",m.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='attc-img' style='",view.makeNodeIcoStyle(a,m),"'></button>","<button type='button' hidefocus='true' id='",m.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(a,m),"' style='",view.makeNodeIcoStyle(a,m),"'></button>","<span id='",m.tId,consts.id.SPAN,"'>",w,"</span>")}}data.getInnerAfterA(a,m,g);g.push("</a>");data.getAfterA(a,m,g);if(m.isParent&&m.open){view.makeUlHtml(a,m,g,r.join(""))}g.push("</li>");data.addCreatedNode(a,m)}}return g},appendParentULDom:function(a,b){var c=[],d=$("#"+b.tId),e=$("#"+b.tId+consts.id.UL),f=a.data.key.children,g=view.appendNodes(a,b.level+1,b[f],b,false,true);view.makeUlHtml(a,b,c,g.join(""));if(!d.get(0)&&!!b.parentTId){view.appendParentULDom(a,b.getParentNode());d=$("#"+b.tId)}if(e.get(0)){e.remove()}d.append(c.join(""));view.createNodeCallback(a)},asyncNode:function(d,e,f,g){var i,l;if(e&&!e.isParent){tools.apply(g);return false}else{if(e&&e.isAjaxing){return false}else{if(tools.apply(d.callback.beforeAsync,[d.treeId,e],true)==false){tools.apply(g);return false}}}if(e){e.isAjaxing=true;var h=$("#"+e.tId+consts.id.ICON);h.attr({style:"","class":"ico_loading"})}var j=d.async.contentType=="application/json",tmpParam=j?"{":"",jTemp="";for(i=0,l=d.async.autoParam.length;e&&i<l;i++){var k=d.async.autoParam[i].split("="),spKey=k;if(k.length>1){spKey=k[1];k=k[0]}if(j){jTemp=typeof e[k]=="string"?'"':"";tmpParam+='"'+spKey+('":'+jTemp+e[k]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=spKey+("="+e[k]).replace(/&/g,"%26")+"&"}}if(tools.isArray(d.async.otherParam)){for(i=0,l=d.async.otherParam.length;i<l;i+=2){if(j){jTemp=typeof d.async.otherParam[i+1]=="string"?'"':"";tmpParam+='"'+d.async.otherParam[i]+('":'+jTemp+d.async.otherParam[i+1]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=d.async.otherParam[i]+("="+d.async.otherParam[i+1]).replace(/&/g,"%26")+"&"}}}else{for(var p in d.async.otherParam){if(j){jTemp=typeof d.async.otherParam[p]=="string"?'"':"";tmpParam+='"'+p+('":'+jTemp+d.async.otherParam[p]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=p+("="+d.async.otherParam[p]).replace(/&/g,"%26")+"&"}}}if(tmpParam.length>1){tmpParam=tmpParam.substring(0,tmpParam.length-1)}if(j){tmpParam+="}"}$.ajax({contentType:d.async.contentType,type:d.async.type,url:tools.apply(d.async.url,[d.treeId,e],d.async.url),data:tmpParam,dataType:d.async.dataType,success:function(a){alert(d.async.url);var b=[];try{if(!a||a.length==0){b=[]}else{if(typeof a=="string"){b=eval("("+a+")")}else{b=a}}}catch(err){}if(e){e.isAjaxing=null;e.zAsync=true}view.setNodeLineIcos(d,e);if(b&&b!=""){b=tools.apply(d.async.dataFilter,[d.treeId,e,b],b);view.addNodes(d,e,tools.clone(b),!!f)}else{view.addNodes(d,e,[],!!f)}d.treeObj.trigger(consts.event.ASYNC_SUCCESS,[d.treeId,e,a]);tools.apply(g)},error:function(a,b,c){view.setNodeLineIcos(d,e);if(e){e.isAjaxing=null}d.treeObj.trigger(consts.event.ASYNC_ERROR,[d.treeId,e,a,b,c])}});return true},cancelPreSelectedNode:function(a,b){var c=data.getRoot(a).curSelectedList;for(var d=0,e=c.length-1;e>=d;e--){if(!b||b===c[e]){$("#"+c[e].tId+consts.id.A).removeClass(consts.node.CURSELECTED);view.setNodeName(a,c[e]);if(b){data.removeSelectedNode(a,b);break}}}if(!b){data.getRoot(a).curSelectedList=[]}},createNodeCallback:function(a){if(!!a.callback.onNodeCreated||!!a.view.addDiyDom){var b=data.getRoot(a);while(b.createdNodes.length>0){var c=b.createdNodes.shift();tools.apply(a.view.addDiyDom,[a.treeId,c]);if(!!a.callback.onNodeCreated){a.treeObj.trigger(consts.event.NODECREATED,[a.treeId,c])}}}},createNodes:function(a,b,c,d){if(!c||c.length==0){return}var e=data.getRoot(a),f=a.data.key.children,g=!d||d.open||!!$("#"+d[f][0].tId).get(0);e.createdNodes=[];var h=view.appendNodes(a,b,c,d,true,g);if(!d){a.treeObj.append(h.join(""))}else{var i=$("#"+d.tId+consts.id.UL);if(i.get(0)){i.append(h.join(""))}}view.createNodeCallback(a)},expandCollapseNode:function(a,b,c,d,e){var f=data.getRoot(a),g=a.data.key.children;if(!b){tools.apply(e,[]);return}if(f.expandTriggerFlag){var h=e;e=function(){if(h){h()}if(b.open){a.treeObj.trigger(consts.event.EXPAND,[a.treeId,b])}else{a.treeObj.trigger(consts.event.COLLAPSE,[a.treeId,b])}};f.expandTriggerFlag=false}if(b.open==c){tools.apply(e,[]);return}if(!b.open&&b.isParent&&(!$("#"+b.tId+consts.id.UL).get(0)||b[g]&&b[g].length>0&&!$("#"+b[g][0].tId).get(0))){view.appendParentULDom(a,b)}var i=$("#"+b.tId+consts.id.UL),j=$("#"+b.tId+consts.id.SWITCH),k=$("#"+b.tId+consts.id.ICON);if(b.isParent){b.open=!b.open;if(b.iconOpen&&b.iconClose){k.attr("style",view.makeNodeIcoStyle(a,b))}if(b.open){view.replaceSwitchClass(b,j,consts.folder.OPEN);view.replaceIcoClass(b,k,consts.folder.OPEN);if(d==false||a.view.expandSpeed==""){i.show();tools.apply(e,[])}else{if(b[g]&&b[g].length>0){i.slideDown(a.view.expandSpeed,e)}else{i.show();tools.apply(e,[])}}}else{view.replaceSwitchClass(b,j,consts.folder.CLOSE);view.replaceIcoClass(b,k,consts.folder.CLOSE);if(d==false||a.view.expandSpeed==""){i.hide();tools.apply(e,[])}else{i.slideUp(a.view.expandSpeed,e)}}}else{tools.apply(e,[])}},expandCollapseParentNode:function(a,b,c,d,e){if(!b){return}if(!b.parentTId){view.expandCollapseNode(a,b,c,d,e);return}else{view.expandCollapseNode(a,b,c,d)}if(b.parentTId){view.expandCollapseParentNode(a,b.getParentNode(),c,d,e)}},expandCollapseSonNode:function(a,b,c,d,e){var f=data.getRoot(a),g=a.data.key.children,h=b?b[g]:f[g],i=b?false:d,j=data.getRoot(a).expandTriggerFlag;data.getRoot(a).expandTriggerFlag=false;if(h){for(var k=0,l=h.length;k<l;k++){if(h[k]){view.expandCollapseSonNode(a,h[k],c,i)}}}data.getRoot(a).expandTriggerFlag=j;view.expandCollapseNode(a,b,c,d,e)},makeNodeFontCss:function(a,b){var c=tools.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return c&&typeof c!="function"?c:{}},makeNodeIcoClass:function(a,b){var c=["ico"];if(!b.isAjaxing){c[0]=(b.icon?b.icon+"_":"")+c[0];if(b.isParent){c.push(b.open?consts.folder.OPEN:consts.folder.CLOSE)}else{c.push(consts.folder.DOCU)}}return c.join("_")},makeNodeIcoStyle:function(a,b){var c=[];if(!b.isAjaxing){var d=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b.icon;if(d){c.push("background:url(",d,") 0 0 no-repeat;")}if(a.view.showIcon==false||!tools.apply(a.view.showIcon,[a.treeId,b],true)){c.push("width:0px;height:0px;")}}return c.join("")},makeNodeLineClass:function(a,b){var c=[];if(a.view.showLine){if(b.level==0&&b.isFirstNode&&b.isLastNode){c.push(consts.line.ROOT)}else{if(b.level==0&&b.isFirstNode){c.push(consts.line.ROOTS)}else{if(b.isLastNode){c.push(consts.line.BOTTOM)}else{c.push(consts.line.CENTER)}}}}else{c.push(consts.line.NOLINE)}if(b.isParent){c.push(b.open?consts.folder.OPEN:consts.folder.CLOSE)}else{c.push(consts.folder.DOCU)}return view.makeNodeLineClassEx(b)+c.join("_")},makeNodeLineClassEx:function(a){return"level"+a.level+" switch "},makeNodeTarget:function(a,b){if(b.target){return b.target}else{return a.defaultlink.target||"_blank"}},makeNodeUrl:function(a,b){if(b.url){return b.url?b.url:null}else{var c=a.defaultlink.url?a.defaultlink.url:null;if(c!=null){var d=tools.apply(a.defaultlink.linkParams,[a.treeId,b],a.defaultlink.linkParams);if(d&&typeof a.defaultlink.linkParams!="function"){d=a.defaultlink.linkParams}if(d){c=c+"?"+d}}return c}},makeUlHtml:function(a,b,c,d){c.push("<ul id='",b.tId,consts.id.UL,"' class='level",b.level," ",view.makeUlLineClass(a,b),"' style='display:",b.open?"block":"none","'>");c.push(d);c.push("</ul>")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?consts.line.LINE:""},replaceIcoClass:function(a,b,c){if(!b||a.isAjaxing){return}var d=b.attr("class");if(d==undefined){return}var e=d.split("_");switch(c){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[e.length-1]=c;break}b.attr("class",e.join("_"))},replaceSwitchClass:function(a,b,c){if(!b){return}var d=b.attr("class");if(d==undefined){return}var e=d.split("_");switch(c){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:e[0]=view.makeNodeLineClassEx(a)+c;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[1]=c;break}b.attr("class",e.join("_"));if(c!==consts.folder.DOCU){b.removeAttr("disabled")}else{}},selectNode:function(a,b,c){if(!c){view.cancelPreSelectedNode(a)}$("#"+b.tId+consts.id.A).addClass(consts.node.CURSELECTED);data.addSelectedNode(a,b)},setNodeFontCss:function(a,b){var c=$("#"+b.tId+consts.id.A),d=view.makeNodeFontCss(a,b);if(d){c.css(d)}},setNodeLineIcos:function(a,b){if(!b){return}var c=$("#"+b.tId+consts.id.SWITCH),d=$("#"+b.tId+consts.id.UL),e=$("#"+b.tId+consts.id.ICON),f=view.makeUlLineClass(a,b);if(f.length==0){d.removeClass(consts.line.LINE)}else{d.addClass(f)}c.attr("class",view.makeNodeLineClass(a,b));if(b.isParent){c.removeAttr("disabled")}else{}e.removeAttr("style");e.attr("style",view.makeNodeIcoStyle(a,b));e.attr("class",view.makeNodeIcoClass(a,b))},setNodeName:function(a,b){var c=a.data.key.name,d=data.getTitleKey(a),e=$("#"+b.tId+consts.id.SPAN);e.empty();if(a.view.nameIsHTML||a.showTestSummaryAtALevelOfLessThan){var f="";if(b.total){f=" <span class='tsSummary'> "+b.total+" [<span class='pass'>"+b.pass+"</span>"+"/"+"<span class='fail'>"+(b.total-b.pass)+"</span>]"+"</span>"}e.html(b[c]+f)}else{e.text(b[c])}if(tools.apply(a.view.showTitle,[a.treeId,b],a.view.showTitle)&&b[d]){var g=$("#"+b.tId+consts.id.A);g.attr("title",b[d])}},setNodeTarget:function(a,b){var c=$("#"+b.tId+consts.id.A);c.attr("target",view.makeNodeTarget(a,b))},setNodeUrl:function(a,b){var c=$("#"+b.tId+consts.id.A),d=view.makeNodeUrl(a,b);if(d==null||d.length==0){c.removeAttr("href")}else{c.attr("href",d)}},switchNode:function(a,b){if(b.open||!tools.canAsync(a,b)){view.expandCollapseNode(a,b,!b.open)}else{if(a.async.enable){if(!view.asyncNode(a,b)){view.expandCollapseNode(a,b,!b.open);return}}else{if(b){view.expandCollapseNode(a,b,!b.open)}}}}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(a){var b=data.getZTreeTools(a);return b?b:null},init:function(a,b,c){var d=tools.clone(_setting);$.extend(true,d,b);d.treeId=a.attr("id");d.treeObj=a;d.treeObj.empty();y[d.treeId]=d;if($.browser.msie&&parseInt($.browser.version)<7){d.view.expandSpeed=""}data.initRoot(d);var e=data.getRoot(d),f=d.data.key.children;c=c?tools.clone(tools.isArray(c)?c:[c]):[];if(d.data.simpleData.enable){e[f]=data.transformTozTreeFormat(d,c)}else{e[f]=c}data.initCache(d);event.bindTree(d);event.bindEvent(d);var g={setting:d,cancelSelectedNode:function(a){view.cancelPreSelectedNode(this.setting,a)},expandAll:function(a){a=!!a;view.expandCollapseSonNode(this.setting,null,a,true);return a},expandNode:function(a,b,c,e,f){if(!a||!a.isParent){return null}if(b!==true&&b!==false){b=!a.open}f=!!f;if(f&&b&&tools.apply(d.callback.beforeExpand,[d.treeId,a],true)==false){return null}else{if(f&&!b&&tools.apply(d.callback.beforeCollapse,[d.treeId,a],true)==false){return null}}if(b&&a.parentTId){view.expandCollapseParentNode(this.setting,a.getParentNode(),b,false)}if(b===a.open&&!c){return null}data.getRoot(d).expandTriggerFlag=f;if(c){view.expandCollapseSonNode(this.setting,a,b,true,function(){if(e!==false){$("#"+a.tId+consts.id.ICON).focus().blur()}})}else{a.open=!b;view.switchNode(this.setting,a);if(e!==false){$("#"+a.tId+consts.id.ICON).focus().blur()}}return b},getNodes:function(){return data.getNodes(this.setting)},getNodeByParam:function(a,b,c){if(!a){return null}return data.getNodeByParam(this.setting,c?c[this.setting.data.key.children]:data.getNodes(this.setting),a,b)},getNodeByTId:function(a){return data.getNodeCache(this.setting,a)},getNodesByParam:function(a,b,c){if(!a){return null}return data.getNodesByParam(this.setting,c?c[this.setting.data.key.children]:data.getNodes(this.setting),a,b)},getNodesByParamFuzzy:function(a,b,c){if(!a){return null}return data.getNodesByParamFuzzy(this.setting,c?c[this.setting.data.key.children]:data.getNodes(this.setting),a,b)},getNodesByFilter:function(a,b,c){b=!!b;if(!a||typeof a!="function")return b?null:[];return data.getNodesByFilter(this.setting,c?c[this.setting.data.key.children]:data.getNodes(this.setting),a,b)},getNodeIndex:function(a){if(!a){return null}var b=d.data.key.children,c=a.parentTId?a.getParentNode():data.getRoot(this.setting);for(var e=0,f=c[b].length;e<f;e++){if(c[b][e]==a){return e}}return-1},getSelectedNodes:function(){var a=[],b=data.getRoot(this.setting).curSelectedList;for(var c=0,d=b.length;c<d;c++){a.push(b[c])}return a},isSelectedNode:function(a){return data.isSelectedNode(this.setting,a)},reAsyncChildNodes:function(a,b,c){if(!this.setting.async.enable){return}var d=!a;if(d){a=data.getRoot(this.setting)}if(b=="refresh"){a[this.setting.data.key.children]=[];if(d){this.setting.treeObj.empty()}else{var e=$("#"+a.tId+consts.id.UL);e.empty()}}view.asyncNode(this.setting,d?null:a,!!c)},refresh:function(){this.setting.treeObj.empty();var a=data.getRoot(this.setting),b=a[this.setting.data.key.children];data.initRoot(this.setting);a[this.setting.data.key.children]=b;data.initCache(this.setting);view.createNodes(this.setting,0,a[this.setting.data.key.children])},selectNode:function(a,b){if(!a){return}if(tools.uCanDo(this.setting)){b=d.view.selectedMulti&&b;if(a.parentTId){view.expandCollapseParentNode(this.setting,a.getParentNode(),true,false,function(){$("#"+a.tId+consts.id.ICON).focus().blur()})}else{$("#"+a.tId+consts.id.ICON).focus().blur()}view.selectNode(this.setting,a,b)}},transformTozTreeNodes:function(a){return data.transformTozTreeFormat(this.setting,a)},transformToArray:function(a){return data.transformToArrayFormat(this.setting,a)},updateNode:function(a,b){if(!a){return}var c=$("#"+a.tId);if(c.get(0)&&tools.uCanDo(this.setting)){view.setNodeName(this.setting,a);view.setNodeTarget(this.setting,a);view.setNodeUrl(this.setting,a);view.setNodeLineIcos(this.setting,a);view.setNodeFontCss(this.setting,a)}}};e.treeTools=g;data.setZTreeTools(d,g);if(e[f]&&e[f].length>0){view.createNodes(d,0,e[f])}else{if(d.async.enable&&d.async.url&&d.async.url!==""){view.asyncNode(d)}}return g}};var z=$.fn.zTree,consts=z.consts})(jQuery);
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * jQote2 v0.9.8 - client-side Javascript templating engine
 * License:  WTFPL v2 or MIT license
 * WTFPL v2 © 2004, Sam Hocevar
 * © 2010, aefxx
 * http://aefxx.com/
 * Date: Fri, May 4th, 2012
 */
(function($){var _=false,E1="UndefinedTemplateError",E2="TemplateCompilationError",E3="TemplateExecutionError",A="[object Array]",S="[object String]",F="[object Function]",n=1,c="%",q=/^[^<]*(<[\w\W]+>)[^>]*$/,ts=Object.prototype.toString;function r(e,x){throw ($.extend(e,x),e)}function dns(f) {var a=[];if(ts.call(f)!==A)return _;for(var i=0,l=f.length;i<l;i++)a[i]=f[i].jqote_id;return a.length?a.sort().join('.').replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,"$1$2"):_}function l(s,t){var f,g=[],t=t||c,x=ts.call(s);if(x===F)return s.jqote_id?[s]:_;if(x!==A)return[$.jqotec(s,t)];if(x===A)for(var i=0,l=s.length;i<l;i++)return g.length?g:_}$.fn.extend({jqote:function(x,y){var x=ts.call(x)===A?x:[x],d="";this.each(function(i){var f=$.jqotec(this,y);for(var j=0;j<x.length;j++)d+=f.call(x[j],i,j,x,f)});return d}});$.each({app:"append",pre:"prepend",sub:"html"},function(x,y){$.fn["jqote"+x]=function(e,d,t){var p,r,s=$.jqote(e,d,t),$$=!q.test(s)?function(s){return $(document.createTextNode(s))}:$;if(!!(p=dns(l(e))))r=new RegExp("(^|\\.)"+p.split(".").join("\\.(.*)?")+"(\\.|$)");return this.each(function(){var z=$$(s);$(this)[y](z);(z[0].nodeType===3?$(this):z).trigger("jqote."+x,[z,r])})}});
$.extend({jqote:function(e,d,t){var s="",t=t||c,f=l(e,t);if(f===_)r(new Error("Empty or undefined template passed to $.jqote"),{type:E1});d=ts.call(d)!==A?[d]:d;for(var i=0,m=f.length;i<m;i++)for(var j=0;j<d.length;j++)s+=f[i].call(d[j],i,j,d,f[i]);return s},jqotec:function(x,t){var h,e,y,t=t||c,z=ts.call(x);if(z===S&&q.test(x)){e=y=x;if(h=$.jqotecache[x])return h}else{e=z===S||x.nodeType?$(x):x instanceof jQuery?x:null;if(!e[0]||!(y=e[0].innerHTML)&&!(y=e.text()))r(new Error("Empty or undefined template passed to $.jqotec"),{type:E1});if(h=$.jqotecache[$.data(e[0],"jqote_id")])return h}var s="",i,a=y.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+t).join(t+">\x1b").split(t+">");for(var m=0,k=a.length;m<k;m++)s+=a[m].charAt(0)!=="\x1b"?"out+='"+a[m].replace(/(\\|["'])/g,"\\$1")+"'":(a[m].charAt(1)==="="?";out+=("+a[m].substr(2)+");":(a[m].charAt(1)==="!"?";out+=$.jqotenc(("+a[m].substr(2)+"));":";"+a[m].substr(1)));s="try{"+('var out="";'+s+";return out;").split("out+='';").join("").split('var out="";out+=').join("var out=")+'}catch(e){e.type="'+E3+'";e.args=arguments;e.template=arguments.callee.toString();throw e;}';try{var f=new Function("i, j, data, fn",s)}catch(e){r(e,{type:E2})}i=e instanceof jQuery?$.data(e[0],"jqote_id",n):e;return $.jqotecache[i]=(f.jqote_id=n++,f)},
jqotefn:function(e){var t=ts.call(e),i=t===S&&q.test(e)?e:$.data($(e)[0],"jqote_id");return $.jqotecache[i]||_},jqotetag:function(s){if(ts.call(s)===S)c=s},jqotenc:function(s){return s.toString().replace(/&(?!\w+;)/g,'&#38;').split('<').join('&#60;').split('>').join('&#62;').split('"').join('&#34;').split("'").join('&#39;')},jqotecache:{}});$.event.special.jqote={add:function(o){var n,h=o.handler,d=!o.data?[]:ts.call(o.data)!==A?[o.data]:o.data;if(!o.namespace)o.namespace="app.pre.sub";if(!d.length||!(n=dns(l(d))))return;o.handler=function(e,m,r){return !r||r.test(n)?h.apply(this,[e,m]):null}}}})(jQuery);
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * Jquery Ajax Loading Mask
 * License: MIT license
 * Author: Kevin Sakhuja
 * https://github.com/kevbook/jquery-ajaxmask
 * Usage: $(element).loadingMask({ stop: true }); 
 */
(function($){$.fn.ajaxMask=function(c){return this.each(function(){var a=$.extend({stop:false},c);if(!a.stop){var b=$('<div class="ajax-mask"><div class="loading"></div></div>').css({'position':'absolute','top':0,'left':0,'width':'100%','height':'100%'});$(this).css({'position':'relative'}).append(b)}else{$('.ajax-mask').remove()}})}})(jQuery);
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * Morris.js v0.4.3 - pretty time-series line graphs
 * License: BSD License
 * © 2012, Olly Smith
 * https://github.com/oesmith/morris.js
 */
(function(){var $,Morris,minutesSpecHelper,secondsSpecHelper,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(a,b){for(var c in b){if(__hasProp.call(b,c))a[c]=b[c]}function ctor(){this.constructor=a}ctor.prototype=b.prototype;a.prototype=new ctor();a.__super__=b.prototype;return a},__bind=function(a,b){return function(){return a.apply(b,arguments)}},__indexOf=[].indexOf||function(a){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===a)return i}return-1};Morris=window.Morris={};$=jQuery;Morris.EventEmitter=(function(){function EventEmitter(){}EventEmitter.prototype.on=function(a,b){if(this.handlers==null){this.handlers={}}if(this.handlers[a]==null){this.handlers[a]=[]}this.handlers[a].push(b);return this};EventEmitter.prototype.fire=function(){var a,handler,name,_i,_len,_ref,_results;name=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[];if((this.handlers!=null)&&(this.handlers[name]!=null)){_ref=this.handlers[name];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){handler=_ref[_i];_results.push(handler.apply(null,a))}return _results}};return EventEmitter})();Morris.commas=function(a){var b,intnum,ret,strabsnum;if(a!=null){ret=a<0?"-":"";b=Math.abs(a);intnum=Math.floor(b).toFixed(0);ret+=intnum.replace(/(?=(?:\d{3})+$)(?!^)/g,',');strabsnum=b.toString();if(strabsnum.length>intnum.length){ret+=strabsnum.slice(intnum.length)}return ret}else{return'-'}};Morris.pad2=function(a){return(a<10?'0':'')+a};Morris.Grid=(function(f){__extends(Grid,f);function Grid(c){var d=this;if(typeof c.element==='string'){this.el=$(document.getElementById(c.element))}else{this.el=$(c.element)}if(!(this.el!=null)||this.el.length===0){throw new Error("Graph container element not found");}if(this.el.css('position')==='static'){this.el.css('position','relative')}this.options=$.extend({},this.gridDefaults,this.defaults||{},c);if(typeof this.options.units==='string'){this.options.postUnits=c.units}this.raphael=new Raphael(this.el[0]);this.elementWidth=null;this.elementHeight=null;this.dirty=false;if(this.init){this.init()}this.setData(this.options.data);this.el.bind('mousemove',function(a){var b;b=d.el.offset();return d.fire('hovermove',a.pageX-b.left,a.pageY-b.top)});this.el.bind('mouseout',function(a){return d.fire('hoverout')});this.el.bind('touchstart touchmove touchend',function(a){var b,touch;touch=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];b=d.el.offset();d.fire('hover',touch.pageX-b.left,touch.pageY-b.top);return touch});this.el.bind('click',function(a){var b;b=d.el.offset();return d.fire('gridclick',a.pageX-b.left,a.pageY-b.top)});if(this.postInit){this.postInit()}}Grid.prototype.gridDefaults={dateFormat:null,axes:true,grid:true,gridLineColor:'#aaa',gridStrokeWidth:0.5,gridTextColor:'#888',gridTextSize:12,gridTextFamily:'sans-serif',gridTextWeight:'normal',hideHover:false,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:true,postUnits:'',preUnits:'',ymax:'auto',ymin:'auto 0',goals:[],goalStrokeWidth:1.0,goalLineColors:['#666633','#999966','#cc6666','#663333'],events:[],eventStrokeWidth:1.0,eventLineColors:['#005a04','#ccffbb','#3a5f0b','#005502']};Grid.prototype.setData=function(c,d){var e,idx,index,maxGoal,minGoal,ret,row,step,total,y,ykey,ymax,ymin,yval;if(d==null){d=true}this.options.data=c;if(!(c!=null)||c.length===0){this.data=[];this.raphael.clear();if(this.hover!=null){this.hover.hide()}return}ymax=this.cumulative?0:null;ymin=this.cumulative?0:null;if(this.options.goals.length>0){minGoal=Math.min.apply(null,this.options.goals);maxGoal=Math.max.apply(null,this.options.goals);ymin=ymin!=null?Math.min(ymin,minGoal):minGoal;ymax=ymax!=null?Math.max(ymax,maxGoal):maxGoal}this.data=(function(){var b,_len,_results;_results=[];for(index=b=0,_len=c.length;b<_len;index=++b){row=c[index];ret={};ret.label=row[this.options.xkey];if(this.options.parseTime){ret.x=Morris.parseDate(ret.label);if(this.options.dateFormat){ret.label=this.options.dateFormat(ret.x)}else if(typeof ret.label==='number'){ret.label=new Date(ret.label).toString()}}else{ret.x=index;if(this.options.xLabelFormat){ret.label=this.options.xLabelFormat(ret)}}total=0;ret.y=(function(){var a,_len1,_ref,_results1;_ref=this.options.ykeys;_results1=[];for(idx=a=0,_len1=_ref.length;a<_len1;idx=++a){ykey=_ref[idx];yval=row[ykey];if(typeof yval==='string'){yval=parseFloat(yval)}if((yval!=null)&&typeof yval!=='number'){yval=null}if(yval!=null){if(this.cumulative){total+=yval}else{if(ymax!=null){ymax=Math.max(yval,ymax);ymin=Math.min(yval,ymin)}else{ymax=ymin=yval}}}if(this.cumulative&&(total!=null)){ymax=Math.max(total,ymax);ymin=Math.min(total,ymin)}_results1.push(yval)}return _results1}).call(this);_results.push(ret)}return _results}).call(this);if(this.options.parseTime){this.data=this.data.sort(function(a,b){return(a.x>b.x)-(b.x>a.x)})}this.xmin=this.data[0].x;this.xmax=this.data[this.data.length-1].x;this.events=[];if(this.options.parseTime&&this.options.events.length>0){this.events=(function(){var a,_len,_ref,_results;_ref=this.options.events;_results=[];for(a=0,_len=_ref.length;a<_len;a++){e=_ref[a];_results.push(Morris.parseDate(e))}return _results}).call(this);this.xmax=Math.max(this.xmax,Math.max.apply(null,this.events));this.xmin=Math.min(this.xmin,Math.min.apply(null,this.events))}if(this.xmin===this.xmax){this.xmin-=1;this.xmax+=1}this.ymin=this.yboundary('min',ymin);this.ymax=this.yboundary('max',ymax);if(this.ymin===this.ymax){if(ymin){this.ymin-=1}this.ymax+=1}if(this.options.axes===true||this.options.grid===true){if(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin){this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines);this.ymin=Math.min(this.ymin,this.grid[0]);this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])}else{step=(this.ymax-this.ymin)/(this.options.numLines-1);this.grid=(function(){var a,_ref,_ref1,_results;_results=[];for(y=a=_ref=this.ymin,_ref1=this.ymax;_ref<=_ref1?a<=_ref1:a>=_ref1;y=a+=step){_results.push(y)}return _results}).call(this)}}this.dirty=true;if(d){return this.redraw()}};Grid.prototype.yboundary=function(a,b){var c,suggestedValue;c=this.options["y"+a];if(typeof c==='string'){if(c.slice(0,4)==='auto'){if(c.length>5){suggestedValue=parseInt(c.slice(5),10);if(b==null){return suggestedValue}return Math[a](b,suggestedValue)}else{if(b!=null){return b}else{return 0}}}else{return parseInt(c,10)}}else{return c}};Grid.prototype.autoGridLines=function(b,c,d){var e,gmin,grid,smag,span,step,unit,y,ymag;span=c-b;ymag=Math.floor(Math.log(span)/Math.log(10));unit=Math.pow(10,ymag);gmin=Math.floor(b/unit)*unit;e=Math.ceil(c/unit)*unit;step=(e-gmin)/(d-1);if(unit===1&&step>1&&Math.ceil(step)!==step){step=Math.ceil(step);e=gmin+step*(d-1)}if(gmin<0&&e>0){gmin=Math.floor(b/step)*step;e=Math.ceil(c/step)*step}if(step<1){smag=Math.floor(Math.log(step)/Math.log(10));grid=(function(){var a,_results;_results=[];for(y=a=gmin;gmin<=e?a<=e:a>=e;y=a+=step){_results.push(parseFloat(y.toFixed(1-smag)))}return _results})()}else{grid=(function(){var a,_results;_results=[];for(y=a=gmin;gmin<=e?a<=e:a>=e;y=a+=step){_results.push(y)}return _results})()}return grid};Grid.prototype._calc=function(){var b,gridLine,h,i,w,yLabelWidths;w=this.el.width();h=this.el.height();if(this.elementWidth!==w||this.elementHeight!==h||this.dirty){this.elementWidth=w;this.elementHeight=h;this.dirty=false;this.left=this.options.padding;this.right=this.elementWidth-this.options.padding;this.top=this.options.padding;this.bottom=this.elementHeight-this.options.padding;if(this.options.axes){yLabelWidths=(function(){var a,_len,_ref,_results;_ref=this.grid;_results=[];for(a=0,_len=_ref.length;a<_len;a++){gridLine=_ref[a];_results.push(this.measureText(this.yAxisFormat(gridLine)).width)}return _results}).call(this);this.left+=Math.max.apply(Math,yLabelWidths);b=(function(){var a,_ref,_results;_results=[];for(i=a=0,_ref=this.data.length;0<=_ref?a<_ref:a>_ref;i=0<=_ref?++a:--a){_results.push(this.measureText(this.data[i].text,-this.options.xLabelAngle).height)}return _results}).call(this);this.bottom-=Math.max.apply(Math,b)}this.width=Math.max(1,this.right-this.left);this.height=Math.max(1,this.bottom-this.top);this.dx=this.width/(this.xmax-this.xmin);this.dy=this.height/(this.ymax-this.ymin);if(this.calc){return this.calc()}}};Grid.prototype.transY=function(y){return this.bottom-(y-this.ymin)*this.dy};Grid.prototype.transX=function(x){if(this.data.length===1){return(this.left+this.right)/2}else{return this.left+(x-this.xmin)*this.dx}};Grid.prototype.redraw=function(){this.raphael.clear();this._calc();this.drawGrid();this.drawGoals();this.drawEvents();if(this.draw){return this.draw()}};Grid.prototype.measureText=function(a,b){var c,tt;if(b==null){b=0}tt=this.raphael.text(100,100,a).attr('font-size',this.options.gridTextSize).attr('font-family',this.options.gridTextFamily).attr('font-weight',this.options.gridTextWeight).rotate(b);c=tt.getBBox();tt.remove();return c};Grid.prototype.yAxisFormat=function(a){return this.yLabelFormat(a)};Grid.prototype.yLabelFormat=function(a){if(typeof this.options.yLabelFormat==='function'){return this.options.yLabelFormat(a)}else{return""+this.options.preUnits+(Morris.commas(a))+this.options.postUnits}};Grid.prototype.updateHover=function(x,y){var a,_ref;a=this.hitTest(x,y);if(a!=null){return(_ref=this.hover).update.apply(_ref,a)}};Grid.prototype.drawGrid=function(){var a,y,_i,_len,_ref,_results;if(this.options.grid===false&&this.options.axes===false){return}_ref=this.grid;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){a=_ref[_i];y=this.transY(a);if(this.options.axes){this.drawYAxisLabel(this.left-this.options.padding/2,y,this.yAxisFormat(a))}if(this.options.grid){_results.push(this.drawGridLine("M"+this.left+","+y+"H"+(this.left+this.width)))}else{_results.push(void 0)}}return _results};Grid.prototype.drawGoals=function(){var a,goal,i,_i,_len,_ref,_results;_ref=this.options.goals;_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){goal=_ref[i];a=this.options.goalLineColors[i%this.options.goalLineColors.length];_results.push(this.drawGoal(goal,a))}return _results};Grid.prototype.drawEvents=function(){var a,event,i,_i,_len,_ref,_results;_ref=this.events;_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){event=_ref[i];a=this.options.eventLineColors[i%this.options.eventLineColors.length];_results.push(this.drawEvent(event,a))}return _results};Grid.prototype.drawGoal=function(a,b){return this.raphael.path("M"+this.left+","+(this.transY(a))+"H"+this.right).attr('stroke',b).attr('stroke-width',this.options.goalStrokeWidth)};Grid.prototype.drawEvent=function(a,b){return this.raphael.path("M"+(this.transX(a))+","+this.bottom+"V"+this.top).attr('stroke',b).attr('stroke-width',this.options.eventStrokeWidth)};Grid.prototype.drawYAxisLabel=function(a,b,c){return this.raphael.text(a,b,c).attr('font-size',this.options.gridTextSize).attr('font-family',this.options.gridTextFamily).attr('font-weight',this.options.gridTextWeight).attr('fill',this.options.gridTextColor).attr('text-anchor','end')};Grid.prototype.drawGridLine=function(a){return this.raphael.path(a).attr('stroke',this.options.gridLineColor).attr('stroke-width',this.options.gridStrokeWidth)};return Grid})(Morris.EventEmitter);Morris.parseDate=function(a){var b,m,msecs,n,o,offsetmins,p,q,r,ret,secs;if(typeof a==='number'){return a}m=a.match(/^(\d+) Q(\d)$/);n=a.match(/^(\d+)-(\d+)$/);o=a.match(/^(\d+)-(\d+)-(\d+)$/);p=a.match(/^(\d+) W(\d+)$/);q=a.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);r=a.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);if(m){return new Date(parseInt(m[1],10),parseInt(m[2],10)*3-1,1).getTime()}else if(n){return new Date(parseInt(n[1],10),parseInt(n[2],10)-1,1).getTime()}else if(o){return new Date(parseInt(o[1],10),parseInt(o[2],10)-1,parseInt(o[3],10)).getTime()}else if(p){ret=new Date(parseInt(p[1],10),0,1);if(ret.getDay()!==4){ret.setMonth(0,1+((4-ret.getDay())+7)%7)}return ret.getTime()+parseInt(p[2],10)*604800000}else if(q){if(!q[6]){return new Date(parseInt(q[1],10),parseInt(q[2],10)-1,parseInt(q[3],10),parseInt(q[4],10),parseInt(q[5],10)).getTime()}else{offsetmins=0;if(q[6]!=='Z'){offsetmins=parseInt(q[8],10)*60+parseInt(q[9],10);if(q[7]==='+'){offsetmins=0-offsetmins}}return Date.UTC(parseInt(q[1],10),parseInt(q[2],10)-1,parseInt(q[3],10),parseInt(q[4],10),parseInt(q[5],10)+offsetmins)}}else if(r){secs=parseFloat(r[6]);b=Math.floor(secs);msecs=Math.round((secs-b)*1000);if(!r[8]){return new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),b,msecs).getTime()}else{offsetmins=0;if(r[8]!=='Z'){offsetmins=parseInt(r[10],10)*60+parseInt(r[11],10);if(r[9]==='+'){offsetmins=0-offsetmins}}return Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)+offsetmins,b,msecs)}}else{return new Date(parseInt(a,10),0,1).getTime()}};Morris.Hover=(function(){Hover.defaults={"class":'morris-hover morris-default-style'};function Hover(a){if(a==null){a={}}this.options=$.extend({},Morris.Hover.defaults,a);this.el=$("<div class='"+this.options["class"]+"'></div>");this.el.hide();this.options.parent.append(this.el)}Hover.prototype.update=function(a,x,y){this.html(a);this.show();return this.moveTo(x,y)};Hover.prototype.html=function(a){return this.el.html(a)};Hover.prototype.moveTo=function(x,y){var a,hoverWidth,left,parentHeight,parentWidth,top;parentWidth=this.options.parent.innerWidth();parentHeight=this.options.parent.innerHeight();hoverWidth=this.el.outerWidth();a=this.el.outerHeight();left=Math.min(Math.max(0,x-hoverWidth/2),parentWidth-hoverWidth);if(y!=null){top=y-a-10;if(top<0){top=y+10;if(top+a>parentHeight){top=parentHeight/2-a/2}}}else{top=parentHeight/2-a/2}return this.el.css({left:left+"px",top:parseInt(top)+"px"})};Hover.prototype.show=function(){return this.el.show()};Hover.prototype.hide=function(){return this.el.hide()};return Hover})();Morris.Line=(function(f){__extends(Line,f);function Line(a){this.hilight=__bind(this.hilight,this);this.onHoverOut=__bind(this.onHoverOut,this);this.onHoverMove=__bind(this.onHoverMove,this);this.onGridClick=__bind(this.onGridClick,this);if(!(this instanceof Morris.Line)){return new Morris.Line(a)}Line.__super__.constructor.call(this,a)}Line.prototype.init=function(){this.pointGrow=Raphael.animation({r:this.options.pointSize+3},25,'linear');this.pointShrink=Raphael.animation({r:this.options.pointSize},25,'linear');if(this.options.hideHover!=='always'){this.hover=new Morris.Hover({parent:this.el});this.on('hovermove',this.onHoverMove);this.on('hoverout',this.onHoverOut);return this.on('gridclick',this.onGridClick)}};Line.prototype.defaults={lineWidth:3,pointSize:4,lineColors:['#0b62a4','#7A92A3','#4da74d','#afd8f8','#edc240','#cb4b4b','#9440ed'],pointWidths:[1],pointStrokeColors:['#ffffff'],pointFillColors:[],smooth:true,xLabels:'auto',xLabelFormat:null,xLabelMargin:24,continuousLine:true,hideHover:false};Line.prototype.calc=function(){this.calcPoints();return this.generatePaths()};Line.prototype.calcPoints=function(){var b,y,_i,_len,_ref,_results;_ref=this.data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];b._x=this.transX(b.x);b._y=(function(){var a,_len1,_ref1,_results1;_ref1=b.y;_results1=[];for(a=0,_len1=_ref1.length;a<_len1;a++){y=_ref1[a];if(y!=null){_results1.push(this.transY(y))}else{_results1.push(y)}}return _results1}).call(this);_results.push(b._ymax=Math.min.apply(null,[this.bottom].concat((function(){var a,_len1,_ref1,_results1;_ref1=b._y;_results1=[];for(a=0,_len1=_ref1.length;a<_len1;a++){y=_ref1[a];if(y!=null){_results1.push(y)}}return _results1})())))}return _results};Line.prototype.hitTest=function(x,y){var a,r,_i,_len,_ref;if(this.data.length===0){return null}_ref=this.data.slice(1);for(a=_i=0,_len=_ref.length;_i<_len;a=++_i){r=_ref[a];if(x<(r._x+this.data[a]._x)/2){break}}return a};Line.prototype.onGridClick=function(x,y){var a;a=this.hitTest(x,y);return this.fire('click',a,this.options.data[a],x,y)};Line.prototype.onHoverMove=function(x,y){var a;a=this.hitTest(x,y);return this.displayHoverForRow(a)};Line.prototype.onHoverOut=function(){if(this.options.hideHover!==false){return this.displayHoverForRow(null)}};Line.prototype.displayHoverForRow=function(a){var b;if(a!=null){(b=this.hover).update.apply(b,this.hoverContentForRow(a));return this.hilight(a)}else{this.hover.hide();return this.hilight()}};Line.prototype.hoverContentForRow=function(a){var b,j,row,y,_i,_len,_ref;row=this.data[a];b="<div class='morris-hover-row-label'>"+row.label+"</div>";_ref=row.y;for(j=_i=0,_len=_ref.length;_i<_len;j=++_i){y=_ref[j];b+="<div class='morris-hover-point' style='color: "+(this.colorFor(row,j,'label'))+"'>\n  "+this.options.labels[j]+":\n  "+(this.yLabelFormat(y))+"\n</div>"}if(typeof this.options.hoverCallback==='function'){b=this.options.hoverCallback(a,this.options,b)}return[b,row._x,row._ymax]};Line.prototype.generatePaths=function(){var c,coords,i,r,smooth;return this.paths=(function(){var b,_ref,_ref1,_results;_results=[];for(i=b=0,_ref=this.options.ykeys.length;0<=_ref?b<_ref:b>_ref;i=0<=_ref?++b:--b){smooth=this.options.smooth===true||(_ref1=this.options.ykeys[i],__indexOf.call(this.options.smooth,_ref1)>=0);coords=(function(){var a,_len,_ref2,_results1;_ref2=this.data;_results1=[];for(a=0,_len=_ref2.length;a<_len;a++){r=_ref2[a];if(r._y[i]!==void 0){_results1.push({x:r._x,y:r._y[i]})}}return _results1}).call(this);if(this.options.continuousLine){coords=(function(){var a,_len,_results1;_results1=[];for(a=0,_len=coords.length;a<_len;a++){c=coords[a];if(c.y!==null){_results1.push(c)}}return _results1})()}if(coords.length>1){_results.push(Morris.Line.createPath(coords,smooth,this.bottom))}else{_results.push(null)}}return _results}).call(this)};Line.prototype.draw=function(){if(this.options.axes){this.drawXAxis()}this.drawSeries();if(this.options.hideHover===false){return this.displayHoverForRow(this.data.length-1)}};Line.prototype.drawXAxis=function(){var d,l,labels,prevAngleMargin,prevLabelMargin,row,ypos,_i,_len,_results,_this=this;ypos=this.bottom+this.options.padding/2;prevLabelMargin=null;prevAngleMargin=null;d=function(a,b){var c,labelBox,margin,offset,textBox;c=_this.drawXAxisLabel(_this.transX(b),ypos,a);textBox=c.getBBox();c.transform("r"+(-_this.options.xLabelAngle));labelBox=c.getBBox();c.transform("t0,"+(labelBox.height/2)+"...");if(_this.options.xLabelAngle!==0){offset=-0.5*textBox.width*Math.cos(_this.options.xLabelAngle*Math.PI/180.0);c.transform("t"+offset+",0...")}labelBox=c.getBBox();if((!(prevLabelMargin!=null)||prevLabelMargin>=labelBox.x+labelBox.width||(prevAngleMargin!=null)&&prevAngleMargin>=labelBox.x)&&labelBox.x>=0&&(labelBox.x+labelBox.width)<_this.el.width()){if(_this.options.xLabelAngle!==0){margin=1.25*_this.options.gridTextSize/Math.sin(_this.options.xLabelAngle*Math.PI/180.0);prevAngleMargin=labelBox.x-margin}return prevLabelMargin=labelBox.x-_this.options.xLabelMargin}else{return c.remove()}};if(this.options.parseTime){if(this.data.length===1&&this.options.xLabels==='auto'){labels=[[this.data[0].label,this.data[0].x]]}else{labels=Morris.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat)}}else{labels=(function(){var a,_len,_ref,_results;_ref=this.data;_results=[];for(a=0,_len=_ref.length;a<_len;a++){row=_ref[a];_results.push([row.label,row.x])}return _results}).call(this)}labels.reverse();_results=[];for(_i=0,_len=labels.length;_i<_len;_i++){l=labels[_i];_results.push(d(l[0],l[1]))}return _results};Line.prototype.drawSeries=function(){var i,_i,_j,_ref,_ref1,_results;this.seriesPoints=[];for(i=_i=_ref=this.options.ykeys.length-1;_ref<=0?_i<=0:_i>=0;i=_ref<=0?++_i:--_i){this._drawLineFor(i)}_results=[];for(i=_j=_ref1=this.options.ykeys.length-1;_ref1<=0?_j<=0:_j>=0;i=_ref1<=0?++_j:--_j){_results.push(this._drawPointFor(i))}return _results};Line.prototype._drawPointFor=function(a){var b,row,_i,_len,_ref,_results;this.seriesPoints[a]=[];_ref=this.data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){row=_ref[_i];b=null;if(row._y[a]!=null){b=this.drawLinePoint(row._x,row._y[a],this.options.pointSize,this.colorFor(row,a,'point'),a)}_results.push(this.seriesPoints[a].push(b))}return _results};Line.prototype._drawLineFor=function(a){var b;b=this.paths[a];if(b!==null){return this.drawLinePath(b,this.colorFor(null,a,'line'))}};Line.createPath=function(a,b,c){var d,g,grads,i,ix,lg,path,prevCoord,x1,x2,y1,y2,_i,_len;path="";if(b){grads=Morris.Line.gradients(a)}prevCoord={y:null};for(i=_i=0,_len=a.length;_i<_len;i=++_i){d=a[i];if(d.y!=null){if(prevCoord.y!=null){if(b){g=grads[i];lg=grads[i-1];ix=(d.x-prevCoord.x)/4;x1=prevCoord.x+ix;y1=Math.min(c,prevCoord.y+ix*lg);x2=d.x-ix;y2=Math.min(c,d.y-ix*g);path+="C"+x1+","+y1+","+x2+","+y2+","+d.x+","+d.y}else{path+="L"+d.x+","+d.y}}else{if(!b||(grads[i]!=null)){path+="M"+d.x+","+d.y}}}prevCoord=d}return path};Line.gradients=function(c){var d,grad,i,nextCoord,prevCoord,_i,_len,_results;grad=function(a,b){return(a.y-b.y)/(a.x-b.x)};_results=[];for(i=_i=0,_len=c.length;_i<_len;i=++_i){d=c[i];if(d.y!=null){nextCoord=c[i+1]||{y:null};prevCoord=c[i-1]||{y:null};if((prevCoord.y!=null)&&(nextCoord.y!=null)){_results.push(grad(prevCoord,nextCoord))}else if(prevCoord.y!=null){_results.push(grad(prevCoord,d))}else if(nextCoord.y!=null){_results.push(grad(d,nextCoord))}else{_results.push(null)}}else{_results.push(null)}}return _results};Line.prototype.hilight=function(a){var i,_i,_j,_ref,_ref1;if(this.prevHilight!==null&&this.prevHilight!==a){for(i=_i=0,_ref=this.seriesPoints.length-1;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i){if(this.seriesPoints[i][this.prevHilight]){this.seriesPoints[i][this.prevHilight].animate(this.pointShrink)}}}if(a!==null&&this.prevHilight!==a){for(i=_j=0,_ref1=this.seriesPoints.length-1;0<=_ref1?_j<=_ref1:_j>=_ref1;i=0<=_ref1?++_j:--_j){if(this.seriesPoints[i][a]){this.seriesPoints[i][a].animate(this.pointGrow)}}}return this.prevHilight=a};Line.prototype.colorFor=function(a,b,c){if(typeof this.options.lineColors==='function'){return this.options.lineColors.call(this,a,b,c)}else if(c==='point'){return this.options.pointFillColors[b%this.options.pointFillColors.length]||this.options.lineColors[b%this.options.lineColors.length]}else{return this.options.lineColors[b%this.options.lineColors.length]}};Line.prototype.drawXAxisLabel=function(a,b,c){return this.raphael.text(a,b,c).attr('font-size',this.options.gridTextSize).attr('font-family',this.options.gridTextFamily).attr('font-weight',this.options.gridTextWeight).attr('fill',this.options.gridTextColor)};Line.prototype.drawLinePath=function(a,b){return this.raphael.path(a).attr('stroke',b).attr('stroke-width',this.options.lineWidth)};Line.prototype.drawLinePoint=function(a,b,c,d,e){return this.raphael.circle(a,b,c).attr('fill',d).attr('stroke-width',this.strokeWidthForSeries(e)).attr('stroke',this.strokeForSeries(e))};Line.prototype.strokeWidthForSeries=function(a){return this.options.pointWidths[a%this.options.pointWidths.length]};Line.prototype.strokeForSeries=function(a){return this.options.pointStrokeColors[a%this.options.pointStrokeColors.length]};return Line})(Morris.Grid);Morris.labelSeries=function(a,b,c,e,f){var d,d0,ddensity,name,ret,s,spec,t,_i,_len,_ref;ddensity=200*(b-a)/c;d0=new Date(a);spec=Morris.LABEL_SPECS[e];if(spec===void 0){_ref=Morris.AUTO_LABEL_ORDER;for(_i=0,_len=_ref.length;_i<_len;_i++){name=_ref[_i];s=Morris.LABEL_SPECS[name];if(ddensity>=s.span){spec=s;break}}}if(spec===void 0){spec=Morris.LABEL_SPECS["second"]}if(f){spec=$.extend({},spec,{fmt:f})}d=spec.start(d0);ret=[];while((t=d.getTime())<=b){if(t>=a){ret.push([spec.fmt(d),t])}spec.incr(d)}return ret};minutesSpecHelper=function(a){return{span:a*60*1000,start:function(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours())},fmt:function(d){return""+(Morris.pad2(d.getHours()))+":"+(Morris.pad2(d.getMinutes()))},incr:function(d){return d.setUTCMinutes(d.getUTCMinutes()+a)}}};secondsSpecHelper=function(a){return{span:a*1000,start:function(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes())},fmt:function(d){return""+(Morris.pad2(d.getHours()))+":"+(Morris.pad2(d.getMinutes()))+":"+(Morris.pad2(d.getSeconds()))},incr:function(d){return d.setUTCSeconds(d.getUTCSeconds()+a)}}};Morris.LABEL_SPECS={"decade":{span:172800000000,start:function(d){return new Date(d.getFullYear()-d.getFullYear()%10,0,1)},fmt:function(d){return""+(d.getFullYear())},incr:function(d){return d.setFullYear(d.getFullYear()+10)}},"year":{span:17280000000,start:function(d){return new Date(d.getFullYear(),0,1)},fmt:function(d){return""+(d.getFullYear())},incr:function(d){return d.setFullYear(d.getFullYear()+1)}},"month":{span:2419200000,start:function(d){return new Date(d.getFullYear(),d.getMonth(),1)},fmt:function(d){return""+(d.getFullYear())+"-"+(Morris.pad2(d.getMonth()+1))},incr:function(d){return d.setMonth(d.getMonth()+1)}},"day":{span:86400000,start:function(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate())},fmt:function(d){return""+(d.getFullYear())+"-"+(Morris.pad2(d.getMonth()+1))+"-"+(Morris.pad2(d.getDate()))},incr:function(d){return d.setDate(d.getDate()+1)}},"hour":minutesSpecHelper(60),"30min":minutesSpecHelper(30),"15min":minutesSpecHelper(15),"10min":minutesSpecHelper(10),"5min":minutesSpecHelper(5),"minute":minutesSpecHelper(1),"30sec":secondsSpecHelper(30),"15sec":secondsSpecHelper(15),"10sec":secondsSpecHelper(10),"5sec":secondsSpecHelper(5),"second":secondsSpecHelper(1)};Morris.AUTO_LABEL_ORDER=["decade","year","month","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"];Morris.Area=(function(c){var d;__extends(Area,c);d={fillOpacity:'auto',behaveLikeLine:false};function Area(a){var b;if(!(this instanceof Morris.Area)){return new Morris.Area(a)}b=$.extend({},d,a);this.cumulative=!b.behaveLikeLine;if(b.fillOpacity==='auto'){b.fillOpacity=b.behaveLikeLine?.8:1}Area.__super__.constructor.call(this,b)}Area.prototype.calcPoints=function(){var b,total,y,_i,_len,_ref,_results;_ref=this.data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){b=_ref[_i];b._x=this.transX(b.x);total=0;b._y=(function(){var a,_len1,_ref1,_results1;_ref1=b.y;_results1=[];for(a=0,_len1=_ref1.length;a<_len1;a++){y=_ref1[a];if(this.options.behaveLikeLine){_results1.push(this.transY(y))}else{total+=y||0;_results1.push(this.transY(total))}}return _results1}).call(this);_results.push(b._ymax=Math.max.apply(Math,b._y))}return _results};Area.prototype.drawSeries=function(){var i,range,_i,_j,_k,_len,_ref,_ref1,_results,_results1,_results2;this.seriesPoints=[];if(this.options.behaveLikeLine){range=(function(){_results=[];for(var a=0,_ref=this.options.ykeys.length-1;0<=_ref?a<=_ref:a>=_ref;0<=_ref?a++:a--){_results.push(a)}return _results}).apply(this)}else{range=(function(){_results1=[];for(var a=_ref1=this.options.ykeys.length-1;_ref1<=0?a<=0:a>=0;_ref1<=0?a++:a--){_results1.push(a)}return _results1}).apply(this)}_results2=[];for(_k=0,_len=range.length;_k<_len;_k++){i=range[_k];this._drawFillFor(i);this._drawLineFor(i);_results2.push(this._drawPointFor(i))}return _results2};Area.prototype._drawFillFor=function(a){var b;b=this.paths[a];if(b!==null){b=b+("L"+(this.transX(this.xmax))+","+this.bottom+"L"+(this.transX(this.xmin))+","+this.bottom+"Z");return this.drawFilledPath(b,this.fillForSeries(a))}};Area.prototype.fillForSeries=function(i){var a;a=Raphael.rgb2hsl(this.colorFor(this.data[i],i,'line'));return Raphael.hsl(a.h,this.options.behaveLikeLine?a.s*0.9:a.s*0.75,Math.min(0.98,this.options.behaveLikeLine?a.l*1.2:a.l*1.25))};Area.prototype.drawFilledPath=function(a,b){return this.raphael.path(a).attr('fill',b).attr('fill-opacity',this.options.fillOpacity).attr('stroke-width',0)};return Area})(Morris.Line);Morris.Bar=(function(f){__extends(Bar,f);function Bar(a){this.onHoverOut=__bind(this.onHoverOut,this);this.onHoverMove=__bind(this.onHoverMove,this);this.onGridClick=__bind(this.onGridClick,this);if(!(this instanceof Morris.Bar)){return new Morris.Bar(a)}Bar.__super__.constructor.call(this,$.extend({},a,{parseTime:false}))}Bar.prototype.init=function(){this.cumulative=this.options.stacked;if(this.options.hideHover!=='always'){this.hover=new Morris.Hover({parent:this.el});this.on('hovermove',this.onHoverMove);this.on('hoverout',this.onHoverOut);return this.on('gridclick',this.onGridClick)}};Bar.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:['#0b62a4','#7a92a3','#4da74d','#afd8f8','#edc240','#cb4b4b','#9440ed'],xLabelMargin:50};Bar.prototype.calc=function(){var a;this.calcBars();if(this.options.hideHover===false){return(a=this.hover).update.apply(a,this.hoverContentForRow(this.data.length-1))}};Bar.prototype.calcBars=function(){var b,row,y,_i,_len,_ref,_results;_ref=this.data;_results=[];for(b=_i=0,_len=_ref.length;_i<_len;b=++_i){row=_ref[b];row._x=this.left+this.width*(b+0.5)/this.data.length;_results.push(row._y=(function(){var a,_len1,_ref1,_results1;_ref1=row.y;_results1=[];for(a=0,_len1=_ref1.length;a<_len1;a++){y=_ref1[a];if(y!=null){_results1.push(this.transY(y))}else{_results1.push(null)}}return _results1}).call(this))}return _results};Bar.prototype.draw=function(){if(this.options.axes){this.drawXAxis()}return this.drawSeries()};Bar.prototype.drawXAxis=function(){var i,label,labelBox,margin,offset,prevAngleMargin,prevLabelMargin,row,textBox,ypos,_i,_ref,_results;ypos=this.bottom+this.options.padding/2;prevLabelMargin=null;prevAngleMargin=null;_results=[];for(i=_i=0,_ref=this.data.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){row=this.data[this.data.length-1-i];label=this.drawXAxisLabel(row._x,ypos,row.label);textBox=label.getBBox();label.transform("r"+(-this.options.xLabelAngle));labelBox=label.getBBox();label.transform("t0,"+(labelBox.height/2)+"...");if(this.options.xLabelAngle!==0){offset=-0.5*textBox.width*Math.cos(this.options.xLabelAngle*Math.PI/180.0);label.transform("t"+offset+",0...")}if((!(prevLabelMargin!=null)||prevLabelMargin>=labelBox.x+labelBox.width||(prevAngleMargin!=null)&&prevAngleMargin>=labelBox.x)&&labelBox.x>=0&&(labelBox.x+labelBox.width)<this.el.width()){if(this.options.xLabelAngle!==0){margin=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180.0);prevAngleMargin=labelBox.x-margin}_results.push(prevLabelMargin=labelBox.x-this.options.xLabelMargin)}else{_results.push(label.remove())}}return _results};Bar.prototype.drawSeries=function(){var c,bottom,groupWidth,idx,lastTop,left,leftPadding,numBars,row,sidx,size,top,ypos,zeroPos;groupWidth=this.width/this.options.data.length;numBars=this.options.stacked!=null?1:this.options.ykeys.length;c=(groupWidth*this.options.barSizeRatio-this.options.barGap*(numBars-1))/numBars;leftPadding=groupWidth*(1-this.options.barSizeRatio)/2;zeroPos=this.ymin<=0&&this.ymax>=0?this.transY(0):null;return this.bars=(function(){var b,_len,_ref,_results;_ref=this.data;_results=[];for(idx=b=0,_len=_ref.length;b<_len;idx=++b){row=_ref[idx];lastTop=0;_results.push((function(){var a,_len1,_ref1,_results1;_ref1=row._y;_results1=[];for(sidx=a=0,_len1=_ref1.length;a<_len1;sidx=++a){ypos=_ref1[sidx];if(ypos!==null){if(zeroPos){top=Math.min(ypos,zeroPos);bottom=Math.max(ypos,zeroPos)}else{top=ypos;bottom=this.bottom}left=this.left+idx*groupWidth+leftPadding;if(!this.options.stacked){left+=sidx*(c+this.options.barGap)}size=bottom-top;if(this.options.stacked){top-=lastTop}this.drawBar(left,top,c,size,this.colorFor(row,sidx,'bar'));_results1.push(lastTop+=size)}else{_results1.push(null)}}return _results1}).call(this))}return _results}).call(this)};Bar.prototype.colorFor=function(a,b,c){var r,s;if(typeof this.options.barColors==='function'){r={x:a.x,y:a.y[b],label:a.label};s={index:b,key:this.options.ykeys[b],label:this.options.labels[b]};return this.options.barColors.call(this,r,s,c)}else{return this.options.barColors[b%this.options.barColors.length]}};Bar.prototype.hitTest=function(x,y){if(this.data.length===0){return null}x=Math.max(Math.min(x,this.right),this.left);return Math.min(this.data.length-1,Math.floor((x-this.left)/(this.width/this.data.length)))};Bar.prototype.onGridClick=function(x,y){var a;a=this.hitTest(x,y);return this.fire('click',a,this.options.data[a],x,y)};Bar.prototype.onHoverMove=function(x,y){var a,_ref;a=this.hitTest(x,y);return(_ref=this.hover).update.apply(_ref,this.hoverContentForRow(a))};Bar.prototype.onHoverOut=function(){if(this.options.hideHover!==false){return this.hover.hide()}};Bar.prototype.hoverContentForRow=function(a){var b,j,row,x,y,_i,_len,_ref;row=this.data[a];b="<div class='morris-hover-row-label'>"+row.label+"</div>";_ref=row.y;for(j=_i=0,_len=_ref.length;_i<_len;j=++_i){y=_ref[j];b+="<div class='morris-hover-point' style='color: "+(this.colorFor(row,j,'label'))+"'>\n  "+this.options.labels[j]+":\n  "+(this.yLabelFormat(y))+"\n</div>"}if(typeof this.options.hoverCallback==='function'){b=this.options.hoverCallback(a,this.options,b)}x=this.left+(a+0.5)*this.width/this.data.length;return[b,x]};Bar.prototype.drawXAxisLabel=function(a,b,c){var d;return d=this.raphael.text(a,b,c).attr('font-size',this.options.gridTextSize).attr('font-family',this.options.gridTextFamily).attr('font-weight',this.options.gridTextWeight).attr('fill',this.options.gridTextColor)};Bar.prototype.drawBar=function(a,b,c,d,e){return this.raphael.rect(a,b,c,d).attr('fill',e).attr('stroke-width',0)};return Bar})(Morris.Grid);Morris.Donut=(function(g){__extends(Donut,g);Donut.prototype.defaults={colors:['#0B62A4','#3980B5','#679DC6','#95BBD7','#B0CCE1','#095791','#095085','#083E67','#052C48','#042135'],backgroundColor:'#FFFFFF',labelColor:'#000000',formatter:Morris.commas};function Donut(b){this.select=__bind(this.select,this);this.click=__bind(this.click,this);var c;if(!(this instanceof Morris.Donut)){return new Morris.Donut(b)}if(typeof b.element==='string'){this.el=$(document.getElementById(b.element))}else{this.el=$(b.element)}this.options=$.extend({},this.defaults,b);if(this.el===null||this.el.length===0){throw new Error("Graph placeholder not found.");}if(b.data===void 0||b.data.length===0){return}this.data=b.data;this.values=(function(){var a,_len,_ref,_results;_ref=this.data;_results=[];for(a=0,_len=_ref.length;a<_len;a++){c=_ref[a];_results.push(parseFloat(c.value))}return _results}).call(this);this.redraw()}Donut.prototype.redraw=function(){var C,cx,cy,i,idx,last,max_value,min,next,seg,total,value,w,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results;this.el.empty();this.raphael=new Raphael(this.el[0]);cx=this.el.width()/2;cy=this.el.height()/2;w=(Math.min(cx,cy)-10)/3;total=0;_ref=this.values;for(_i=0,_len=_ref.length;_i<_len;_i++){value=_ref[_i];total+=value}min=5/(2*w);C=1.9999*Math.PI-min*this.data.length;last=0;idx=0;this.segments=[];_ref1=this.values;for(i=_j=0,_len1=_ref1.length;_j<_len1;i=++_j){value=_ref1[i];next=last+min+C*(value/total);seg=new Morris.DonutSegment(cx,cy,w*2,w,last,next,this.options.colors[idx%this.options.colors.length],this.options.backgroundColor,idx,this.raphael);seg.render();this.segments.push(seg);seg.on('hover',this.select);seg.on('click',this.click);last=next;idx+=1}this.text1=this.drawEmptyDonutLabel(cx,cy-10,this.options.labelColor,15,800);this.text2=this.drawEmptyDonutLabel(cx,cy+10,this.options.labelColor,14);max_value=Math.max.apply(null,(function(){var a,_len2,_ref2,_results;_ref2=this.values;_results=[];for(a=0,_len2=_ref2.length;a<_len2;a++){value=_ref2[a];_results.push(value)}return _results}).call(this));idx=0;_ref2=this.values;_results=[];for(_k=0,_len2=_ref2.length;_k<_len2;_k++){value=_ref2[_k];if(value===max_value){this.select(idx);break}_results.push(idx+=1)}return _results};Donut.prototype.click=function(a){return this.fire('click',a,this.data[a])};Donut.prototype.select=function(a){var b,s,segment,_i,_len,_ref;_ref=this.segments;for(_i=0,_len=_ref.length;_i<_len;_i++){s=_ref[_i];s.deselect()}segment=this.segments[a];segment.select();b=this.data[a];return this.setLabels(b.label,this.options.formatter(b.value,b))};Donut.prototype.setLabels=function(a,b){var c,maxHeightBottom,maxHeightTop,maxWidth,text1bbox,text1scale,text2bbox,text2scale;c=(Math.min(this.el.width()/2,this.el.height()/2)-10)*2/3;maxWidth=1.8*c;maxHeightTop=c/2;maxHeightBottom=c/3;this.text1.attr({text:a,transform:''});text1bbox=this.text1.getBBox();text1scale=Math.min(maxWidth/text1bbox.width,maxHeightTop/text1bbox.height);this.text1.attr({transform:"S"+text1scale+","+text1scale+","+(text1bbox.x+text1bbox.width/2)+","+(text1bbox.y+text1bbox.height)});this.text2.attr({text:b,transform:''});text2bbox=this.text2.getBBox();text2scale=Math.min(maxWidth/text2bbox.width,maxHeightBottom/text2bbox.height);return this.text2.attr({transform:"S"+text2scale+","+text2scale+","+(text2bbox.x+text2bbox.width/2)+","+text2bbox.y})};Donut.prototype.drawEmptyDonutLabel=function(a,b,c,d,e){var f;f=this.raphael.text(a,b,'').attr('font-size',d).attr('fill',c);if(e!=null){f.attr('font-weight',e)}return f};return Donut})(Morris.EventEmitter);Morris.DonutSegment=(function(k){__extends(DonutSegment,k);function DonutSegment(a,b,c,d,e,f,g,h,i,j){this.cx=a;this.cy=b;this.inner=c;this.outer=d;this.color=g;this.backgroundColor=h;this.index=i;this.raphael=j;this.deselect=__bind(this.deselect,this);this.select=__bind(this.select,this);this.sin_p0=Math.sin(e);this.cos_p0=Math.cos(e);this.sin_p1=Math.sin(f);this.cos_p1=Math.cos(f);this.is_long=(f-e)>Math.PI?1:0;this.path=this.calcSegment(this.inner+3,this.inner+this.outer-2);this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer);this.hilight=this.calcArc(this.inner)}DonutSegment.prototype.calcArcPoints=function(r){return[this.cx+r*this.sin_p0,this.cy+r*this.cos_p0,this.cx+r*this.sin_p1,this.cy+r*this.cos_p1]};DonutSegment.prototype.calcSegment=function(a,b){var c,ix1,iy0,iy1,ox0,ox1,oy0,oy1,_ref,_ref1;_ref=this.calcArcPoints(a),c=_ref[0],iy0=_ref[1],ix1=_ref[2],iy1=_ref[3];_ref1=this.calcArcPoints(b),ox0=_ref1[0],oy0=_ref1[1],ox1=_ref1[2],oy1=_ref1[3];return("M"+c+","+iy0)+("A"+a+","+a+",0,"+this.is_long+",0,"+ix1+","+iy1)+("L"+ox1+","+oy1)+("A"+b+","+b+",0,"+this.is_long+",1,"+ox0+","+oy0)+"Z"};DonutSegment.prototype.calcArc=function(r){var a,ix1,iy0,iy1,_ref;_ref=this.calcArcPoints(r),a=_ref[0],iy0=_ref[1],ix1=_ref[2],iy1=_ref[3];return("M"+a+","+iy0)+("A"+r+","+r+",0,"+this.is_long+",0,"+ix1+","+iy1)};DonutSegment.prototype.render=function(){var a=this;this.arc=this.drawDonutArc(this.hilight,this.color);return this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return a.fire('hover',a.index)},function(){return a.fire('click',a.index)})};DonutSegment.prototype.drawDonutArc=function(a,b){return this.raphael.path(a).attr({stroke:b,'stroke-width':1,opacity:0.8})};DonutSegment.prototype.drawDonutSegment=function(a,b,c,d,e){return this.raphael.path(a).attr({fill:b,stroke:c,'stroke-width':0,opacity:0.8}).hover(d).click(e)};DonutSegment.prototype.select=function(){if(!this.selected){this.seg.animate({path:this.selectedPath},150,'<>');this.arc.animate({opacity:1},150,'<>');return this.selected=true}};DonutSegment.prototype.deselect=function(){if(this.selected){this.seg.animate({path:this.path},150,'<>');this.arc.animate({opacity:0},150,'<>');return this.selected=false}};return DonutSegment})(Morris.EventEmitter)}).call(this); 
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * SlickGrid v1.4.3
 * © 2009-2010 Michael Leibman (michael.leibman@gmail.com)
 * License: MIT license
 * http://github.com/mleibman/slickgrid
 *
 * TODO:
 * - frozen columns
 * - consistent events (EventHelper?  jQuery events?)
 *
 *
 * OPTIONS:
 *     rowHeight                - (default 25px) Row height in pixels.
 *     enableAddRow             - (default false) If true, a blank row will be displayed at the bottom - typing values in that row will add a new one.
 *     leaveSpaceForNewRows     - (default false)
 *     editable                 - (default false) If false, no cells will be switched into edit mode.
 *     autoEdit                 - (default true) Cell will not automatically go into edit mode when selected.
 *     enableCellNavigation     - (default true) If false, no cells will be selectable.
 *     enableCellRangeSelection - (default false) If true, user will be able to select a cell range.  onCellRangeSelected event will be fired.
 *     defaultColumnWidth       - (default 80px) Default column width in pixels (if columns[cell].width is not specified).
 *     defaultMinWidth          - (default 30px) Default column min-width in pixels (if columns[cell].minWidth is not specified).
 *     enableColumnReorder      - (default true) Allows the user to reorder columns.
 *     asyncEditorLoading       - (default false) Makes cell editors load asynchronously after a small delay.
 *                                This greatly increases keyboard navigation speed.
 *     asyncEditorLoadDelay     - (default 100msec) Delay after which cell editor is loaded. Ignored unless asyncEditorLoading is true.
 *     forceFitColumns          - (default false) Force column sizes to fit into the viewport (avoid horizontal scrolling).
 *     enableAsyncPostRender    - (default false) If true, async post rendering will occur and asyncPostRender delegates on columns will be called.
 *     asyncPostRenderDelay     - (default 60msec) Delay after which async post renderer delegate is called.
 *     autoHeight               - (default false) If true, vertically resizes to fit all rows.
 *     editorLock               - (default Slick.GlobalEditorLock) A Slick.EditorLock instance to use for controlling concurrent data edits.
 *     showSecondaryHeaderRow   - (default false) If true, an extra blank (to be populated externally) row will be displayed just below the header columns.
 *     showTotalsHeader         - (default false) If true, a totals row will be displayed above the viewport.
 *     showTotalsFooter         - (default false) If true, a totals row will be displayed below the viewport.
 *     secondaryHeaderRowHeight - (default 25px) The height of the secondary header row.
 *     syncColumnCellResize     - (default false) Synchronously resize column cells when column headers are resized
 *     rowCssClasses            - (default null) A function which (given a row's data item as an argument) returns a space-delimited string of CSS classes that will be applied to the slick-row element. Note that this should be fast, as it is called every time a row is displayed.
 *     cellHighlightCssClass    - (default "highlighted") A CSS class to apply to cells highlighted via setHighlightedCells().
 *     cellFlashingCssClass     - (default "flashing") A CSS class to apply to flashing cells (flashCell()).
 *     formatterFactory         - (default null) A factory object responsible to creating a formatter for a given cell.
 *                                Must implement getFormatter(column).
 *     editorFactory            - (default null) A factory object responsible to creating an editor for a given cell.
 *                                Must implement getEditor(column).
 *     multiSelect              - (default true) Enable multiple row selection.
 *
 * COLUMN DEFINITION (columns) OPTIONS:
 *     id                  - Column ID.
 *     name                - Column name to put in the header.
 *     toolTip             - Tooltip (if different from name).
 *     field               - Property of the data context to bind to.
 *     formatter           - (default 'return value || ""') Function responsible for rendering the contents of a cell. Signature: function formatter(row, cell, value, columnDef, dataContext) { ... return "..."; }
 *     editor              - An Editor class.
 *     validator           - An extra validation function to be passed to the editor.
 *     unselectable        - If true, the cell cannot be selected (and therefore edited).
 *     cannotTriggerInsert - If true, a new row cannot be created from just the value of this cell.
 *     width               - Width of the column in pixels.
 *     resizable           - (default true) If false, the column cannot be resized.
 *     sortable            - (default false) If true, the column can be sorted (onSort will be called).
 *     minWidth            - Minimum allowed column width for resizing.
 *     maxWidth            - Maximum allowed column width for resizing.
 *     cssClass            - A CSS class to add to the cell.
 *     rerenderOnResize    - Rerender the column when it is resized (useful for columns relying on cell width or adaptive formatters).
 *     asyncPostRender     - Function responsible for manipulating the cell DOM node after it has been rendered (called in the background).
 *     behavior            - Configures the column with one of several available predefined behaviors:  "select", "move", "selectAndMove".
 *     defaultToAscending  - (default true) If false, the column sorting will default to descending.
 *     visible             - (default true) If false, the column will be hidden by default, to be made available in a ColumnPicker or other UI element.
 *
 * EVENTS:
 *     onSort                -
 *     onHeaderContextMenu   -
 *     onHeaderClick         -
 *     onClick               -
 *     onDblClick            -
 *     onContextMenu         -
 *     onKeyDown             -
 *     onAddNewRow           -
 *     onValidationError     -
 *     onViewportChanged     -
 *     onSelectedRowsChanged -
 *     onColumnsReordered    -
 *     onColumnsResized      -
 *     onBeforeMoveRows      -
 *     onMoveRows            -
 *     onCellChange          -  Raised when cell has been edited.   Args: row,cell,dataContext.
 *     onBeforeEditCell      -  Raised before a cell goes into edit mode.  Return false to cancel.  Args: row,cell,dataContext.
 *     onBeforeCellEditorDestroy    - Raised before a cell editor is destroyed.  Args: current cell editor.
 *     onBeforeDestroy       -  Raised just before the grid control is destroyed (part of the destroy() method).
 *     onCurrentCellChanged  -  Raised when the selected (active) cell changed.  Args: {row:currentRow, cell:currentCell}.
 *     onCellRangeSelected   -  Raised when a user selects a range of cells.  Args: {from:{row,cell}, to:{row,cell}}.
 *     onSetAllColumns       -
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 *
 * @param {Node}              container   Container node to create the grid in.
 * @param {Array} or {Object} data        An array of objects for databinding.
 * @param {Array}             columns     An array of column definitions.
 * @param {Object}            options     Grid options.
 */
;if(typeof jQuery==="undefined"){throw new Error("SlickGrid requires jquery module to be loaded");}if(!jQuery.fn.drag){throw new Error("SlickGrid requires jquery.event.drag module to be loaded");}(function($){var bF;function EditorLock(){var b=null;this.isActive=function isActive(a){return(a?b===a:b!==null)};this.activate=function activate(a){if(a===b){return}if(b!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";}if(!a.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";}if(!a.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";}b=a};this.deactivate=function deactivate(a){if(b!==a){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";}b=null};this.commitCurrentEdit=function commitCurrentEdit(){return(b?b.commitCurrentEdit():true)};this.cancelCurrentEdit=function cancelCurrentEdit(){return(b?b.cancelCurrentEdit():true)}}function SlickGrid(p,q,t,u,v){var z={rowHeight:25,defaultColumnWidth:80,defaultMinWidth:30,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableCellRangeSelection:false,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showSecondaryHeaderRow:false,secondaryHeaderRowHeight:25,showTotalsHeader:false,showTotalsFooter:false,totalsScrollSpeed:150,syncColumnCellResize:false,enableAutoTooltips:true,toolTipMaxLength:null,formatterFactory:null,editorFactory:null,cellHighlightCssClass:"highlighted",cellFlashingCssClass:"flashing",multiSelect:true},gridData,gridDataGetLength,gridDataGetItem;var A={name:"",resizable:true,sortable:false,defaultToAscending:true,visible:true};var B;var C;var h;var D;var n;var E;var F=0;var G=0;var H=1;var I;var J="slickgrid_"+Math.round(1000000*Math.random());var K=this;var L;var M;var N;var O;var P;var Q;var R=0;var S;var T;var U;var V;var W;var X;var Y,viewportW;var Z;var bG,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff;var bH;var bI=false;var bJ,currentCell;var bK=null;var bL=null;var bM;var bN;var bO={};var bP=0;var bQ;var bR=0;var bS=0;var bT=0;var bU=0;var bV=10;var bW=[];var bX={};var bY={};var bZ;var ca;var cb=true;var cc=[];var cd=null;var ce=null;var cf=null;var cg={};var ch=null;var cj=null;var ck=0;var cl=0;function init(){I=$(p);gridData=q;gridDataGetLength=gridData.getLength||defaultGetLength;gridDataGetItem=gridData.getItem||defaultGetItem;B=getMaxSupportedCssHeight();bF=bF||measureScrollbar();u=$.extend({},z,u);A.width=u.defaultColumnWidth;A.minWidth=u.defaultMinWidth;for(var i=0;i<t.length;i++){t[i]=$.extend({},A,t[i])}cc=t;if(u.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's \"enableColumnReorder = true\" option requires jquery-ui.sortable module to be loaded");}bN={"commitCurrentEdit":commitCurrentEdit,"cancelCurrentEdit":cancelCurrentEdit};I.empty().attr("tabIndex",0).attr("hideFocus",true).css("overflow","hidden").css("outline",0).addClass(J).addClass("ui-widget");if(!/relative|absolute|fixed/.test(I.css("position")))I.css("position","relative");L=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(I);M=$("<div class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo(L);S=$("<div class='slick-header-secondary ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(I);T=$("<div class='slick-header-columns-secondary' style='width:100000px' />").appendTo(S);if(u.showTotalsHeader){N=$("<div class='slick-totals slick-totals-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(I);O=$("<div class='slick-totals-columns' style='width:100000px' />").appendTo(N)}U=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo(I);V=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo(U);if(u.showTotalsFooter){P=$("<div class='slick-totals slick-totals-footer ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(I);Q=$("<div class='slick-totals-columns' style='width:100000px' />").appendTo(P)}if(!u.showSecondaryHeaderRow){S.hide()}measureCellPaddingAndBorder();resizeViewportHeight();disableSelection(M);U.bind("selectstart.ui",function(a){return $(a.target).is("input,textarea")});removeInvisibleColumns();createColumnHeaders();setupColumnSort();setupDragEvents();createCssRules();resizeAndRender();bindAncestorScrollEvents();U.bind("scroll.slickgrid",handleScroll);I.bind("resize.slickgrid",resizeAndRender);V.bind("keydown.slickgrid",handleKeyDown);V.bind("click.slickgrid",handleClick);V.bind("dblclick.slickgrid",handleDblClick);V.bind("contextmenu.slickgrid",handleContextMenu);V.bind("mouseover.slickgrid",handleHover);L.bind("contextmenu.slickgrid",handleHeaderContextMenu);L.bind("click.slickgrid",handleHeaderClick)}function addSlickLoader(){$('<div class="slick-loader">'+'<div class="slick-loader-text">'+'<b>Loading Data...</b><br/>Please wait'+'</div>'+'</div>').insertAfter(I).css({height:I.height(),top:I.position().top}).find('div.slick-loader-text').css({top:(I.height()/2.5)})}function removeSlickLoader(){$('div.slick-loader').fadeOut(250,function(){$(this).remove()})}function removeInvisibleColumns(){var a=[];for(var i=0;i<t.length;i++){if(t[i].visible==true){a.push(t[i])}}t=a}function measureScrollbar(){var a=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};a.remove();return b}function setCanvasWidth(a){V.width(a);Z=(a>viewportW-bF.width)}function disableSelection(a){if(a&&a.jquery){a.attr('unselectable','on').css('MozUserSelect','none').bind('selectstart.ui',function(){return false})}}function defaultGetLength(){return gridData.length}function defaultGetItem(i){return gridData[i]}function getMaxSupportedCssHeight(){var a=1000000;var b=a;var c=($.browser.mozilla)?5000000:1000000000;var d=$("<div style='display:none' />").appendTo(document.body);while(b<=c){d.css("height",b+a);if(d.height()!==b+a)break;else b+=a}d.remove();return b}function bindAncestorScrollEvents(){var a=V[0];while((a=a.parentNode)!=document.body){if(a==U[0]||a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)$(a).bind("scroll.slickgrid",handleCurrentCellPositionChange)}}function unbindAncestorScrollEvents(){V.parents().unbind("scroll.slickgrid")}function createColumnHeaders(){function hoverBegin(){$(this).addClass("ui-state-hover")}function hoverEnd(){$(this).removeClass("ui-state-hover")}M.empty();bY={};for(var i=0;i<t.length;i++){var m=t[i];bY[m.id]=i;var a=$("<div class='ui-state-default slick-header-column' id='"+J+m.id+"' />").html("<span class='slick-column-name'>"+m.name+"</span>").width((m.currentWidth||m.width)-bG).attr("title",m.toolTip||m.name||"").data("fieldId",m.id).appendTo(M);if(u.enableColumnReorder||m.sortable){a.hover(hoverBegin,hoverEnd)}if(m.sortable){a.append("<span class='slick-sort-indicator' />")}}setTotalHeaders();setTotalHeaderHeight();setSortColumn(ca,cb);setupColumnResize();if(u.enableColumnReorder){setupColumnReorder()}}function setTotalHeaders(){if(O){O.empty()}if(Q){Q.empty()}for(var i=0;i<t.length;i++){var c=t[i];if(v&&(O||Q)){var a=$("<div class='ui-state-default slick-totals-column c"+i+"' />").addClass(c.cssClass||'').html(v[c.field]||(isNumber(v[c.field])?'0':'&nbsp;'));if(O){O.append(a.clone())}if(Q){Q.append(a.clone())}}}}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function setTotalHeaderHeight(){if(R==0){R+=(O)?O.outerHeight():0;R+=(Q)?Q.outerHeight():0}}function showTotals(){if(O){if(O.is(':visible')){return}O.slideDown(u.totalsScrollSpeed)}if(Q){if(Q.is(':visible')){return}Q.slideDown(u.totalsScrollSpeed)}U.animate({height:(U.height()-R)},u.totalsScrollSpeed)}function hideTotals(){if(O){if(O.is(':hidden')){return}O.slideUp(u.totalsScrollSpeed)}if(Q){if(Q.is(':hidden')){return}Q.slideUp(u.totalsScrollSpeed)}U.animate({height:(U.height()+R)},u.totalsScrollSpeed)}function setupColumnSort(){M.click(function(e){if($(e.target).hasClass("slick-resizable-handle")){return}if(K.onSort){var a=$(e.target).closest(".slick-header-column");if(!a.length)return;var b=t[getSiblingIndex(a[0])];if(b.sortable){if(!u.editorLock.commitCurrentEdit())return;if(b.id===ca){cb=!cb}else{ca=b.id;cb=b.defaultToAscending}setSortColumn(ca,cb);K.onSort(b,cb)}}})}function setupColumnReorder(){M.sortable({containment:"parent",axis:"x",cursor:"default",distance:15,tolerance:"pointer",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,a){$(a.helper).addClass("slick-header-column-active")},beforeStop:function(e,a){$(a.helper).removeClass("slick-header-column-active")},stop:function(e,a){if(!u.editorLock.commitCurrentEdit()){$(this).sortable("cancel");return}var b=M.sortable("toArray");var c=[];for(var i=0;i<b.length;i++){c.push(t[getColumnIndex(b[i].replace(J,""))])}mergeReorderedColumns(c,a);setColumns(c);if(K.onColumnsReordered){K.onColumnsReordered()}e.stopPropagation();setupColumnResize()}})}function mergeReorderedColumns(a,b){var c=$('.slick-column-name',b.item).text();var d=-1;var e=null;for(var i=0;i<a.length;i++){if(a[i].name==c){break}d=i}for(var f=0;f<cc.length;f++){if(cc[f].name==c){break}}for(var g=0;g<cc.length;g++){if(d==-1||cc[g].name==a[d].name){e=cc.splice(f,1);if(f>g&&d>=0)g++;cc.splice(g,0,e[0]);break}}}function autofixSize(){var a,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=M.children();for(j=0;j<columnElements.length;j++){c=t[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){removeAllRows()}if(u.forceFitColumns){c.width=Math.floor(c.width*(newWidth-c.previousWidth)/c.previousWidth)+c.width}else{c.width=newWidth}if(!u.syncColumnCellResize&&c.previousWidth!==newWidth){styleColumnWidth(j,newWidth,true)}}resizeCanvas();if(K.onColumnsResized){K.onColumnsResized()}}function setupColumnResize(){var f,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=M.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(t[i].resizable){if(firstResizable===undefined){firstResizable=i}lastResizable=i}});columnElements.each(function(i,e){if((firstResizable!==undefined&&i<firstResizable)||(u.forceFitColumns&&i>=lastResizable)){return}f=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,a){if(!u.editorLock.commitCurrentEdit()){return false}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var b=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){t[i].previousWidth=$(e).outerWidth()});if(u.forceFitColumns){b=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=t[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth}else{stretchLeewayOnRight=null}}b+=c.previousWidth-Math.max(c.minWidth||0,bH)}}}var d=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=t[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth}else{stretchLeewayOnLeft=null}}d+=c.previousWidth-Math.max(c.minWidth||0,bH)}}if(b===null){b=100000}if(d===null){d=100000}if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000}maxPageX=pageX+Math.min(b,stretchLeewayOnLeft);minPageX=pageX-Math.min(d,stretchLeewayOnRight);originalCanvasWidth=V.width()}).bind("drag",function(e,a){var b,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x,ci;if(d<0){x=d;for(j=i;j>=0;j--){c=t[j];if(c.resizable){b=Math.max(c.minWidth||0,bH);if(x&&c.previousWidth+x<b){x+=c.previousWidth-b;styleColumnWidth(j,b,u.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,u.syncColumnCellResize);x=0}}}if(u.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=t[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;styleColumnWidth(j,c.maxWidth,u.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,u.syncColumnCellResize);x=0}}}}else if(u.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}else{x=d;for(j=i;j>=0;j--){c=t[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;styleColumnWidth(j,c.maxWidth,u.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,u.syncColumnCellResize);x=0}}}if(u.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=t[j];if(c.resizable){b=Math.max(c.minWidth||0,bH);if(x&&c.previousWidth+x<b){x+=c.previousWidth-b;styleColumnWidth(j,b,u.syncColumnCellResize)}else{styleColumnWidth(j,c.previousWidth+x,u.syncColumnCellResize);x=0}}}}else if(u.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}).bind("dragend",function(e,a){var b;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=t[j];b=$(columnElements[j]).outerWidth();if(c.previousWidth!==b&&c.rerenderOnResize){removeAllRows()}if(u.forceFitColumns){c.width=Math.floor(c.width*(b-c.previousWidth)/c.previousWidth)+c.width}else{c.width=b}if(!u.syncColumnCellResize&&c.previousWidth!==b){styleColumnWidth(j,b,true)}}resizeCanvas();if(K.onColumnsResized){K.onColumnsResized()}})})}function setupDragEvents(){var h=1;var i=2;function fixUpRange(a){var b=Math.min(a.start.row,a.end.row);var c=Math.min(a.start.cell,a.end.cell);var d=Math.max(a.start.row,a.end.row);var e=Math.max(a.start.cell,a.end.cell);return{start:{row:b,cell:c},end:{row:d,cell:e}}}V.bind("draginit",function(e,a){var b=$(e.target).closest(".slick-cell");if(b.length===0){return false}if(parseInt(b.parent().attr("row"),10)>=gridDataGetLength())return false;var c=t[getSiblingIndex(b[0])];if(c.behavior=="move"||c.behavior=="selectAndMove"){a.mode=h}else if(u.enableCellRangeSelection){a.mode=i}else return false}).bind("dragstart",function(e,a){if(!u.editorLock.commitCurrentEdit()){return false}var b=parseInt($(e.target).closest(".slick-row").attr("row"),10);if(a.mode==h){if(!bX[b]){setSelectedRows([b])}a.selectionProxy=$("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",$(this).innerWidth()).css("height",u.rowHeight*bW.length).appendTo(U);a.guide=$("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",$(this).innerWidth()).css("top",-1000).appendTo(U);a.insertBefore=-1}if(a.mode==i){var c=getCellFromPoint(a.startX-V.offset().left,a.startY-V.offset().top);if(!cellExists(c.row,c.cell))return false;a.range={start:c,end:{}};return $("<div class='slick-selection'></div>").appendTo(V)}}).bind("drag",function(e,a){if(a.mode==h){var b=e.pageY-$(this).offset().top;a.selectionProxy.css("top",b-5);var c=Math.max(0,Math.min(Math.round(b/u.rowHeight),gridDataGetLength()));if(c!==a.insertBefore){if(K.onBeforeMoveRows&&K.onBeforeMoveRows(getSelectedRows(),c)===false){a.guide.css("top",-1000);a.canMove=false}else{a.guide.css("top",c*u.rowHeight);a.canMove=true}a.insertBefore=c}}if(a.mode==i){var d=getCellFromPoint(e.clientX-V.offset().left,e.clientY-V.offset().top);if(!cellExists(d.row,d.cell))return;a.range.end=d;var r=fixUpRange(a.range);var f=getCellNodeBox(r.start.row,r.start.cell);var g=getCellNodeBox(r.end.row,r.end.cell);$(a.proxy).css({top:f.top,left:f.left,height:g.bottom-f.top-2,width:g.right-f.left-2})}}).bind("dragend",function(e,a){if(a.mode==h){a.guide.remove();a.selectionProxy.remove();if(K.onMoveRows&&a.canMove){K.onMoveRows(getSelectedRows(),a.insertBefore)}}if(a.mode==i){$(a.proxy).remove();if(K.onCellRangeSelected)K.onCellRangeSelected(fixUpRange(a.range))}})}function measureCellPaddingAndBorder(){var a=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo(M);bG=a.outerWidth()-a.width();headerColumnHeightDiff=a.outerHeight()-a.height();a.remove();var r=$("<div class='slick-row' />").appendTo(V);a=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=a.outerWidth()-a.width();cellHeightDiff=a.outerHeight()-a.height();r.remove();bH=Math.max(bG,cellWidthDiff)}function createCssRules(){W=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var a=(u.rowHeight-cellHeightDiff);var b=["."+J+" .slick-header-column { left: 10000px; }","."+J+" .slick-header-columns-secondary {  height:"+u.secondaryHeaderRowHeight+"px; }","."+J+" .slick-cell { height:"+a+"px; }"];for(var i=0;i<t.length;i++){b.push("."+J+" .c"+i+" { "+"width:"+((t[i].currentWidth||t[i].width)-cellWidthDiff)+"px; "+" } ")}if(W[0].styleSheet){W[0].styleSheet.cssText=b.join("")}else{W[0].appendChild(document.createTextNode(b.join(" ")))}var c=document.styleSheets;for(var i=0;i<c.length;i++){if((c[i].ownerNode||c[i].owningElement)==W[0]){X=c[i];break}}}function findCssRule(a){var b=(X.cssRules||X.rules);for(var i=0;i<b.length;i++){if(b[i].selectorText==a)return b[i]}return null}function findCssRuleForCell(a){return findCssRule("."+J+" .c"+a)}function removeCssRules(){W.remove()}function destroy(){u.editorLock.cancelCurrentEdit();if(K.onBeforeDestroy)K.onBeforeDestroy();if(u.enableColumnReorder&&M.sortable)M.sortable("destroy");unbindAncestorScrollEvents();I.unbind(".slickgrid");removeCssRules();V.unbind("draginit dragstart dragend drag");I.empty().removeClass(J)}function getUID(){return J}function getEditController(){return bN}function getColumnIndex(a){return bY[a]}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,viewportW=U.innerWidth(),availWidth=(u.autoHeight?viewportW:viewportW-bF.width),total=0,existingTotal=0;for(i=0;i<t.length;i++){c=t[i];widths.push(c.width);existingTotal+=c.width;shrinkLeeway+=c.width-Math.max(c.minWidth||0,bH)}total=existingTotal;removeAllRows();var a=total;while(total>availWidth){if(!shrinkLeeway){break}var b=(total-availWidth)/shrinkLeeway;for(i=0;i<t.length&&total>availWidth;i++){c=t[i];if(!c.resizable||c.minWidth===c.width||c.width===bH){continue}var d=Math.floor(b*(c.width-Math.max(c.minWidth||0,bH)))||1;total-=d;widths[i]-=d}if(a==total){break}a=total}a=total;while(total<availWidth){var e=availWidth/total;for(i=0;i<t.length&&total<availWidth;i++){c=t[i];if(!c.resizable||c.maxWidth<=c.width){continue}var f=Math.min(Math.floor(e*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;total+=f;widths[i]+=f}if(a==total){break}a=total}for(i=0;i<t.length;i++){styleColumnWidth(i,t[i].currentWidth=widths[i],true)}resizeCanvas()}function resizeGrid(){if(calculateTotalMinWidth()>getViewportWidth()){addScrollbarHeightToContainer();u.forceFitColumns=false;setAllColumnsToMinWidth();refreshCanvasWidth()}else if(u.originalForceFitColumns){removeScrollbarHeightFromContainer();u.forceFitColumns=true}if(u.forceFitColumns){autosizeColumns()}}function addScrollbarHeightToContainer(){if(u.autoContainerHeight&&!bI){bI=true;I.height(I.height()+bF.height);resizeCanvas()}}function removeScrollbarHeightFromContainer(){if(u.autoContainerHeight&&bI){bI=false;I.height(I.height()-bF.height);resizeCanvas()}}function styleColumnWidth(a,b,c){t[a].currentWidth=b;M.children().eq(a).css("width",b-bG);if(c){findCssRuleForCell(a).style.width=(b-cellWidthDiff)+"px"}}function setAllColumnsToMinWidth(){for(var i=0;i<t.length;i++){styleColumnWidth(i,t[i].minWidth,true)}}function calculateTotalMinWidth(){var a=0;for(var i=0;i<cc.length;i++){var c=cc[i];if(c.visible===true&&c.minWidth){a+=c.minWidth}}return a}function setSortColumn(a,b){ca=a;cb=b;var c=getColumnIndex(ca);M.children().removeClass("slick-header-column-sorted");M.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");if(c!=null){M.children().eq(c).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(cb?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}function getSelectedRows(){return bW.concat()}function setSelectedRows(a){var i,row;var b={};for(i=0;i<a.length;i++){b[a[i]]=true}for(i=0;i<bW.length;i++){row=bW[i];if(bO[row]&&!b[row]){$(bO[row]).removeClass("ui-state-active selected")}}for(i=0;i<a.length;i++){row=a[i];if(bO[row]&&!bX[row]){$(bO[row]).addClass("ui-state-active selected")}}bW=a.concat();bX=b}function getColumns(){return t}function getAllColumns(){return cc}function setAllColumns(a){cc=a;if(K.onSetAllColumns){K.onSetAllColumns()}}function setColumns(a){t=a;removeAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeAndRender();handleScroll()}function getOptions(){return u}function setOptions(a){if(!u.editorLock.commitCurrentEdit()){return}makeSelectedCellNormal();if(u.enableAddRow!==a.enableAddRow){removeRow(gridDataGetLength())}u=$.extend(u,a);render()}function setData(a,b){removeAllRows();q=a;gridData=q;gridDataGetLength=gridData.getLength||defaultGetLength;gridDataGetItem=gridData.getItem||defaultGetItem;if(b)scrollTo(0)}function getData(){return gridData}function getSecondaryHeaderRow(){return T[0]}function showSecondaryHeaderRow(){u.showSecondaryHeaderRow=true;S.slideDown("fast",resizeCanvas)}function hideSecondaryHeaderRow(){u.showSecondaryHeaderRow=false;S.slideUp("fast",resizeCanvas)}function getTotals(){return v}function setTotals(a){v=a;setTotalHeaders()}function scrollTo(y){var a=G;F=Math.min(n-1,Math.floor(y/D));G=Math.round(F*E);var b=y-G;if(G!=a){var c=getVisibleRange(b);cleanupRows(c.top,c.bottom);updateRowPositions()}if(bR!=b){H=(bR+a<b+G)?1:-1;U[0].scrollTop=(bT=bS=bR=b);if(K.onViewportChanged){K.onViewportChanged()}}}function defaultFormatter(a,b,c,d,e){return(c===null||c===undefined)?"":c}function getFormatter(a){return a.formatter||(u.formatterFactory&&u.formatterFactory.getFormatter(a))||defaultFormatter}function getEditor(a){return a.editor||(u.editorFactory&&u.editorFactory.getEditor(a))}function appendRowHtml(a,b){var d=gridDataGetItem(b);var c=b<gridDataGetLength()&&!d;var e;var f="slick-row "+(c?" loading":"")+(bX[b]?" selected ui-state-active":"")+(b%2==1?' odd':' even');if(u.rowCssClasses){f+=' '+u.rowCssClasses(d)}a.push("<div class='ui-widget-content "+f+"' row='"+b+"' style='top:"+(u.rowHeight*b-G)+"px'>");for(var i=0,cols=t.length;i<cols;i++){var m=t[i];e="slick-cell c"+i+(m.cssClass?" "+m.cssClass:"");if(bZ&&bZ[b]&&bZ[b][m.id])e+=(" "+u.cellHighlightCssClass);a.push("<div class='"+e+"'>");if(d){a.push(getFormatter(m)(b,i,d[m.field],m,d))}a.push("</div>")}a.push("</div>")}function cleanupRows(a){for(var i in bO){if(((i=parseInt(i,10))!==bJ)&&(i<a.top||i>a.bottom)){removeRowFromCache(i)}}}function invalidate(){updateRowCount();removeAllRows();render()}function removeAllRows(){if(bL){makeSelectedCellNormal()}V[0].innerHTML="";bO={};cg={};cl+=bP;bP=0}function removeRowFromCache(a){var b=bO[a];if(!b){return}V[0].removeChild(b);delete bO[a];delete cg[a];bP--;cl++}function removeRows(a){var i,rl,nl;if(!a||!a.length){return}H=0;var b=[];for(i=0,rl=a.length;i<rl;i++){if(bL&&bJ===i){makeSelectedCellNormal()}if(bO[a[i]]){b.push(a[i])}}if(bP>10&&b.length===bP){removeAllRows()}else{for(i=0,nl=b.length;i<nl;i++){removeRowFromCache(b[i])}}}function removeRow(a){removeRows([a])}function updateCell(a,b){if(!bO[a]){return}var c=$(bO[a]).children().eq(b);if(c.length===0){return}var m=t[b],d=gridDataGetItem(a);if(bL&&bJ===a&&currentCell===b){bL.loadValue(d)}else{c[0].innerHTML=d?getFormatter(m)(a,b,d[m.field],m,d):"";invalidatePostProcessingResults(a)}}function updateRow(a){if(!bO[a]){return}$(bO[a]).children().each(function(i){var m=t[i];if(a===bJ&&i===currentCell&&bL){bL.loadValue(gridDataGetItem(bJ))}else if(gridDataGetItem(a)){this.innerHTML=getFormatter(m)(a,i,gridDataGetItem(a)[m.field],m,gridDataGetItem(a))}else{this.innerHTML=""}});invalidatePostProcessingResults(a)}function resizeViewportHeight(){U.height(I.innerHeight()-L.outerHeight()-(u.showSecondaryHeaderRow?S.outerHeight():0)-(N?N.outerHeight():0)-(P?P.outerHeight():0))}function resizeCanvas(){var a=u.rowHeight*(gridDataGetLength()+(u.enableAddRow?1:0)+(u.leaveSpaceForNewRows?bQ-1:0));if(u.autoHeight){U.height(a)}else{resizeViewportHeight()}viewportW=U.innerWidth();Y=U.innerHeight();bQ=Math.ceil(Y/u.rowHeight);refreshCanvasWidth();updateRowCount();render()}function refreshCanvasWidth(){var a=0;M.find(".slick-header-column").each(function(){a+=$(this).outerWidth()});setCanvasWidth(a)}function resizeAndRender(){if(u.forceFitColumns){autosizeColumns()}else{resizeCanvas()}}function updateRowCount(){var a=gridDataGetLength()+(u.enableAddRow?1:0)+(u.leaveSpaceForNewRows?bQ-1:0);var b=h;var l=u.enableAddRow?gridDataGetLength():gridDataGetLength()-1;for(var i in bO){if(i>=l){removeRowFromCache(i)}}C=Math.max(u.rowHeight*a,Y-bF.height);if(C<B){h=D=C;n=1;E=0}else{h=B;D=h/100;n=Math.floor(C/D);E=(C-h)/(n-1)}if(h!==b){V.css("height",h);bS=U[0].scrollTop}var c=(bS+G<=C-Y);if(C==0||bS==0){F=G=0}else if(c){scrollTo(bS+G)}else{scrollTo(C-Y)}if(h!=b&&u.autoHeight){resizeCanvas()}}function getVisibleRange(a){if(a==null)a=bS;return{top:Math.floor((bS+G)/u.rowHeight),bottom:Math.ceil((bS+G+Y)/u.rowHeight)}}function getViewportWidth(){return U.innerWidth()}function getRenderedRange(a){var b=getVisibleRange(a);var c=Math.round(Y/u.rowHeight);var d=3;if(H==-1){b.top-=c;b.bottom+=d}else if(H==1){b.top-=d;b.bottom+=c}else{b.top-=d;b.bottom+=d}b.top=Math.max(0,b.top);b.bottom=Math.min(u.enableAddRow?gridDataGetLength():gridDataGetLength()-1,b.bottom);return b}function renderRows(a){var i,l,parentNode=V[0],rowsBefore=bP,stringArray=[],rows=[],startstartat=new Date(),needToReselectCell=false;for(i=a.top;i<=a.bottom;i++){if(bO[i]){continue}bP++;rows.push(i);appendRowHtml(stringArray,i);if(bK&&bJ===i)needToReselectCell=true;ck++}var x=document.createElement("div");x.innerHTML=stringArray.join("");for(i=0,l=x.childNodes.length;i<l;i++){bO[rows[i]]=parentNode.appendChild(x.firstChild)}if(needToReselectCell){bK=$(bO[bJ]).children().eq(currentCell)[0];setSelectedCell(bK,false)}if(bP-rowsBefore>5){bV=(new Date()-startstartat)/(bP-rowsBefore)}}function startPostProcessing(){if(!u.enableAsyncPostRender){return}clearTimeout(cf);cf=setTimeout(asyncPostProcessRows,u.asyncPostRenderDelay)}function invalidatePostProcessingResults(a){delete cg[a];cj=Math.min(cj,a);ch=Math.max(ch,a);startPostProcessing()}function updateRowPositions(){for(var a in bO){bO[a].style.top=(a*u.rowHeight-G)+"px"}}function render(){var a=getVisibleRange();var b=getRenderedRange();cleanupRows(b);renderRows(b);cj=a.top;ch=Math.min(u.enableAddRow?gridDataGetLength():gridDataGetLength()-1,a.bottom);startPostProcessing();bT=bS;ce=null}function handleScroll(){bS=U[0].scrollTop;var a=U[0].scrollLeft;var b=Math.abs(bS-bR);if(a!==bU){bU=a;L[0].scrollLeft=a;S[0].scrollLeft=a;if(N){N[0].scrollLeft=a}if(P){P[0].scrollLeft=a}}if(!b)return;H=bR<bS?1:-1;bR=bS;if(b<Y){scrollTo(bS+G)}else{var c=G;F=Math.min(n-1,Math.floor(bS*((C-Y)/(h-Y))*(1/D)));G=Math.round(F*E);if(c!=G)removeAllRows()}if(ce)clearTimeout(ce);if(Math.abs(bT-bS)<Y)render();else ce=setTimeout(render,50);if(K.onViewportChanged){K.onViewportChanged()}}function asyncPostProcessRows(){while(cj<=ch){var a=(H>=0)?cj++:ch--;var b=bO[a];if(!b||cg[a]||a>=gridDataGetLength()){continue}var d=gridDataGetItem(a),cellNodes=b.childNodes;for(var i=0,j=0,l=t.length;i<l;++i){var m=t[i];if(m.asyncPostRender){m.asyncPostRender(cellNodes[j],cj,d,m)}++j}cg[a]=true;cf=setTimeout(asyncPostProcessRows,u.asyncPostRenderDelay);return}}function setHighlightedCells(a){var i,$cell,hasHighlight,hadHighlight;for(var b in bO){for(i=0;i<t.length;i++){hadHighlight=bZ&&bZ[b]&&bZ[b][t[i].id];hasHighlight=a&&a[b]&&a[b][t[i].id];if(hadHighlight!=hasHighlight){$cell=$(bO[b]).children().eq(i);if($cell.length){$cell.toggleClass(u.cellHighlightCssClass)}}}}bZ=a}function flashCell(b,c,d){d=d||100;if(bO[b]){var e=$(bO[b]).children().eq(c);function toggleCellClass(a){if(!a)return;setTimeout(function(){e.queue(function(){e.toggleClass(u.cellFlashingCssClass).dequeue();toggleCellClass(a-1)})},d)}toggleCellClass(4)}}function getSiblingIndex(a){var b=0;while(a&&a.previousSibling){b++;a=a.previousSibling}return b}function handleKeyDown(e){var a=(K.onKeyDown&&!u.editorLock.isActive()&&K.onKeyDown(e,bJ,currentCell));if(!a){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!u.editorLock.isActive()){return}cancelEditAndSetFocus()}else if(e.which==37){navigateLeft()}else if(e.which==39){navigateRight()}else if(e.which==38){navigateUp()}else if(e.which==40){navigateDown()}else if(e.which==9){navigateNext()}else if(e.which==13){if(u.editable){if(bL){if(bJ===defaultGetLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(u.editorLock.commitCurrentEdit()){makeSelectedCellEditable()}}}}else return}else if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev()}else return}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}function handleClick(e){var a=$(e.target).closest(".slick-cell",V);if(a.length===0){return}if(bK===a[0]&&bL!==null){return}var b=parseInt(a.parent().attr("row"),10);var d=getSiblingIndex(a[0]);var f=null;var c=t[d];var g=gridDataGetItem(b);if(g&&(c.behavior==="selectAndMove"||c.behavior==="select"||(e.ctrlKey||e.shiftKey))){f=u.editorLock.commitCurrentEdit();if(f){var h=getSelectedRows();var j=$.inArray(b,h);if(!e.ctrlKey&&!e.shiftKey&&!e.metaKey){h=[b]}else if(u.multiSelect){if(j===-1&&(e.ctrlKey||e.metaKey)){h.push(b)}else if(j!==-1&&(e.ctrlKey||e.metaKey)){h=$.grep(h,function(o,i){return(o!==b)})}else if(h.length&&e.shiftKey){var k=h.pop();var l=Math.min(b,k);var m=Math.max(b,k);h=[];for(var i=l;i<=m;i++){if(i!==k){h.push(i)}}h.push(k)}}resetCurrentCell();setSelectedRows(h);if(K.onSelectedRowsChanged){K.onSelectedRowsChanged()}if(!$.browser.msie){V[0].focus()}return false}}if(g&&K.onClick){f=u.editorLock.commitCurrentEdit();if(f){if(K.onClick(e,b,d)){e.stopPropagation();e.preventDefault();return false}}}if(u.enableCellNavigation&&!t[d].unselectable){if(f===true||(f===null&&u.editorLock.commitCurrentEdit())){scrollRowIntoView(b,false);setSelectedCellAndRow(a[0],(b===defaultGetLength())||u.autoEdit)}}}function handleContextMenu(e){var a=$(e.target).closest(".slick-cell",V);if(a.length===0){return}if(bK===a[0]&&bL!==null){return}var b=parseInt(a.parent().attr("row"),10);var c=getSiblingIndex(a[0]);var d=null;if(gridDataGetItem(b)&&K.onContextMenu){d=u.editorLock.commitCurrentEdit();if(d){if(K.onContextMenu(e,b,c)){e.stopPropagation();e.preventDefault();return false}}}}function handleDblClick(e){var a=$(e.target).closest(".slick-cell",V);if(a.length===0){return}if(bK===a[0]&&bL!==null){return}var b=parseInt(a.parent().attr("row"),10);var c=getSiblingIndex(a[0]);var d=null;if(gridDataGetItem(b)&&K.onDblClick){d=u.editorLock.commitCurrentEdit();if(d){if(K.onDblClick(e,b,c)){e.stopPropagation();e.preventDefault();return false}}}if(u.editable){gotoCell(b,c,true)}}function handleHeaderContextMenu(e){if(K.onHeaderContextMenu&&u.editorLock.commitCurrentEdit()){e.preventDefault();var a=$(e.target).closest(".slick-header-column",".slick-header-columns");K.onHeaderContextMenu(e,t[K.getColumnIndex(a.data("fieldId"))])}}function handleHeaderClick(e){var a=$(e.target).closest(".slick-header-column");if(a.length==0){return}var b=t[getSiblingIndex(a[0])];if(K.onHeaderClick&&u.editorLock.commitCurrentEdit()){e.preventDefault();K.onHeaderClick(e,b)}}function handleHover(e){if(!u.enableAutoTooltips)return;var a=$(e.target).closest(".slick-cell",V);if(a.length){if(a.innerWidth()<a[0].scrollWidth){var b=$.trim(a.text());a.attr("title",(u.toolTipMaxLength&&b.length>u.toolTipMaxLength)?b.substr(0,u.toolTipMaxLength-3)+"...":b)}else{a.attr("title","")}}}function cellExists(a,b){return!(a<0||a>=gridDataGetLength()||b<0||b>=t.length)}function getCellFromPoint(x,y){var a=Math.floor((y+G)/u.rowHeight);var b=0;var w=0;for(var i=0;i<t.length&&w<x;i++){w+=t[i].width;b++}return{row:a,cell:b-1}}function getCellFromEvent(e){var a=$(e.target).closest(".slick-cell",V);if(!a.length)return null;return{row:a.parent().attr("row")|0,cell:getSiblingIndex(a[0])}}function getCellNodeBox(a,b){if(!cellExists(a,b))return null;var c=a*u.rowHeight-G;var d=c+u.rowHeight-1;var e=0;for(var i=0;i<b;i++){e+=t[i].width}var f=e+t[b].width;return{top:c,left:e,bottom:d,right:f}}function resetCurrentCell(){setSelectedCell(null,false)}function focusOnCurrentCell(){$(bK).attr("tabIndex",0).attr("hideFocus",true);if($.browser.msie&&parseInt($.browser.version)<8)bK.setActive();else bK.focus();var a=$(bK).position().left,right=a+$(bK).outerWidth(),scrollLeft=U.scrollLeft(),scrollRight=scrollLeft+U.width();if(a<scrollLeft)U.scrollLeft(a);else if(right>scrollRight)U.scrollLeft(Math.min(a,right-U[0].clientWidth))}function setSelectedCell(a,b){if(bK!==null){makeSelectedCellNormal();$(bK).removeClass("selected")}bK=a;if(bK!=null){bJ=parseInt($(bK).parent().attr("row"),10);currentCell=getSiblingIndex(bK);$(bK).addClass("selected");if(u.editable&&b&&isCellPotentiallyEditable(bJ,currentCell)){clearTimeout(cd);if(u.asyncEditorLoading){cd=setTimeout(makeSelectedCellEditable,u.asyncEditorLoadDelay)}else{makeSelectedCellEditable()}}else{focusOnCurrentCell()}if(K.onCurrentCellChanged)K.onCurrentCellChanged(getCurrentCell())}else{bJ=null;currentCell=null}}function setSelectedCellAndRow(a,b){setSelectedCell(a,b);if(a){setSelectedRows([bJ])}else{setSelectedRows([])}if(K.onSelectedRowsChanged){K.onSelectedRowsChanged()}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){var a=window.getSelection();if(a&&a.removeAllRanges){a.removeAllRanges()}}}function isCellPotentiallyEditable(a,b){if(a<gridDataGetLength()&&!gridDataGetItem(a)){return false}if(t[b].cannotTriggerInsert&&a>=gridDataGetLength()){return false}if(!getEditor(t[b])){return false}return true}function makeSelectedCellNormal(){if(!bL){return}if(K.onBeforeCellEditorDestroy){K.onBeforeCellEditorDestroy(bL)}bL.destroy();bL=null;if(bK){$(bK).removeClass("editable invalid");if(gridDataGetItem(bJ)){var a=t[currentCell];bK.innerHTML=getFormatter(a)(bJ,currentCell,gridDataGetItem(bJ)[a.field],a,gridDataGetItem(bJ));invalidatePostProcessingResults(bJ)}}if($.browser.msie){clearTextSelection()}u.editorLock.deactivate(bN)}function makeSelectedCellEditable(){if(!bK){return}if(!u.editable){throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";}clearTimeout(cd);if(!isCellPotentiallyEditable(bJ,currentCell)){return}if(K.onBeforeEditCell&&K.onBeforeEditCell(bJ,currentCell,gridDataGetItem(bJ))===false){focusOnCurrentCell();return}u.editorLock.activate(bN);$(bK).addClass("editable");bK.innerHTML="";var a=t[currentCell];var b=gridDataGetItem(bJ);bL=new(getEditor(a))({grid:K,gridPosition:absBox(I[0]),position:absBox(bK),container:bK,column:a,item:b||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(b)bL.loadValue(b);bM=bL.serializeValue();if(bL.position)handleCurrentCellPositionChange()}function commitEditAndSetFocus(){if(u.editorLock.commitCurrentEdit()){focusOnCurrentCell();if(u.autoEdit){navigateDown()}}}function cancelEditAndSetFocus(){if(u.editorLock.cancelCurrentEdit()){focusOnCurrentCell()}}function absBox(a){var b={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:$(a).outerWidth(),height:$(a).outerHeight(),visible:true};b.bottom=b.top+b.height;b.right=b.left+b.width;var c=a.offsetParent;while((a=a.parentNode)!=document.body){if(b.visible&&a.scrollHeight!=a.offsetHeight&&$(a).css("overflowY")!="visible")b.visible=b.bottom>a.scrollTop&&b.top<a.scrollTop+a.clientHeight;if(b.visible&&a.scrollWidth!=a.offsetWidth&&$(a).css("overflowX")!="visible")b.visible=b.right>a.scrollLeft&&b.left<a.scrollLeft+a.clientWidth;b.left-=a.scrollLeft;b.top-=a.scrollTop;if(a===c){b.left+=a.offsetLeft;b.top+=a.offsetTop;c=a.offsetParent}b.bottom=b.top+b.height;b.right=b.left+b.width}return b}function getCurrentCellPosition(){return absBox(bK)}function getGridPosition(){return absBox(I[0])}function handleCurrentCellPositionChange(){if(!bK)return;var a;if(K.onCurrentCellPositionChanged){a=getCurrentCellPosition();K.onCurrentCellPositionChanged(a)}if(bL){a=a||getCurrentCellPosition();if(bL.show&&bL.hide){if(!a.visible)bL.hide();else bL.show()}if(bL.position)bL.position(a)}}function getCellEditor(){return bL}function getCurrentCell(){if(!bK)return null;else return{row:bJ,cell:currentCell}}function getCurrentCellNode(){return bK}function scrollRowIntoView(a,b){var c=a*u.rowHeight;var d=(a+1)*u.rowHeight-Y+(Z?bF.height:0);if((a+1)*u.rowHeight>bS+Y+G){scrollTo(b?c:d);render()}else if(a*u.rowHeight<bS+G){scrollTo(b?d:c);render()}}function gotoDir(b,c,d){if(!bK||!u.enableCellNavigation){return}if(!u.editorLock.commitCurrentEdit()){return}function selectableCellFilter(){return!t[getSiblingIndex(this)].unselectable}var e=bO[bJ+b];var f=(e&&currentCell+c>=0)?$(e).children().eq(currentCell+c).filter(selectableCellFilter):null;if(f&&!f.length){var g=$(e).children().filter(function(a){return(c>0)?a>currentCell+c:a<currentCell+c}).filter(selectableCellFilter);if(g&&g.length){f=(c>0)?g.eq(0):g.eq(g.length-1)}}if(d&&b===0&&!(e&&f&&f.length)){if(!f||!f.length){e=bO[bJ+b+((c>0)?1:-1)];var g=$(e).children().filter(selectableCellFilter);if(c>0){f=e?g.eq(0):null}else{f=e?g.eq(g.length-1):null}}}if(e&&f&&f.length){var h=parseInt($(e).attr("row"),10);var i=(h==defaultGetLength());scrollRowIntoView(h,!i);setSelectedCellAndRow(f[0],i||u.autoEdit);if(!bL){focusOnCurrentCell()}}else{focusOnCurrentCell()}}function gotoCell(a,b,c){if(a>gridDataGetLength()||a<0||b>=t.length||b<0){return}if(!u.enableCellNavigation||t[b].unselectable){return}if(!u.editorLock.commitCurrentEdit()){return}scrollRowIntoView(a,false);var d=null;if(!t[b].unselectable){d=$(bO[a]).children().eq(b)[0]}setSelectedCellAndRow(d,c||(a===gridDataGetLength())||u.autoEdit);if(!bL){focusOnCurrentCell()}}function navigateUp(){gotoDir(-1,0,false)}function navigateDown(){gotoDir(1,0,false)}function navigateLeft(){gotoDir(0,-1,false)}function navigateRight(){gotoDir(0,1,false)}function navigatePrev(){gotoDir(0,-1,true)}function navigateNext(){gotoDir(0,1,true)}function commitCurrentEdit(){var a=gridDataGetItem(bJ);var b=t[currentCell];if(bL){if(bL.isValueChanged()){var c=bL.validate();if(c.valid){if(bJ<gridDataGetLength()){var d={row:bJ,cell:currentCell,editor:bL,serializedValue:bL.serializeValue(),prevSerializedValue:bM,execute:function(){this.editor.applyValue(a,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(a,this.prevSerializedValue);updateRow(this.row)}};if(u.editCommandHandler){makeSelectedCellNormal();u.editCommandHandler(a,b,d)}else{d.execute();makeSelectedCellNormal()}if(K.onCellChange){K.onCellChange(bJ,currentCell,a)}}else if(K.onAddNewRow){var e={};bL.applyValue(e,bL.serializeValue());makeSelectedCellNormal();K.onAddNewRow(e,b)}return!u.editorLock.isActive()}else{$(bK).addClass("invalid");$(bK).stop(true,true).effect("highlight",{color:"red"},300);if(K.onValidationError){K.onValidationError(bK,c,bJ,currentCell,b)}bL.focus();return false}}makeSelectedCellNormal()}return true}function cancelCurrentEdit(){makeSelectedCellNormal();return true}this.debug=function(){var s="";s+=("\n"+"counter_rows_rendered:  "+ck);s+=("\n"+"counter_rows_removed:  "+cl);s+=("\n"+"renderedRows:  "+bP);s+=("\n"+"numVisibleRows:  "+bQ);s+=("\n"+"maxSupportedCssHeight:  "+B);s+=("\n"+"n(umber of pages):  "+n);s+=("\n"+"(current) page:  "+F);s+=("\n"+"page height (ph):  "+D);s+=("\n"+"scrollDir:  "+H);alert(s)};this.eval=function(a){return eval(a)};init();$.extend(this,{"slickGridVersion":"1.4.3","onSort":null,"onHeaderContextMenu":null,"onClick":null,"onDblClick":null,"onContextMenu":null,"onKeyDown":null,"onAddNewRow":null,"onValidationError":null,"onViewportChanged":null,"onSelectedRowsChanged":null,"onColumnsReordered":null,"onColumnsResized":null,"onBeforeMoveRows":null,"onMoveRows":null,"onCellChange":null,"onBeforeEditCell":null,"onBeforeCellEditorDestroy":null,"onBeforeDestroy":null,"onCurrentCellChanged":null,"onCurrentCellPositionChanged":null,"onCellRangeSelected":null,"onSetAllColumns":null,"getUID":getUID,"setupColumnResize":setupColumnResize,"resizeGrid":resizeGrid,"getColumns":getColumns,"setColumns":setColumns,"getAllColumns":getAllColumns,"setAllColumns":setAllColumns,"getOptions":getOptions,"setOptions":setOptions,"getData":getData,"setData":setData,"destroy":destroy,"getColumnIndex":getColumnIndex,"autosizeColumns":autosizeColumns,"updateCell":updateCell,"updateRow":updateRow,"removeRow":removeRow,"removeRows":removeRows,"removeAllRows":removeAllRows,"addSlickLoader":addSlickLoader,"removeSlickLoader":removeSlickLoader,"getTotals":getTotals,"setTotals":setTotals,"showTotals":showTotals,"hideTotals":hideTotals,"render":render,"invalidate":invalidate,"setHighlightedCells":setHighlightedCells,"flashCell":flashCell,"getViewport":getVisibleRange,"getViewportWidth":getViewportWidth,"resizeCanvas":resizeCanvas,"updateRowCount":updateRowCount,"getCellFromPoint":getCellFromPoint,"getCellFromEvent":getCellFromEvent,"getCurrentCell":getCurrentCell,"getCurrentCellNode":getCurrentCellNode,"resetCurrentCell":resetCurrentCell,"navigatePrev":navigatePrev,"navigateNext":navigateNext,"navigateUp":navigateUp,"navigateDown":navigateDown,"navigateLeft":navigateLeft,"navigateRight":navigateRight,"gotoCell":gotoCell,"editCurrentCell":makeSelectedCellEditable,"getCellEditor":getCellEditor,"scrollRowIntoView":scrollRowIntoView,"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"getSecondaryHeaderRow":getSecondaryHeaderRow,"showSecondaryHeaderRow":showSecondaryHeaderRow,"hideSecondaryHeaderRow":hideSecondaryHeaderRow,"setSortColumn":setSortColumn,"getCurrentCellPosition":getCurrentCellPosition,"getGridPosition":getGridPosition,"getEditController":getEditController})}$.extend(true,window,{Slick:{Grid:SlickGrid,EditorLock:EditorLock,GlobalEditorLock:new EditorLock()}})}(jQuery));
/**
 * Contains basic SlickGrid.
 * @module Column Picker
 * @namespace Slick
 */
 ;(function($){function ColumnPicker(f,g){var h;var j;var k={fadeSpeed:250,showCloseButton:true,showAutoResize:true,showSyncResize:true};function init(){f.onHeaderContextMenu=displayContextMenu;j=f.getUID();g=$.extend({},k,g);h=$("<div class='slick-columnpicker' style='display:none;position:absolute;z-index:20;' />").appendTo(document.body);h.bind("mouseleave",function(e){$(this).fadeOut(g.fadeSpeed)});h.bind("click",updateColumn)};function displayContextMenu(e){e.preventDefault();h.empty();var a=f.getColumns();var b=f.getAllColumns();var c,$input;if(g.showCloseButton){$('<div class="close_columnpicker"></div>').appendTo(h).click(function(){h.fadeOut(g.fadeSpeed)})};for(var i=0;i<b.length;i++){c=$("<div />").appendTo(h);$input=$("<input type='checkbox' />").attr("id",j+"_columnpicker_"+i).data("id",b[i].id).appendTo(c);if(f.getColumnIndex(b[i].id)!=null||b[i].alwaysDisplay){$input.attr("checked","checked")};$("<label for='"+j+"_columnpicker_"+i+"' />").text(b[i].name).appendTo(c);if(b[i].alwaysDisplay){c.hide()}};if(g.showAutoResize||g.showSyncResize){$("<hr/>").appendTo(h)};if(g.showAutoResize){c=$("<div />").appendTo(h);$input=$("<input type='checkbox' id='"+j+"_autoresize' />").appendTo(c);$("<label for='"+j+"_autoresize'>Force Fit Columns</label>").appendTo(c);if(f.getOptions().forceFitColumns){$input.attr("checked","checked")}};if(g.showSyncResize){c=$("<div />").appendTo(h);$input=$("<input type='checkbox' id='"+j+"_syncresize' />").appendTo(c);$("<label for='"+j+"_syncresize'>Synchronous Resizing</label>").appendTo(c);if(f.getOptions().syncColumnCellResize){$input.attr("checked","checked")}};$('div',h).each(function(){if($('input:checked',this).length){$('label',this).addClass('active')};$('input',this).click(function(){$(this).next('label').toggleClass('active')})});var d=((e.pageX+h.outerWidth()+20)>$(window).width())?(e.pageX+h.outerWidth()+20-$(window).width()):15;h.css("top",e.pageY-15).css("left",e.pageX-d).fadeIn(g.fadeSpeed)};function useColumnPreset(a){var b=[];var d=f.getAllColumns();for(var i=0;i<d.length;i++){var c=d[i];if($.inArray(a,c.presets)!==-1||$.inArray('all',c.presets)!==-1||c.alwaysDisplay){d[i].visible=true;b.push(d[i])}else{d[i].visible=false}};f.setAllColumns(d);f.setColumns(b)};function updateColumn(e){if(g.showAutoResize&&e.target.id==(j+'_autoresize')){if(e.target.checked){f.setOptions({forceFitColumns:true});f.autosizeColumns()}else{f.setOptions({forceFitColumns:false})};f.setupColumnResize();return}if(g.showSyncResize&&e.target.id==(j+'_syncresize')){if(e.target.checked){f.setOptions({syncColumnCellResize:true})}else{f.setOptions({syncColumnCellResize:false})};return}if($(e.target).is(":checkbox")){$('div.'+j).prevAll('div.slickgrid-controls:first').find('a.active').removeClass('active');if(!h.find(":checkbox:checked").length){$(e.target).attr("checked","checked");return};var a=[];var b=f.getAllColumns();h.find(":checkbox[id*=columnpicker]").each(function(i,e){if($(this).is(":checked")){b[i].visible=true;a.push(b[i])}else{b[i].visible=false}});f.setAllColumns(b);f.setColumns(a);setTimeout(f.resizeGrid,200)}};init();return{"displayContextMenu":displayContextMenu,"useColumnPreset":useColumnPreset}}$.extend(true,window,{Slick:{Controls:{ColumnPicker:ColumnPicker}}})})(jQuery);
/**
 * Server-side/client-side session handling for SlickGrid.
 * Currently stores column order, sort, and visibility.
 *
 * TODO: store filters and column widths
 *
 * Example client-side usage:
 *     gridSession = new Slick.Session('myTable', columns);
 *
 * Example server-side usage:
 *     gridSession = new Slick.Session('myTable', columns, { loadFrom: '/session/load', saveTo: '/session/save' });
 *
 * Dependencies for client-side handling:
 *   - jquery.cookie-1.0.js
 *   - jquery.json-2.2.min.js
 */
 ;(function($){function Session(d,e,f){var g=null;var h='SlickGridSession';var j;var k=/MSIE (6|7)/i.test(navigator.userAgent);var l={loadFrom:null,saveTo:null};function init(){setOptions();load();if(j&&j[d]){restoreColumns();return}resetSession();storeSession(e)}function setOptions(){f=$.extend({},l,f);if(f.loadFrom&&!f.saveTo){f.saveTo=f.loadFrom}if(f.saveTo&&!f.loadFrom){f.loadFrom=f.saveTo}}function load(){if(f.loadFrom){j=$.ajax({async:false,url:f.loadFrom}).responseText}else{j=$.cookie(h)}j=(j&&!k)?$.parseJSON(j):{}}function save(){if(f.saveTo){$.ajax({data:'json='+$.toJSON(j),type:'POST',url:f.saveTo})}else{$.cookie(h,$.toJSON(j),{expires:365,path:'/'})}}function resetSession(){j={}}function restoreColumns(){if(j[d].length!=e.length){return}var a=[];for(var i in j[d]){var s=j[d][i];for(var c=0;c<e.length;c++){if(s.id==e[c].id){e[c].visible=(s.v)?true:false;if(s.s){e[c].defaultSort=s.s}else if(e[c].defaultSort){delete e[c].defaultSort}a.push(e[c]);break}}}e=a}function storeSession(a){j[d]=[];for(var i=0;i<a.length;i++){j[d].push({id:a[i].id,s:a[i].defaultSort,v:a[i].visible})}}function getColumns(){return e}function setGrid(a){g=a}function saveColumns(){load();var a=g.getAllColumns();storeSession(a);save()}function saveSort(a,b){load();var c=g.getAllColumns();for(var i=0;i<c.length;i++){if(c[i].defaultSort){delete c[i].defaultSort}if(a.id==c[i].id){c[i].defaultSort=(b)?'ascending':'descending'}}storeSession(c);save()}init();return{"setGrid":setGrid,"getColumns":getColumns,"saveColumns":saveColumns,"saveSort":saveSort}}$.extend(true,window,{Slick:{Session:Session}})})(jQuery);
 /**
 * EventHelper.
 * @module Consistent events (EventHelper?  jQuery events?)
 * @namespace Slick
 */
 ;function EventHelper(){this.handlers=[];this.subscribe=function(fn){this.handlers.push(fn)};this.notify=function(args){for(var i=0;i<this.handlers.length;i++){this.handlers[i].call(this,args)}};return this}(function($){function DataView(container,options){var defaults={showColumnPresets:true,hideTotalsOnFilter:true,updateTotalsOnFilter:false};options=$.extend({},defaults,options);var Grid=null;var ColumnPicker=null;var idProperty='id';var items=[];var rows=[];var index={};var totalCount=0;var filters={};var currentFilter=null;var filterTimeout=null;var $container=$(container);var $dom={};var slideToggleSpeed=100;var sortBy=null;var sortAsc=true;var sortAlgorithm=null;var isSorted=false;var ieSort=/MSIE 6/i.test(navigator.userAgent);var sortLib={textualMonthDate:{defaultToAscending:true,regex:/^(January|February|March|April|May|June|July|August|September|October|November|December)(,? [0-9]{4})?$/,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';if(a.length&&!b.length){return(sortAsc)?1:-1}if(!a.length&&b.length){return(sortAsc)?-1:1}a.replace(/[^0-9A-Za-z ]/g,'');if(a.match(/[0-9]{4}/)==null){a=a.concat(' 1, 2010')}else{a=a.replace(/([A-Za-z]+) ([0-9]{4})/,"$1 1, $2")}b.replace(/[^0-9A-Za-z ]/g,'');if(b.match(/[0-9]{4}/)==null){b=a.concat(' 1, 2010')}else{b=b.replace(/([A-Za-z]+) ([0-9]{4})/,"$1 1, $2")}a=new Date(a).getTime();b=new Date(b).getTime();return(sortAsc)?a-b:b-a}},iso8601:{defaultToAscending:true,regex:/^\d{4}\-\d{2}\-\d{2}\s\d{2}:\d{2}:\d{2}\s[\-\+]\d{4}$/,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';if(a.length&&!b.length){return(sortAsc)?1:-1}if(!a.length&&b.length){return(sortAsc)?-1:1}a=new Date(a.replace(/-/g,'/').replace(/\s\//,' -')).getTime();b=new Date(b.replace(/-/g,'/').replace(/\s\//,' -')).getTime();return(sortAsc)?a-b:b-a}},shortDateRange:{defaultToAscending:true,regex:/^\d{2}\/\d{2}\/\d{4} \- \d{2}\/\d{2}\/\d{4}$/,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';if(a.length&&!b.length){return(sortAsc)?1:-1}if(!a.length&&b.length){return(sortAsc)?-1:1}a=a.replace(/ \- .*/,'');b=a.replace(/ \- .*/,'');a=new Date(a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")).getTime();b=new Date(b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")).getTime();return(sortAsc)?a-b:b-a}},shortDate:{defaultToAscending:true,regex:/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';if(a.length&&!b.length){return(sortAsc)?1:-1}if(!a.length&&b.length){return(sortAsc)?-1:1}a=new Date(a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")).getTime();b=new Date(b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")).getTime();return(sortAsc)?a-b:b-a}},isoDate:{defaultToAscending:true,regex:/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';if(a.length&&!b.length){return(sortAsc)?1:-1}if(!a.length&&b.length){return(sortAsc)?-1:1}a=new Date(a.replace(/-/g,'/')).getTime();b=new Date(b.replace(/-/g,'/')).getTime();return(sortAsc)?a-b:b-a}},ratio:{defaultToAscending:false,regex:/^\d+\s?[\/:]\s?\d+$/,suffix:' : 1',cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';a=a.replace('/',':').replace(' ','').split(':');if(a.length!=2){a=0}else{if(a[1]==0){a=Number.MAX_VALUE}else{a=parseFloat(a[0])/parseFloat(a[1])}}b=b.replace('/',':').replace(' ','').split(':');if(b.length!=2){b=0}else{if(b[1]==0){b=Number.MAX_VALUE}else{b=parseFloat(b[0])/parseFloat(b[1])}}return(sortAsc)?a-b:b-a}},time:{defaultToAscending:true,regex:/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/i,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';a=new Date("2000/01/01 "+a).getTime();b=new Date("2000/01/01 "+b).getTime();return(sortAsc)?a-b:b-a}},ipAddress:{defaultToAscending:true,regex:/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';var a2='',b2='',item,i,l;a=a.split('.');b=b.split('.');for(i=0,l=a.length;i<l;i++){item=a[i];a2+=(item.length==2)?'0'+item:item}for(i=0,l=b.length;i<l;i++){item=b[i];b2+=(item.length==2)?'0'+item:item}a=formatFloat(a2);b=formatFloat(b2);return(sortAsc)?a-b:b-a}},currency:{defaultToAscending:false,regex:/^\-?\$/,prefix:'$',cmp:function(a,b){a=(a[sortBy]+'').replace('$','');b=(b[sortBy]+'').replace('$','');a=formatFloat(a);b=formatFloat(b);return(sortAsc)?a-b:b-a}},percent:{defaultToAscending:false,regex:/%$/,suffix:'%',cmp:function(a,b){a=(a[sortBy]+'').replace('%','');b=(b[sortBy]+'').replace('%','');a=formatFloat(a);b=formatFloat(b);return(sortAsc)?a-b:b-a}},number:{defaultToAscending:false,regex:/^[0-9.,+-]+$/,cmp:function(a,b){a=a[sortBy],b=b[sortBy];if(typeof a=='string'){a=(a+'').replace(',','');a=formatFloat(a)}if(typeof b=='string'){b=(b+'').replace(',','');b=formatFloat(b)}return(sortAsc)?a-b:b-a}},text:{defaultToAscending:true,regex:/./,cmp:function(a,b){a=a[sortBy]+'',b=b[sortBy]+'';a=$.trim((a).toLowerCase());b=$.trim((b).toLowerCase());return(sortAsc)?natCaseSort(a,b):natCaseSort(b,a)}}};function natCaseSort(a,b){function chunkify(t){var tz=[],x=0,y=-1,n=0,i,j;while(i=(j=t.charAt(x++)).charCodeAt(0)){var m=(i==46||(i>=48&&i<=57));if(m!==n){tz[++y]="";n=m}tz[y]+=j}return tz}var aa=(a)?chunkify(a.toLowerCase()):[];var bb=(b)?chunkify(b.toLowerCase()):[];for(x=0;aa[x]&&bb[x];x++){if(aa[x]!==bb[x]){var c=Number(aa[x]),d=Number(bb[x]);if(c==aa[x]&&d==bb[x]){return c-d}else return(aa[x]>bb[x])?1:-1}}return aa.length-bb.length}var onRowCountChanged=new EventHelper();var onRowsChanged=new EventHelper();function setGrid(target){Grid=target;onRowCountChanged.subscribe(function(rows){Grid.updateRowCount();if($dom.totalRowCount){updateTotalRowCount(rows)}Grid.render();if(options.updateTotalsOnFilter){calculateTotals()}});onRowsChanged.subscribe(function(rows){Grid.removeRows(rows);Grid.render()})}function setColumnPicker(target){ColumnPicker=target}function setTotalCount(total){totalCount=total}function drawControls(){$dom.filterControls=$('<div class="slickgrid-controls clearfix"></div>').insertBefore($container);$dom.filterFormRow=$('<div class="slickgrid-controls-secondary clearfix"></div>').insertBefore($container).hide();if(ColumnPicker){$dom.columnPickerToggle=$('<a href="#" class="slickgrid-column-picker slickgrid-pseudo-button" style="float:right;">Edit Columns</a>').click(function(e){ColumnPicker.displayContextMenu(e);return false}).appendTo($dom.filterControls);if(options.showColumnPresets){var presets=createColumnPresets();if(presets){$(presets).appendTo($dom.filterControls);$('a.slickgrid-column-preset').click(useColumnPreset);$('a.slickgrid-column-preset:first').addClass('last');$('a.slickgrid-column-preset:last').addClass('active first')}}}$dom.addNewFilter=$('<a href="#" class="add-new-filter slickgrid-pseudo-button">Add Filter</a>').click(function(){if($dom.filterFormRow.css('display')=='none'){createColumnSelector()}else{cancelFilter();delayedRefresh()}toggleFilterFormRow();return false}).appendTo($dom.filterControls);$dom.totalRowCount=$('<span class="total-row-count"></span>').appendTo($dom.filterControls);$dom.loaderTrack=$('<span class="slickgrid-loading-track"></span>').appendTo($dom.filterControls).hide();$dom.loader=$('<span class="slickgrid-loading-bar"></span>').appendTo($dom.loaderTrack)}function setProgressBar(rows){var w=Math.ceil((rows/totalCount)*148);$dom.loader.stop().animate({width:w},800,function(){if(rows>=totalCount){setTimeout(function(){$dom.loader.width(0).parent().hide()},300)}}).parent().css({display:'inline-block'})}function updateTotalRowCount(rows){if(totalCount>0&&rows<totalCount){rows+=' of '+totalCount}$dom.totalRowCount.html('Displaying <b>'+rows+'</b> rows')}function createColumnPresets(){var i,j;var columns=Grid.getAllColumns();var presets=[];for(i=0;i<columns.length;i++){var c=columns[i];c.presets=c.presets||[];c.presets.push('All Columns');if(c.visible&&c.visible!==false){c.presets.push('Default')}for(j=0;j<c.presets.length;j++){var preset=c.presets[j];if(preset!='Default'&&preset!='All Columns'&&preset!='all'){presets=addOnce(preset,presets)}}}presets.push('All Columns');presets.unshift('Default');var output='';for(i=presets.length-1;i>=0;i--){output+='<a href="#" class="slickgrid-column-preset slickgrid-pseudo-button" style="float:right;">'+presets[i]+'</a>'}return output}function useColumnPreset(){var preset=$(this).text();$(this).siblings('a.active').removeClass('active').end().addClass('active');ColumnPicker.useColumnPreset(preset);setTimeout(Grid.resizeGrid,200);return false}function createColumnSelector(){$dom.filterFormRow.empty();$dom.columnSelector=$('<select></select>').appendTo($dom.filterFormRow);$('<option value="">Choose a Column</option>').appendTo($dom.columnSelector);var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){try{if(!currentFilter&&(!columns[i].filter||filters[columns[i].id].v)){continue}var selected=(currentFilter&&columns[i].id==currentFilter)?' selected="selected"':'';$('<option value="'+columns[i].id+'"'+selected+'>'+columns[i].name+'</option>').appendTo($dom.columnSelector)}catch(e){}}$dom.columnSelector.change(function(){if($dom.columnSelector.val()==''){return false}cancelFilter();currentFilter=$dom.columnSelector.val();constructFilter();return false});if(currentFilter){constructFilter()}disableInvalidColumnFilters()}function constructFilter(){var filter=filters[currentFilter];var v={};if($dom.filterForm){$dom.filterForm.remove()}$dom.filterForm=$('<div class="slickgrid-controls-container"></div>').appendTo($dom.filterFormRow);$dom.filter={};if(filter.type=='range'){v.min=(filter.v)?filter.v.min:filter.range.min;v.max=(filter.v)?filter.v.max:filter.range.max;$dom.filter.inputLeft=$('<input type="text" class="slider-left slider-numeric-value" />').val(v.min).keydown(handleUpDownArrows).keyup(updateSliderFromInputs).appendTo($dom.filterForm);$dom.filter.inputRight=$('<input type="text" class="slider-right slider-numeric-value" />').val(v.max).keydown(handleUpDownArrows).keyup(updateSliderFromInputs);$dom.filter.slider=$('<div class="slider-container" />').slider({range:true,min:(filter.range.type=='int')?filter.range.min:filter.range.min*100,max:(filter.range.type=='int')?filter.range.max:filter.range.max*100,values:[(filter.range.type=='int')?v.min:v.min*100,(filter.range.type=='int')?v.max:v.max*100],slide:function(event,ui){var min=ui.values[0],max=ui.values[1];if(filter.min!=min||filter.max!=max){min=(filter.range.type=='int')?min:min/100;max=(filter.range.type=='int')?max:max/100;filters[currentFilter].v={min:min,max:max};delayedRefresh();$dom.filter.inputLeft.val(min);$dom.filter.inputRight.val(max)}}}).appendTo($dom.filterForm);if(!filters[currentFilter].v){filters[currentFilter].v={min:filter.range.min,max:filter.range.max}}$dom.filter.inputRight.appendTo($dom.filterForm);if(filter.suffix){$dom.filter.inputRight.addClass('slickgrid-filter-has-suffix');$dom.filter.inputLeft.addClass('slickgrid-filter-has-suffix');$('<span class="slickgrid-filter-suffix">'+filter.suffix+'</span>').insertAfter($dom.filter.inputRight);$('<span class="slickgrid-filter-suffix">'+filter.suffix+'</span>').insertAfter($dom.filter.inputLeft)}if(filter.prefix){$dom.filter.inputRight.addClass('slickgrid-filter-has-prefix');$dom.filter.inputLeft.addClass('slickgrid-filter-has-prefix');$('<div style="display: inline-block; float: left; position: relative;"><span class="slickgrid-filter-prefix">'+filter.prefix+'</span></div>').insertBefore($dom.filter.inputRight);$('<div style="display: inline-block; float: left; position: relative;"><span class="slickgrid-filter-prefix">'+filter.prefix+'</span></div>').insertBefore($dom.filter.inputLeft)}}else if(filter.type=='text'){v.text=(filter.v&&filter.v.text)?filter.v.text:'';v.type=(filter.v&&filter.v.type)?filter.v.type:'has';$dom.filter.types=$('<select></select>').change(function(){var filter=filters[currentFilter];if($dom.filter.types.val()){filter.v.type=$dom.filter.types.val()}delayedRefresh()}).appendTo($dom.filterForm);var types=[{value:'has',title:'Contains'},{value:'not',title:"Doesn't Contain"}];for(var i=0;i<types.length;i++){var type=types[i];var selected=(type.value==v.type)?' selected="selected"':'';$('<option value="'+type.value+'"'+selected+'>'+type.title+'</option>').appendTo($dom.filter.types)}$dom.filter.textInput=$('<input type="text" class="slickgrid-filter-text-value" />').val(v.text).keyup(function(e){if(e.keyCode==13){applyFilter();return false}var filter=filters[currentFilter];filter.v.text=$(this).val().toLowerCase();delayedRefresh()}).appendTo($dom.filterForm);if(!filters[currentFilter].v){filters[currentFilter].v={text:'',type:'has'}}}$dom.applyFilterButton=$('<a class="apply-filter slickgrid-pseudo-button" href="#">Apply</a>').click(applyFilter).appendTo($dom.filterForm);$dom.cancelFilterButton=$('<a class="cancel-filter slickgrid-pseudo-button" href="#">Remove</a>').click(function(){cancelFilter();toggleFilterFormRow();delayedRefresh();return false}).appendTo($dom.filterForm)}function updateSliderFromInputs(e){if(e.keyCode==13){applyFilter();return false}var id=($(this).hasClass('slider-left'))?'left':'right';var filter=filters[currentFilter];var v=$(this).val();if(v=='')return;var v2=constrain(v,filter.range.min,filter.range.max);if(v!=v2){v=v2;$(this).val(v)}updateSlider(id,v)}function handleUpDownArrows(e){var key=e.keyCode,up=(key==38),down=(key==40);if((up||down)&&!(e.shiftKey||e.altKey||e.ctrlKey)){var id=($(this).hasClass('slider-left'))?'left':'right';var filter=filters[currentFilter];var v=$(this).val();if(up){v=constrain(Math.floor(v)+1,filter.range.min,filter.range.max)}else{v=constrain(Math.ceil(v)-1,filter.range.min,filter.range.max)}$(this).val(v);updateSlider(id,v);return e.preventDefault()}return true}function updateSlider(id,v){var v2;if(id=='right'){v2=formatFloat($dom.filter.inputLeft.val());if(v<v2)$dom.filter.inputLeft.val(v);updateSliderMinMax(v2,v)}else{v2=formatFloat($dom.filter.inputRight.val());if(v>v2)$dom.filter.inputRight.val(v);updateSliderMinMax(v,v2)}delayedRefresh()}function updateSliderMinMax(min,max){var filter=filters[currentFilter];$dom.filter.slider.slider('values',0,(filter.range.type=='int')?min:min*100);$dom.filter.slider.slider('values',1,(filter.range.type=='int')?max:max*100);filters[currentFilter].v={min:min,max:max}}function cancelFilter(){if(currentFilter){deleteFilter(currentFilter)}currentFilter=null;return false}function deleteFilter(id){filters[id].v=null;$($dom.filterControls[0]).find('div.filter_'+id).remove();delayedRefresh()}function applyFilter(){toggleFilterFormRow();saveFilter(currentFilter);currentFilter=null;return false}function saveFilter(id){var filter=filters[id];var v=filter.v;var info='';var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(columns[i].id==id){info='<b>'+columns[i].name+':</b> ';break}}if(filter.type=='range'){if(v.min==filter.range.min&&v.max==filter.range.max){deleteFilter(id);return false}if(v.min==v.max){info+=filter.prefix+v.min+filter.suffix}else if(v.min>filter.range.min&&v.max<filter.range.max){info+='between '+filter.prefix+v.min+filter.suffix+' and '+filter.prefix+v.max+filter.suffix}else if(v.min>filter.range.min){info+=filter.prefix+v.min+filter.suffix+' or higher'}else if(v.max<filter.range.max){info+=filter.prefix+v.max+filter.suffix+' or lower'}}else if(filter.type=='text'){if(v.text==''){deleteFilter(id);return false}if(v.type=='has'){info+=' contains "'+v.text+'"'}else if(v.type=='not'){info+=' doesn\'t contain "'+v.text+'"'}}$($dom.filterControls[0]).find('div.filter_'+id).remove();var ui=$('<div><a href="#">'+info+'</a><span id="slick_remove_filter_'+id+'"></span></div>');ui.addClass('active-filter filter_'+id);$('span',ui).click(function(){deleteFilter(id);return false});$('a',ui).click(function(){currentFilter=id;if($dom.filterFormRow.css('display')=='none'){toggleFilterFormRow()}createColumnSelector();$($dom.filterControls[0]).find('div.filter_'+id).remove();return false});ui.insertBefore($dom.totalRowCount)}function applyDefaultFilters(){if(options.defaultFilters){for(var defaultFilter in options.defaultFilters){var filter=filters[defaultFilter];var defaults={};var v=options.defaultFilters[defaultFilter];if(filter.type=='range'){defaults={min:filter.range.min,max:filter.range.max}}else{defaults={type:'has',text:''};v.text=(v2.text+'').toLowerCase()}filters[defaultFilter].v=$.extend({},defaults,v);saveFilter(defaultFilter)}delayedRefresh()}}function delayedRefresh(){window.clearTimeout(filterTimeout);filterTimeout=window.setTimeout(refresh,10)}function toggleFilterFormRow(){$dom.filterFormRow.slideToggle(slideToggleSpeed)}function refreshIndex(){var id;index={};for(var i=0;i<items.length;i++){id=items[i][idProperty];if(id==undefined||index[id]!=undefined){throw"Each data element must implement a unique 'id' property";}index[id]=i}}function refreshFilterRanges(){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(!columns[i].filter){continue}var column=columns[i].field;filters[column]=filters[column]||{};filters[column].type=columns[i].filter;if(filters[column].type=='range'){filters[column].range=findColumnRange(column)}else{filters[column].range=null}}}function findColumnRange(column){var range={};range.type='int';for(var i=0;i<items.length;i++){var x=items[i][column];x=formatFloat(x);if(/\./.test(x)){range.type='float'}range.min=(range.min==undefined||x<range.min)?x:range.min;range.max=(range.max==undefined||x>range.max)?x:range.max}return range}function disableInvalidColumnFilters(){var columns=Grid.getAllColumns();var $options=$('option',$dom.columnSelector).removeAttr('disabled');for(var i=0;i<columns.length;i++){var column=columns[i].field;if(!filters[column]||!filters[column].range){continue}if(filters[column].range.min==filters[column].range.max){$options.eq(i+1).attr('disabled',true)}}}function setItems(data,objectIdProperty){if(objectIdProperty!==undefined)idProperty=objectIdProperty;if(!items&&!data)return;items=data;refreshIndex();refreshFilterRanges();refresh();detectSort();if(!isSorted){defaultSort()}else{doLastSort()}}function getItems(){return items}function getItemByIndex(i){return items[i]}function getItemById(id){return items[index[id]]}function getIndexById(id){return index[id]}function updateItem(id,item){if(index[id]===undefined||id!==item[idProperty])throw"Invalid or non-matching id";items[index[id]]=item;refresh()}function updateCell(id,col,val){items[index[id]][col]=val;refresh()}function filter(item){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(!columns[i].filter){continue}var column=columns[i].id;if(!filters[column].v){continue}var x=item[column];var v=filters[column].v;switch(columns[i].filter){case'range':x=formatFloat(x);if(x<v.min||x>v.max){return false}break;case'text':x=(x+'').toLowerCase();if(v.type==='has'&&v.text!==''&&x.indexOf(v.text)===-1){return false}else if(v.type==='not'&&v.text!==''&&x.indexOf(v.text)!==-1){return false}break}}return true}function formatFloat(n){if(typeof n!=='number'){n=(n)?parseFloat(n.replace(/[^0-9\.](\:[0-9 ]*)?/g,'')):0}return(isNaN(n))?0:n}function constrain(n,min,max){if(typeof n!=='number'){n=(n)?parseFloat(n):min}if(isNaN(n))return min;if(n<min)return min;if(n>max)return max;return n}function calculateTotals(){var columns=Grid.getAllColumns();var totals=Grid.getTotals();var total,column,row,formula,rowLength;for(var c=0;c<columns.length;c++){column=columns[c];formula=column.total||'sum';if(column.sortType!='ratio'&&column.sortType!='currency'&&column.sortType!='number'&&column.sortType!='percent'){continue}total=0;rowLength=0;for(var i=0,z=rows.length;i<z;i++){row=rows[i][column.id];if(row=='')row='0';if(column.sortType=='ratio'){row=row.replace(' ','').split(':')[0]}total+=formatFloat(row);rowLength++}if(formula=='average'||column.sortType=='ratio')total=formatFloat(total/rowLength);if(column.sortType=='ratio')total=Math.round(total);if((total+'').indexOf('.')!==-1)total=total.toFixed(2);totals[column.id]=column.prefix+addCommas(total)+column.suffix}Grid.setTotals(totals)}function isFilteredView(){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(!columns[i].filter)continue;var column=columns[i].id;if(filters[column].v){return true}}return false}function setTotalsVisibility(){if(options.hideTotalsOnFilter){if(isFilteredView()){Grid.hideTotals()}else{Grid.showTotals()}}}function recalc(_items,_rows){var diff=[];var items=_items,rows=_rows;var rowLength=rows.length,currentRow=0,item,id;for(var i=0,z=items.length;i<z;i++){item=items[i];if(filter(item)){id=item[idProperty];if(currentRow>=rowLength||id!=rows[currentRow][idProperty]){diff.push(currentRow);rows[currentRow]=item}currentRow++}}if(rowLength>currentRow){rows.splice(currentRow,rowLength-currentRow)}return diff}function refresh(){setTotalsVisibility();var countBefore=rows.length;var diff=recalc(items,rows);if(diff.length)onRowsChanged.notify(diff);if(countBefore!=rows.length)onRowCountChanged.notify(rows.length)}function detectSort(){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){(function(){var f=columns[i].field;for(var item=0;item<items.length;item++){if(item>1000){break}var cell=items[item][f]+'';if(!cell.length||cell==' '){continue}for(var sort in sortLib){if(cell.match(sortLib[sort].regex)){setSortType(i,sort);return}}}setSortType(i,'text')})()}setPrefixSuffix()}function setPrefixSuffix(){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(!columns[i].filter){continue}var column=columns[i].id;filters[column].suffix=(columns[i].suffix||'');filters[column].prefix=(columns[i].prefix||'')}}function setSortType(column,mySort){var columns=Grid.getAllColumns();if(columns[column].forceSortType&&sortLib[columns[column].forceSortType]){mySort=columns[column].forceSortType}columns[column].sortFunction=sortLib[mySort].cmp;columns[column].sortType=mySort;columns[column].prefix=(sortLib[mySort].prefix||'');columns[column].suffix=(sortLib[mySort].suffix||'');columns[column].defaultToAscending=sortLib[mySort].defaultToAscending}function onSort(column,ascending){isSorted=true;sortBy=column.field;sortAsc=ascending;sortAlgorithm=(column.sortFunction)?column.sortFunction:sortLib.text.cmp;if(ieSort){fastSort(column.field,sortAsc)}else{items.sort(sortAlgorithm)}refreshIndex();refresh()}function fastSort(field,ascending){var oldToString=Object.prototype.toString;Object.prototype.toString=(typeof field=='function')?field:function(){return this[field]};if(ascending===false)items.reverse();items.sort();Object.prototype.toString=oldToString;if(ascending===false)items.reverse()}function defaultSort(){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(!columns[i].defaultSort){continue}var sortAsc=(columns[i].defaultSort=='ascending');Grid.setSortColumn(columns[i].id,sortAsc);onSort(columns[i],sortAsc)}}function doLastSort(){if(sortBy){var columns=Grid.getAllColumns();for(var i=0;i<columns.length;i++){if(sortBy==columns[i].field){return onSort(columns[i],sortAsc)}}}}function addCommas(n){n=(n+'').split('.');var n1=n[0];var n2=n.length>1?'.'+n[1]:'';var regex=/(\d+)(\d{3})/;while(regex.test(n1)){n1=n1.replace(regex,'$1'+','+'$2')}return n1+n2}function addOnce(v,a){if($.inArray(v,a)===-1){a.push(v)}return a}return{"rows":rows,"filters":filters,"setGrid":setGrid,"setColumnPicker":setColumnPicker,"drawControls":drawControls,"updateTotalRowCount":updateTotalRowCount,"setTotalCount":setTotalCount,"setProgressBar":setProgressBar,"setItems":setItems,"getItems":getItems,"getItemByIndex":getItemByIndex,"getIndexById":getIndexById,"getItemById":getItemById,"updateItem":updateItem,"updateCell":updateCell,"calculateTotals":calculateTotals,"refresh":refresh,"onSort":onSort,"applyDefaultFilters":applyDefaultFilters,"onRowCountChanged":onRowCountChanged,"onRowsChanged":onRowsChanged}}$.extend(true,window,{Slick:{Data:{DataView:DataView}}})})(jQuery);
 /**
 * Contains basic SlickGrid formatters.
 * @module Slick Filter (A simple observer pattern implementation.)
 * @namespace Slick
 */
 ;(function(e){function t(e,t,n,r,a){var b='';var c='';var d=a.fail+a.pass;if(d){if(a.fail<=0){c='<span class="percent-complete-bar tooltip" title="Pass: '+a.pass+'/'+d+' - 100%" style="background:green;width:100%"></span>'}else if(a.pass<=0){c='<span class="percent-complete-bar tooltip" title="Fail: '+a.fail+'/'+d+' - 100%" style="background:red;width:100%"></span>'}else{var f=percentage(a.total,a.fail);var g=100-f;b='<span class="percent-complete-bar-fail tooltip" title="Fail: '+a.fail+'/'+d+' - '+f+'%" style="background:red;width:'+(((f>0&&(f<1)))?Math.ceil(f):f)+'%"></span>';c='<span class="percent-complete-bar-pass tooltip" title="Pass: '+a.pass+'/'+d+' - '+g+'%" style="background:green;width:'+(((g>0&&(g<1)))?Math.ceil(g):Math.floor(g))+'%"></span>'}}else{c='&nbsp;'}return c+b}function n(e,t,n,r,i){if(n==null||n===""){return"-"}else if(n<50){return"<span style='color:red;font-weight:bold;'>"+n+"%</span>"}else{return"<span style='color:green'>"+n+"%</span>"}}function r(e,t,n,r,i){if(n==null||n===""){return""}var s;if(n<30){s="red"}else if(n<70){s="silver"}else{s="green"}return"<span class='percent-complete-bar' style='background:"+s+";width:"+n+"%'></span>"}function i(e,t,n,r,i){return n?"Yes":"No"}function s(e,t,n,r,i){return n?"<img src='../images/tick.png'>":""}e.extend(true,window,{Slick:{Formatters:{PercentComplete:n,PercentCompleteBar:r,passFailBar:t,YesNo:i,Checkmark:s}}})})(jQuery)
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * Snippet :: jQuery Syntax Highlighter v2.0.0
 * License: MIT license
 * © 2011, SteamDev
 * http://steamdev.com/snippet
 * http://www.opensource.org/licenses/mit-license.php
 * Date: Wed Jan 19, 2011
 */
;
(function($){window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){console.log(Array.prototype.slice.call(arguments))}};$.fn.snippet=function(E,F){if(typeof E=="object"){F=E}if(typeof E=="string"){E=E.toLowerCase()}var G={style:"random",showNum:true,transparent:false,collapse:false,menu:true,showMsg:"Expand Code",hideMsg:"Collapse Code",clipboard:"",startCollapsed:true,startText:false,box:"",boxColor:"",boxFill:""};var H=["acid","berries-dark","berries-light","bipolar","blacknblue","bright","contrast","darkblue","darkness","desert","dull","easter","emacs","golden","greenlcd","ide-anjuta","ide-codewarrior","ide-devcpp","ide-eclipse","ide-kdev","ide-msvcpp","kwrite","matlab","navy","nedit","neon","night","pablo","peachpuff","print","rand01","the","typical","vampire","vim","vim-dark","whatis","whitengrey","zellner"];if(F){$.extend(G,F)}return this.each(function(){var c=G.style.toLowerCase();if(G.style=="random"){var d=Math.floor(Math.random()*(H.length));c=H[d]}var o=$(this);var e=this.nodeName.toLowerCase();if(e=="pre"){if(o.data('orgHtml')==undefined||o.data('orgHtml')==null){var f=o.html();o.data('orgHtml',f)}if(!o.parent().hasClass("snippet-wrap")){if(typeof E!="string"){if(o.attr('class').length>0){var g=" class=\""+o.attr('class')+"\""}else{var g=""}if(o.attr('id').length>0){var h=" id=\""+o.attr('id')+"\""}else{var h=""}var j="Snippet Error: You must specify a language on inital usage of Snippet. Reference <pre"+g+h+">";console.log(j);return false}o.addClass("sh_"+E).addClass("snippet-formatted").wrap("<div class='snippet-container' style='"+o.attr('style')+";'><div class='sh_"+c+" snippet-wrap'></div></div>");o.removeAttr('style');sh_highlightDocument();if(G.showNum){var k=o.html();k=k.replace(/\n/g,"</li><li>");k="<ol class='snippet-num'><li>"+k+"</li></ol>";while(k.indexOf("<li></li></ol>")!=-1){k=k.replace("<li></li></ol>","</ol>")}}else{var k=o.html();k=k.replace(/\n/g,"</li><li>");k="<ul class='snippet-no-num'><li>"+k+"</li></ul>";while(k.indexOf("<li></li></ul>")!=-1){k=k.replace("<li></li></ul>","</ul>")}}k=k.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");o.html(k);while(o.find("li").eq(0).html()==""){o.find("li").eq(0).remove()}o.find("li").each(function(){if($(this).html().length<2){var a=($(this).html()).replace(/\s/g,"");if(a==""){if($.browser.opera){$(this).html("&nbsp;")}else{$(this).html("<span style='display:none;'>&nbsp;</span>")}}}});var l="<pre class='snippet-textonly sh_sourceCode' style='display:none;'>"+o.data('orgHtml')+"</pre>";var m="<div class='snippet-menu sh_sourceCode' style='display:none;'><pre><a class='snippet-copy' href='#'>copy</a><a class='snippet-text' href='#'>text</a><a class='snippet-window' href='#'>pop-up</a></pre></div>";o.parent().append(l);o.parent().prepend(m);o.parent().hover(function(){$(this).find('.snippet-menu').fadeIn("fast")},function(){$(this).find('.snippet-menu').fadeOut("fast")});if(G.clipboard!=""&&G.clipboard!=false){var n=o.parent().find('a.snippet-copy');n.show();n.parents('.snippet-menu').show();var p=o.parents('.snippet-wrap').find('.snippet-textonly').text();ZeroClipboard.setMoviePath(G.clipboard);var q=new ZeroClipboard.Client();q.setText(p);q.glue(n[0],n.parents('.snippet-menu')[0]);q.addEventListener('complete',function(a,b){if(b.length>500){b=b.substr(0,500)+"...\n\n("+(b.length-500)+" characters not shown)"}alert("Copied text to clipboard:\n\n "+b)});n.parents('.snippet-menu').hide()}else{o.parent().find('a.snippet-copy').hide()}o.parent().find("a.snippet-text").click(function(){var a=$(this).parents('.snippet-wrap').find('.snippet-formatted');var b=$(this).parents('.snippet-wrap').find('.snippet-textonly');a.toggle();b.toggle();if(b.is(':visible')){$(this).html("html")}else{$(this).html("text")}$(this).blur();return false});o.parent().find("a.snippet-window").click(function(){var a=$(this).parents('.snippet-wrap').find('.snippet-textonly').html();snippetPopup(a);$(this).blur();return false});if(!G.menu){o.prev('.snippet-menu').find('pre,.snippet-clipboard').hide()}if(G.collapse){var r=o.parent().attr('class');var s="<div class='snippet-reveal "+r+"'><pre class='sh_sourceCode'><a href='#' class='snippet-toggle'>"+G.showMsg+"</a></pre></div>";var t="<div class='sh_sourceCode snippet-hide'><pre><a href='#' class='snippet-revealed snippet-toggle'>"+G.hideMsg+"</a></pre></div>";o.parents('.snippet-container').append(s);o.parent().append(t);var u=o.parents('.snippet-container');if(G.startCollapsed){u.find('.snippet-reveal').show();u.find('.snippet-wrap').eq(0).hide()}else{u.find('.snippet-reveal').hide();u.find('.snippet-wrap').eq(0).show()}u.find('a.snippet-toggle').click(function(){u.find('.snippet-wrap').toggle();return false})}if(G.transparent){var v={"background-color":"transparent","box-shadow":"none","-moz-box-shadow":"none","-webkit-box-shadow":"none"};o.css(v);o.next(".snippet-textonly").css(v);o.parents('.snippet-container').find('.snippet-reveal pre').css(v)}if(G.startText){o.hide();o.next(".snippet-textonly").show();o.parent().find(".snippet-text").html("html")}if(G.box!=""){var w="<span class='box-sp'>&nbsp;</span>";var y=G.box.split(',');for(var i=0;i<y.length;i++){var z=y[i];if(z.indexOf('-')==-1){z=parseFloat(z)-1;o.find("li").eq(z).addClass('box').prepend(w)}else{var A=parseFloat(z.split('-')[0])-1;var B=parseFloat(z.split('-')[1])-1;if(A<B){o.find("li").eq(A).addClass('box box-top').prepend(w);o.find("li").eq(B).addClass('box box-bot').prepend(w);for(var x=A+1;x<B;x++){o.find("li").eq(x).addClass('box box-mid').prepend(w)}}else if(A==B){o.find("li").eq(A).addClass('box').prepend(w)}}}if(G.boxColor!=""){o.find("li.box").css('border-color',G.boxColor)}if(G.boxFill!=""){o.find("li.box, li.box-top, li.box-mid, li.box-bot").addClass('box-bg').css('background-color',G.boxFill)}if($.browser.webkit){o.find(".snippet-num li.box").css('margin-left','-3.3em');o.find(".snippet-num li .box-sp").css('width','21px')}}o.parents('.snippet-container').find("a").addClass("sh_url")}else{o.parent().attr("class","sh_"+c+" snippet-wrap");o.parents('.snippet-container').find('.snippet-reveal').attr("class","sh_"+c+" snippet-wrap snippet-reveal");o.find("li.box, li.box-top, li.box-mid, li.box-bot").removeAttr('style').removeAttr('class');o.find("li .box-sp").remove();if(G.transparent){var v={"background-color":"transparent","box-shadow":"none","-moz-box-shadow":"none","-webkit-box-shadow":"none"};o.css(v);o.next(".snippet-textonly").css(v);o.parents('.snippet-container').find('.snippet-hide pre').css(v)}else{var v={"background-color":"","box-shadow":"","-moz-box-shadow":"","-webkit-box-shadow":""};o.css(v);o.next(".snippet-textonly").css(v);o.parents('.snippet-container').find('.snippet-reveal pre').css(v)}if(G.showNum){var C=o.find("li").eq(0).parent();if(C.hasClass("snippet-no-num")){C.wrap("<ol class='snippet-num'></ol>");var D=o.find("li").eq(0);D.unwrap()}}else{var C=o.find("li").eq(0).parent();if(C.hasClass("snippet-num")){C.wrap("<ul class='snippet-no-num'></ul>");var D=o.find("li").eq(0);D.unwrap()}}if(G.box!=""){var w="<span class='box-sp'>&nbsp;</span>";var y=G.box.split(',');for(var i=0;i<y.length;i++){var z=y[i];if(z.indexOf('-')==-1){z=parseFloat(z)-1;o.find("li").eq(z).addClass('box').prepend(w)}else{var A=parseFloat(z.split('-')[0])-1;var B=parseFloat(z.split('-')[1])-1;if(A<B){o.find("li").eq(A).addClass('box box-top').prepend(w);o.find("li").eq(B).addClass('box box-bot').prepend(w);for(var x=A+1;x<B;x++){o.find("li").eq(x).addClass('box box-mid').prepend(w)}}else if(A==B){o.find("li").eq(A).addClass('box').prepend(w)}}}if(G.boxColor!=""){o.find("li.box").css('border-color',G.boxColor)}if(G.boxFill!=""){o.find("li.box").addClass('box-bg').css('background-color',G.boxFill)}if($.browser.webkit){o.find(".snippet-num li.box").css('margin-left','-3.3em');o.find(".snippet-num li .box-sp").css('width','21px')}}sh_highlightDocument();if(!G.menu){o.prev('.snippet-menu').find('pre,.snippet-clipboard').hide()}else{o.prev('.snippet-menu').find('pre,.snippet-clipboard').show()}}}else{var j="Snippet Error: Sorry, Snippet only formats '<pre>' elements. '<"+e+">' elements are currently unsupported.";console.log(j);return false}})}})(jQuery);function snippetPopup(a){top.consoleRef=window.open('','myconsole','width=600,height=300'+',left=50,top=50'+',menubar=0'+',toolbar=0'+',location=0'+',status=0'+',scrollbars=1'+',resizable=1');top.consoleRef.document.writeln('<html><head><title>Snippet :: Code View :: '+location.href+'</title></head>'+'<body bgcolor=white onLoad="self.focus()">'+'<pre>'+a+'</pre>'+'</body></html>');top.consoleRef.document.close()};var ZeroClipboard={version:"1.0.7",clients:{},moviePath:'ZeroClipboard.swf',nextId:1,$:function(d){if(typeof(d)=='string')d=document.getElementById(d);if(!d.addClass){d.hide=function(){this.style.display='none'};d.show=function(){this.style.display=''};d.addClass=function(a){this.removeClass(a);this.className+=' '+a};d.removeClass=function(a){var b=this.className.split(/\s+/);var c=-1;for(var k=0;k<b.length;k++){if(b[k]==a){c=k;k=b.length}}if(c>-1){b.splice(c,1);this.className=b.join(' ')}return this};d.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}}return d},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){var d=this.clients[a];if(d){d.receiveEvent(b,c)}},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a,b){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};while(a&&(a!=b)){c.left+=a.offsetLeft;c.top+=a.offsetTop;a=a.offsetParent}return c},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId='ZeroClipboardMovie_'+this.id;ZeroClipboard.register(this.id,this);if(a)this.glue(a)}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:'',handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(a,b,c){this.domElement=ZeroClipboard.$(a);var d=99;if(this.domElement.style.zIndex){d=parseInt(this.domElement.style.zIndex,10)+1}if(typeof(b)=='string'){b=ZeroClipboard.$(b)}else if(typeof(b)=='undefined'){b=document.getElementsByTagName('body')[0]}var e=ZeroClipboard.getDOMObjectPosition(this.domElement,b);this.div=document.createElement('div');this.div.className="snippet-clipboard";var f=this.div.style;f.position='absolute';f.left=''+e.left+'px';f.top=''+e.top+'px';f.width=''+e.width+'px';f.height=''+e.height+'px';f.zIndex=d;if(typeof(c)=='object'){for(addedStyle in c){f[addedStyle]=c[addedStyle]}}b.appendChild(this.div);this.div.innerHTML=this.getHTML(e.width,e.height)},getHTML:function(a,b){var c='';var d='id='+this.id+'&width='+a+'&height='+b;if(navigator.userAgent.match(/MSIE/)){var e=location.href.match(/^https/i)?'https://':'http://';c+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>'}else{c+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />'}return c},hide:function(){if(this.div){this.div.style.left='-2000px'}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML='';var a=document.getElementsByTagName('body')[0];try{a.removeChild(this.div)}catch(e){}this.domElement=null;this.div=null}},reposition:function(a){if(a){this.domElement=ZeroClipboard.$(a);if(!this.domElement)this.hide()}if(this.domElement&&this.div){var b=ZeroClipboard.getDOMObjectPosition(this.domElement);var c=this.div.style;c.left=''+b.left+'px';c.top=''+b.top+'px'}},setText:function(a){this.clipText=a;if(this.ready){this.movie.setText(a)}},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,'');if(!this.handlers[a]){this.handlers[a]=[]}this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;if(this.ready){this.movie.setHandCursor(a)}},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,'');switch(a){case'load':this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent('load',null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;setTimeout(function(){c.receiveEvent('load',null)},100);this.ready=true;return}this.ready=true;try{this.movie.setText(this.clipText)}catch(e){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(e){}break;case'mouseover':if(this.domElement&&this.cssEffects){this.domElement.addClass('hover');if(this.recoverActive){this.domElement.addClass('active')}}break;case'mouseout':if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass('active')){this.domElement.removeClass('active');this.recoverActive=true}this.domElement.removeClass('hover')}break;case'mousedown':if(this.domElement&&this.cssEffects){this.domElement.addClass('active')}break;case'mouseup':if(this.domElement&&this.cssEffects){this.domElement.removeClass('active');this.recoverActive=false}break}if(this.handlers[a]){for(var d=0,len=this.handlers[a].length;d<len;d++){var f=this.handlers[a][d];if(typeof(f)=='function'){f(this,b)}else if((typeof(f)=='object')&&(f.length==2)){f[0][f[1]](this,b)}else if(typeof(f)=='string'){window[f](this,b)}}}}};if(!this.sh_languages){this.sh_languages={}}var sh_requests={};function sh_isEmailAddress(a){if(/^mailto:/.test(a)){return false}return a.indexOf("@")!==-1}function sh_setHref(b,c,d){var a=d.substring(b[c-2].pos,b[c-1].pos);if(a.length>=2&&a.charAt(0)==="<"&&a.charAt(a.length-1)===">"){a=a.substr(1,a.length-2)}if(sh_isEmailAddress(a)){a="mailto:"+a}b[c-2].node.href=a}function sh_konquerorExec(b){var a=[""];a.index=b.length;a.input=b;return a}function sh_highlightString(B,o){if(/Konqueror/.test(navigator.userAgent)){if(!o.konquered){for(var F=0;F<o.length;F++){for(var H=0;H<o[F].length;H++){var G=o[F][H][0];if(G.source==="$"){G.exec=sh_konquerorExec}}}o.konquered=true}}var N=document.createElement("a");var q=document.createElement("span");var A=[];var j=0;var n=[];var C=0;var k=null;var x=function(i,a){var p=i.length;if(p===0){return}if(!a){var Q=n.length;if(Q!==0){var r=n[Q-1];if(!r[3]){a=r[1]}}}if(k!==a){if(k){A[j++]={pos:C};if(k==="sh_url"){sh_setHref(A,j,B)}}if(a){var P;if(a==="sh_url"){P=N.cloneNode(false)}else{P=q.cloneNode(false)}P.className=a;A[j++]={node:P,pos:C}}}C+=p;k=a};var t=/\r\n|\r|\n/g;t.lastIndex=0;var d=B.length;while(C<d){var v=C;var l;var w;var h=t.exec(B);if(h===null){l=d;w=d}else{l=h.index;w=t.lastIndex}var g=B.substring(v,l);var M=[];for(;;){var I=C-v;var D;var y=n.length;if(y===0){D=0}else{D=n[y-1][2]}var O=o[D];var z=O.length;var m=M[D];if(!m){m=M[D]=[]}var E=null;var u=-1;for(var K=0;K<z;K++){var f;if(K<m.length&&(m[K]===null||I<=m[K].index)){f=m[K]}else{var c=O[K][0];c.lastIndex=I;f=c.exec(g);m[K]=f}if(f!==null&&(E===null||f.index<E.index)){E=f;u=K;if(f.index===I){break}}}if(E===null){x(g.substring(I),null);break}else{if(E.index>I){x(g.substring(I,E.index),null)}var e=O[u];var J=e[1];var b;if(J instanceof Array){for(var L=0;L<J.length;L++){b=E[L+1];x(b,J[L])}}else{b=E[0];x(b,J)}switch(e[2]){case-1:break;case-2:n.pop();break;case-3:n.length=0;break;default:n.push(e);break}}}if(k){A[j++]={pos:C};if(k==="sh_url"){sh_setHref(A,j,B)}k=null}C=w}return A}function sh_getClasses(d){var a=[];var b=d.className;if(b&&b.length>0){var e=b.split(" ");for(var c=0;c<e.length;c++){if(e[c].length>0){a.push(e[c])}}}return a}function sh_addClass(c,a){var d=sh_getClasses(c);for(var b=0;b<d.length;b++){if(a.toLowerCase()===d[b].toLowerCase()){return}}d.push(a);c.className=d.join(" ")}function sh_extractTagsFromNodeList(c,a){var f=c.length;for(var d=0;d<f;d++){var e=c.item(d);switch(e.nodeType){case 1:if(e.nodeName.toLowerCase()==="br"){var b;if(/MSIE/.test(navigator.userAgent)){b="\r"}else{b="\n"}a.text.push(b);a.pos++}else{a.tags.push({node:e.cloneNode(false),pos:a.pos});sh_extractTagsFromNodeList(e.childNodes,a);a.tags.push({pos:a.pos})}break;case 3:case 4:a.text.push(e.data);a.pos+=e.length;break}}}function sh_extractTags(c,b){var a={};a.text=[];a.tags=b;a.pos=0;sh_extractTagsFromNodeList(c.childNodes,a);return a.text.join("")}function sh_mergeTags(d,f){var a=d.length;if(a===0){return f}var c=f.length;if(c===0){return d}var i=[];var e=0;var b=0;while(e<a&&b<c){var h=d[e];var g=f[b];if(h.pos<=g.pos){i.push(h);e++}else{i.push(g);if(f[b+1].pos<=h.pos){b++;i.push(f[b]);b++}else{i.push({pos:h.pos});f[b]={node:g.node.cloneNode(false),pos:h.pos}}}}while(e<a){i.push(d[e]);e++}while(b<c){i.push(f[b]);b++}return i}function sh_insertTags(k,h){var g=document;var l=document.createDocumentFragment();var e=0;var d=k.length;var b=0;var j=h.length;var c=l;while(b<j||e<d){var i;var a;if(e<d){i=k[e];a=i.pos}else{a=j}if(a<=b){if(i.node){var f=i.node;c.appendChild(f);c=f}else{c=c.parentNode}e++}else{c.appendChild(g.createTextNode(h.substring(b,a)));b=a}}return l}function sh_highlightElement(d,g){sh_addClass(d,"sh_sourceCode");var c=[];var e=sh_extractTags(d,c);var f=sh_highlightString(e,g);var b=sh_mergeTags(c,f);var a=sh_insertTags(b,e);while(d.hasChildNodes()){d.removeChild(d.firstChild)}d.appendChild(a)}function sh_getXMLHttpRequest(){if(window.ActiveXObject){return new ActiveXObject("Msxml2.XMLHTTP")}else{if(window.XMLHttpRequest){return new XMLHttpRequest()}}throw"No XMLHttpRequest implementation available"}function sh_load(b,c,d,e){if(b in sh_requests){sh_requests[b].push(c);return}sh_requests[b]=[c];var f=sh_getXMLHttpRequest();var g=d+"sh_"+b+e;f.open("GET",g,true);f.onreadystatechange=function(){if(f.readyState===4){try{if(!f.status||f.status===200){eval(f.responseText);var a=sh_requests[b];for(var i=0;i<a.length;i++){sh_highlightElement(a[i],sh_languages[b])}}else{throw"HTTP error: status "+f.status}}finally{f=null}}};f.send(null)}function sh_highlightDocument(a,b){var c=document.getElementsByTagName('pre');for(var i=0;i<c.length;i++){var d=c.item(i);var e=d.className.toLowerCase();var f=e.replace(/sh_sourcecode/g,'');if(f.indexOf("sh_")!=-1){f=f.match(/(\bsh_)\w+\b/g)[0]}if(e.indexOf('sh_sourcecode')!=-1){continue}if(f.substr(0,3)==='sh_'){var g=f.substring(3);if(g in sh_languages){sh_highlightElement(d,sh_languages[g])}else if(typeof(a)==='string'&&typeof(b)==='string'){sh_load(g,d,a,b)}else{console.log('Found <pre> element with class="'+f+'", but no such language exists');continue}break}}}if(!this.sh_languages){this.sh_languages={}}sh_languages.java=[[[/\b(?:import|package|ventyx|mincom)\b/g,"sh_preproc",-1],[/\/\/\//g,"sh_comment",1],[/\/\//g,"sh_comment",7],[/\/\*\*/g,"sh_comment",8],[/\/\*/g,"sh_comment",9],[/\b[+-]?(?:(?:0x[A-Fa-f0-9]+)|(?:(?:[\d]*\.)?[\d]+(?:[eE][+-]?[\d]+)?))u?(?:(?:int(?:8|16|32|64))|L)?\b/g,"sh_number",-1],[/"/g,"sh_string",10],[/'/g,"sh_string",11],[/(\b(?:class|interface))([ \t]+)([$A-Za-z0-9_]+)/g,["sh_keyword","sh_normal","sh_classname"],-1],[/\b(?:abstract|assert|break|case|catch|class|const|continue|default|do|else|extends|false|final|finally|for|goto|if|implements|instanceof|interface|native|new|null|private|protected|public|return|static|strictfp|super|switch|synchronized|throw|throws|true|this|transient|try|volatile|while)\b/g,"sh_keyword",-1],[/\b(?:int|byte|boolean|char|long|float|double|short|void)\b/g,"sh_type",-1],[/~|!|%|\^|\*|\(|\)|-|\+|=|\[|\]|\\|:|;|,|\.|\/|\?|&|<|>|\|/g,"sh_symbol",-1],[/\{|\}/g,"sh_cbracket",-1],[/(?:[A-Za-z]|_)[A-Za-z0-9_]*(?=[ \t]*\()/g,"sh_function",-1],[/([A-Za-z](?:[^`~!@#$%&*()_=+{}|;:",<.>\/?'\\[\]\^\-\s]|[_])*)((?:<.*>)?)(\s+(?=[*&]*[A-Za-z][^`~!@#$%&*()_=+{}|;:",<.>\/?'\\[\]\^\-\s]*\s*[`~!@#$%&*()_=+{}|;:",<.>\/?'\\[\]\^\-\[\]]+))/g,["sh_usertype","sh_usertype","sh_normal"],-1]],[[/$/g,null,-2],[/(?:<?)[A-Za-z0-9_\.\/\-_~]+@[A-Za-z0-9_\.\/\-_~]+(?:>?)|(?:<?)[A-Za-z0-9_]+:\/\/[A-Za-z0-9_\.\/\-_~]+(?:>?)/g,"sh_url",-1],[/<\?xml/g,"sh_preproc",2,1],[/<!DOCTYPE/g,"sh_preproc",4,1],[/<!--/g,"sh_comment",5],[/<(?:\/)?[A-Za-z](?:[A-Za-z0-9_:.-]*)(?:\/)?>/g,"sh_keyword",-1],[/<(?:\/)?[A-Za-z](?:[A-Za-z0-9_:.-]*)/g,"sh_keyword",6,1],[/&(?:[A-Za-z0-9]+);/g,"sh_preproc",-1],[/<(?:\/)?[A-Za-z][A-Za-z0-9]*(?:\/)?>/g,"sh_keyword",-1],[/<(?:\/)?[A-Za-z][A-Za-z0-9]*/g,"sh_keyword",6,1],[/@[A-Za-z]+/g,"sh_type",-1],[/(?:TODO|FIXME|BUG)(?:[:]?)/g,"sh_todo",-1]],[[/\?>/g,"sh_preproc",-2],[/([^=" \t>]+)([ \t]*)(=?)/g,["sh_type","sh_normal","sh_symbol"],-1],[/"/g,"sh_string",3]],[[/\\(?:\\|")/g,null,-1],[/"/g,"sh_string",-2]],[[/>/g,"sh_preproc",-2],[/([^=" \t>]+)([ \t]*)(=?)/g,["sh_type","sh_normal","sh_symbol"],-1],[/"/g,"sh_string",3]],[[/-->/g,"sh_comment",-2],[/<!--/g,"sh_comment",5]],[[/(?:\/)?>/g,"sh_keyword",-2],[/([^=" \t>]+)([ \t]*)(=?)/g,["sh_type","sh_normal","sh_symbol"],-1],[/"/g,"sh_string",3]],[[/$/g,null,-2]],[[/\*\//g,"sh_comment",-2],[/(?:<?)[A-Za-z0-9_\.\/\-_~]+@[A-Za-z0-9_\.\/\-_~]+(?:>?)|(?:<?)[A-Za-z0-9_]+:\/\/[A-Za-z0-9_\.\/\-_~]+(?:>?)/g,"sh_url",-1],[/<\?xml/g,"sh_preproc",2,1],[/<!DOCTYPE/g,"sh_preproc",4,1],[/<!--/g,"sh_comment",5],[/<(?:\/)?[A-Za-z](?:[A-Za-z0-9_:.-]*)(?:\/)?>/g,"sh_keyword",-1],[/<(?:\/)?[A-Za-z](?:[A-Za-z0-9_:.-]*)/g,"sh_keyword",6,1],[/&(?:[A-Za-z0-9]+);/g,"sh_preproc",-1],[/<(?:\/)?[A-Za-z][A-Za-z0-9]*(?:\/)?>/g,"sh_keyword",-1],[/<(?:\/)?[A-Za-z][A-Za-z0-9]*/g,"sh_keyword",6,1],[/@[A-Za-z]+/g,"sh_type",-1],[/(?:TODO|FIXME|BUG)(?:[:]?)/g,"sh_todo",-1]],[[/\*\//g,"sh_comment",-2],[/(?:<?)[A-Za-z0-9_\.\/\-_~]+@[A-Za-z0-9_\.\/\-_~]+(?:>?)|(?:<?)[A-Za-z0-9_]+:\/\/[A-Za-z0-9_\.\/\-_~]+(?:>?)/g,"sh_url",-1],[/(?:TODO|FIXME|BUG)(?:[:]?)/g,"sh_todo",-1]],[[/"/g,"sh_string",-2],[/\\./g,"sh_specialchar",-1]],[[/'/g,"sh_string",-2],[/\\./g,"sh_specialchar",-1]]];if(!this.sh_languages){this.sh_languages={}}if(!this.sh_languages){this.sh_languages={}}sh_languages.enc=[[[/<\?xml/g,"sh_preproc",1,1],[/<!DOCTYPE/g,"sh_preproc",3,1],[/<!--/g,"sh_comment",4],[/[(?:\/)?[A-Za-z](?:[A-Za-z0-9_:.-]*)(?:\/)?\]/g,"sh_keyword",-1],[/<(?:\/)?[A-Za-z](?:[A-Za-z0-9_:.-]*)/g,"sh_keyword",5,1],[/&(?:[A-Za-z0-9]+);/g,"sh_preproc",-1]],[[/\?>/g,"sh_preproc",-2],[/([^=" \t>]+)([ \t]*)(=?)/g,["sh_type","sh_normal","sh_symbol"],-1],[/"/g,"sh_string",2]],[[/\\(?:\\|")/g,null,-1],[/"/g,"sh_string",-2]],[[/>/g,"sh_preproc",-2],[/([^=" \t>]+)([ \t]*)(=?)/g,["sh_type","sh_normal","sh_symbol"],-1],[/"/g,"sh_string",2]],[[/-->/g,"sh_comment",-2],[/<!--/g,"sh_comment",4]],[[/(?:\/)?>/g,"sh_keyword",-2],[/([^=" \t>]+)([ \t]*)(=?)/g,["sh_type","sh_normal","sh_symbol"],-1],[/"/g,"sh_string",2]]];
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * Toastr v2.0.1
 * License: MIT license
 * © 2012 John Papa and Hans FjÃÂ¤llemark.  
 * https://github.com/CodeSeven/toastr
 * 
 * Use, reproduction, distribution, and modification of this code is subject to the terms and 
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 */
;(function(k){k(['jquery'],function($){return(function(){var e='2.0.1';var f;var g;var h=0;var i={error:'error',info:'info',success:'success',warning:'warning'};var j={clear:clear,error:error,getContainer:getContainer,info:info,options:{},subscribe:subscribe,success:success,version:e,warning:warning};return j;function error(a,b,c){return notify({type:i.error,iconClass:getOptions().iconClasses.error,message:a,optionsOverride:c,title:b})}function info(a,b,c){return notify({type:i.info,iconClass:getOptions().iconClasses.info,message:a,optionsOverride:c,title:b})}function subscribe(a){g=a}function success(a,b,c){return notify({type:i.success,iconClass:getOptions().iconClasses.success,message:a,optionsOverride:c,title:b})}function warning(a,b,c){return notify({type:i.warning,iconClass:getOptions().iconClasses.warning,message:a,optionsOverride:c,title:b})}function clear(a){var b=getOptions();if(!f){getContainer(b)}if(a&&$(':focus',a).length===0){a[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){removeToast(a)}});return}if(f.children().length){f[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){f.remove()}})}}function getDefaults(){return{tapToDismiss:true,toastClass:'toast',containerId:'toast-container',debug:false,showMethod:'fadeIn',showDuration:300,showEasing:'swing',onShown:undefined,hideMethod:'fadeOut',hideDuration:1000,hideEasing:'swing',onHidden:undefined,extendedTimeOut:1000,iconClasses:{error:'toast-error',info:'toast-info',success:'toast-success',warning:'toast-warning'},iconClass:'toast-info',positionClass:'toast-top-right',timeOut:5000,titleClass:'toast-title',messageClass:'toast-message',target:'body',closeHtml:'<button>&times;</button>',newestOnTop:true}}function publish(a){if(!g){return}g(a)}function notify(b){var c=getOptions(),iconClass=b.iconClass||c.iconClass;if(typeof(b.optionsOverride)!=='undefined'){c=$.extend(c,b.optionsOverride);iconClass=b.optionsOverride.iconClass||iconClass}h++;f=getContainer(c);var d=null,$toastElement=$('<div/>'),$titleElement=$('<div/>'),$iconElement=$('<div class="ui-toast-icon"><span class="ui-icon"></span></div>');$messageElement=$('<div/>'),$closeElement=$(c.closeHtml),response={toastId:h,state:'visible',startTime:new Date(),options:c,map:b};$toastElement.append($iconElement);if(b.iconClass){$toastElement.addClass(c.toastClass).addClass(iconClass)}if(b.title){$titleElement.append(b.title).addClass(c.titleClass);$toastElement.append($titleElement)}if(c.width){$toastElement.css({'width':c.width})}if(b.message){$messageElement.append(b.message).addClass(c.messageClass);$toastElement.append($messageElement)}if(c.closeButton){$closeElement.addClass('toast-close-button');$toastElement.prepend($closeElement)}$toastElement.hide();if(c.newestOnTop){f.prepend($toastElement)}else{f.append($toastElement)}$toastElement[c.showMethod]({duration:c.showDuration,easing:c.showEasing,complete:c.onShown});if(c.timeOut>0){d=setTimeout(hideToast,c.timeOut)}$toastElement.hover(stickAround,delayedhideToast);if(!c.onclick&&c.tapToDismiss){$toastElement.click(hideToast)}if(c.closeButton&&$closeElement){$closeElement.click(function(a){if(a.stopPropagation){a.stopPropagation()}else if(a.cancelBubble!==undefined&&a.cancelBubble!==true){a.cancelBubble=true}hideToast(true)})}if(c.onclick){$toastElement.click(function(){c.onclick();hideToast()})}publish(response);if(c.debug&&console){console.log(response)}return $toastElement;function hideToast(a){if($(':focus',$toastElement).length&&!a){return}return $toastElement[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){removeToast($toastElement);if(c.onHidden){c.onHidden()}response.state='hidden';response.endTime=new Date(),publish(response)}})}function delayedhideToast(){if(c.timeOut>0||c.extendedTimeOut>0){d=setTimeout(hideToast,c.extendedTimeOut)}}function stickAround(){clearTimeout(d);$toastElement.stop(true,true)[c.showMethod]({duration:c.showDuration,easing:c.showEasing})}}function getContainer(a){if(!a){a=getOptions()}f=$('#'+a.containerId);if(f.length){return f}f=$('<div/>').attr('id',a.containerId).addClass(a.positionClass);f.appendTo($(a.target));return f}function getOptions(){return $.extend({},getDefaults(),j.options)}function removeToast(a){if(!f){f=getContainer()}if(a.is(':visible')){return}a.remove();a=null;if(f.children().length===0){f.remove()}}})()})}(typeof define==='function'&&define.amd?define:function(a,b){if(typeof module!=='undefined'&&module.exports){module.exports=b(require('jquery'))}else{window['toastr']=b(window['jQuery'])}}));
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * Date Format 1.2.3 
 * License: MIT license
 * © 2007-2009 Steven Levithan <stevenlevithan.com>
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */
var dateFormat=function(){var g=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(a,b){a=String(a);b=b||2;while(a.length<b)a="0"+a;return a};return function(b,c,e){var f=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(b)=="[object String]"&&!/\d/.test(b)){c=b;b=undefined}b=b?new Date(b):new Date;if(isNaN(b))throw SyntaxError("invalid date");c=String(f.masks[c]||c||f.masks["default"]);if(c.slice(0,4)=="UTC:"){c=c.slice(4);e=true}var _=e?"getUTC":"get",d=b[_+"Date"](),D=b[_+"Day"](),m=b[_+"Month"](),y=b[_+"FullYear"](),H=b[_+"Hours"](),M=b[_+"Minutes"](),s=b[_+"Seconds"](),L=b[_+"Milliseconds"](),o=e?0:b.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:f.i18n.dayNames[D],dddd:f.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:f.i18n.monthNames[m],mmmm:f.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:e?"UTC":(String(b).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return c.replace(g,function(a){return a in flags?flags[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};
/**
 * Date.parse with progressive enhancement for ISO 8601 
 * License: MIT License
 * © 2011 Colin Snover <http://zetafleet.com>
 * <https://github.com/csnover/js-iso8601>
 */
(function(n,f){var u=n.parse,c=[1,4,5,6,7,10,11];n.parse=function(t){var i,o,a=0;if(o=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(t)){for(var v=0,r;r=c[v];++v)o[r]=+o[r]||0;o[2]=(+o[2]||1)-1,o[3]=+o[3]||1,o[8]!=="Z"&&o[9]!==f&&(a=o[10]*60+o[11],o[9]==="+"&&(a=0-a)),i=n.UTC(o[1],o[2],o[3],o[4],o[5]+a,o[6],o[7])}else i=u?u(t):NaN;return i}})(Date)
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * CSV to Table plugin v0.9 - 2010-06-22 - First release.
 * License: Distributed under MIT license
 * © 2010 Steve Sobel
 * http://code.google.com/p/jquerycsvtotable/
 * http://honestbleeps.com/
 */
;(function($){String.prototype.splitCSV=function(a){for(var b=this.split(a=a||","),x=b.length-1,tl;x>=0;x--){if(b[x].replace(/"\s+$/,'"').charAt(b[x].length-1)=='"'){if((tl=b[x].replace(/^\s+"/,'"')).length>1&&tl.charAt(0)=='"'){b[x]=b[x].replace(/^\s*"|"\s*$/g,'').replace(/""/g,'"')}else if(x){b.splice(x-1,2,[b[x-1],b[x]].join(a))}else b=b.shift().split(a).concat(b)}else b[x].replace(/""/g,'"')}return b};$.fn.CSVToTable=function(m,n){var o={tableClass:"CSVTable",theadClass:"",thClass:"",tbodyClass:"",trClass:"",tdClass:"",loadingImage:"",loadingText:"Loading CSV data...",separator:",",startLine:0};var n=$.extend(o,n);return this.each(function(){var f=$(this);var g='';(n.loadingImage)?loading='<div style="text-align: center"><img alt="'+n.loadingText+'" src="'+n.loadingImage+'" /><br>'+n.loadingText+'</div>':loading=n.loadingText;f.html(loading);var h='<table class="'+n.tableClass+'">';var i=m.replace('\r','').split('\n');var j=0;var k=0;var l=new Array(); jQuery.each(i,function(c,d){if((c==0)&&(typeof(n.headers)!='undefined')){l=n.headers;k=l.length;h+='<thead class="'+n.theadClass+'"><tr class="'+n.trClass+'">'; jQuery.each(l,function(a,b){h+='<th class="'+n.thClass+'">'+b+'</th>'});h+='</tr></thead><tbody class="'+n.tbodyClass+'">'}if((c==n.startLine)&&(typeof(n.headers)=='undefined')){l=d.splitCSV(n.separator);k=l.length;h+='<thead class="'+n.theadClass+'"><tr class="'+n.trClass+'">'; jQuery.each(l,function(a,b){h+='<th class="'+n.thClass+'">'+b+'</th>'});h+='</tr></thead><tbody class="'+n.tbodyClass+'">'}else if(c>=n.startLine){var e=d.splitCSV(n.separator);if(e.length>1){j++;if(e.length!=k){g+='error on line '+c+': Item count ('+e.length+') does not match header count ('+k+') \n'}(j%2)?oddOrEven='odd':oddOrEven='even';h+='<tr class="'+n.trClass+' '+oddOrEven+'">'; jQuery.each(e,function(a,b){h+='<td class="'+n.tdClass+'">'+(b||'&nbsp;')+'</td>'});h+='</tr>'}}});h+='</tbody></table>';if(g){f.html(g)}else{f.fadeOut(500,function(){f.html(h)}).fadeIn(function(){setTimeout(function(){f.trigger("loadComplete")},0)})}})}})(jQuery);
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/** Chosen v0.10.0 
 * License: MIT License 
 * (c) 2011-2013 by Harvest  
 * https://github.com/harvesthq/chosen/blob/master/LICENSE.md 
 */
!function(){var SelectParser;SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},SelectParser.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},SelectParser.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser}(),SelectParser.select_to_array=function(a){var b,c,d,e,f;for(c=new SelectParser,f=a.childNodes,d=0,e=f.length;e>d;d++)b=f[d],c.add_node(b);return c.parsed},this.SelectParser=SelectParser}.call(this),function(){var AbstractChosen,a;a=this,AbstractChosen=function(){function AbstractChosen(a,b){this.form_field=a,this.options=null!=b?b:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup())}return AbstractChosen.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},AbstractChosen.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},AbstractChosen.prototype.result_add_option=function(a){var b,c;return a.dom_id=this.container_id+"_o_"+a.array_index,b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>"},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},AbstractChosen.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.browser_is_supported=function(){var a;return"Microsoft Internet Explorer"===window.navigator.appName?null!==(a=document.documentMode)&&a>=8:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),a.AbstractChosen=AbstractChosen}.call(this),function(){var a,Chosen,b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=this,a=jQuery,a.fn.extend({chosen:function(b){return AbstractChosen.browser_is_supported()?this.each(function(){var c;return c=a(this),c.hasClass("chzn-done")?void 0:c.data("chosen",new Chosen(this,b))}):this}}),Chosen=function(d){function Chosen(){return c=Chosen.__super__.constructor.apply(this,arguments)}return e(Chosen,d),Chosen.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},Chosen.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},Chosen.prototype.set_up_html=function(){var b,c;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",b=["chzn-container"],b.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chzn-rtl"),c={id:this.container_id,"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop"><ul class="chzn-results"></ul></div>'):this.container.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chzn-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var a=this;return this.container.mousedown(function(b){a.container_mousedown(b)}),this.container.mouseup(function(b){a.container_mouseup(b)}),this.container.mouseenter(function(b){a.mouse_enter(b)}),this.container.mouseleave(function(b){a.mouse_leave(b)}),this.search_results.mouseup(function(b){a.search_results_mouseup(b)}),this.search_results.mouseover(function(b){a.search_results_mouseover(b)}),this.search_results.mouseout(function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel DOMMouseScroll",function(b){a.search_results_mousewheel(b)}),this.form_field_jq.bind("liszt:updated",function(b){a.results_update_field(b)}),this.form_field_jq.bind("liszt:activate",function(b){a.activate_field(b)}),this.form_field_jq.bind("liszt:open",function(b){a.container_mousedown(b)}),this.search_field.blur(function(b){a.input_blur(b)}),this.search_field.keyup(function(b){a.keyup_checker(b)}),this.search_field.keydown(function(b){a.keydown_checker(b)}),this.search_field.focus(function(b){a.input_focus(b)}),this.is_multiple?this.search_choices.click(function(b){a.choices_click(b)}):this.container.click(function(a){a.preventDefault()})},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},Chosen.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chzn-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},Chosen.prototype.search_results_mousewheel=function(a){var b,c,d;return b=-(null!=(c=a.originalEvent)?c.wheelDelta:void 0)||(null!=(d=a.originialEvent)?d.detail:void 0),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){var a,c,d,e,f;for(this.parsing=!0,this.selected_option_count=null,this.results_data=b.SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chzn-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chzn-container-single-nosearch"))),a="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],c.group?a+=this.result_add_group(c):c.empty||(a+=this.result_add_option(c),c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(c.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},Chosen.prototype.result_add_group=function(b){return b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>"},Chosen.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(this.container.addClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(){var a;return this.form_field_jq.attr("tabindex")?(a=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",a)):void 0},Chosen.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.click(function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},Chosen.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{href:"#","class":"search-choice-close",rel:b.array_index}),d.click(function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},Chosen.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},Chosen.prototype.choice_destroy=function(a){return this.result_deselect(a.attr("rel"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(a){var b,c,d,e;return this.result_highlight?(b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},Chosen.prototype.result_activate=function(a,b){return b.disabled?a.addClass("disabled-result"):this.is_multiple&&b.selected?a.addClass("result-selected"):a.addClass("active-result")},Chosen.prototype.result_deactivate=function(a){return a.removeClass("active-result result-selected disabled-result")},Chosen.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],this.form_field.options[d.options_index].disabled?!1:(d.selected=!1,this.form_field.options[d.options_index].selected=!1,this.selected_option_count=null,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chzn-single-with-deselect")):void 0},Chosen.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(this.no_results_clear(),j=0,k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),g=this.search_contains?"":"^",f=new RegExp(g+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=new RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=this.results_data,o=0,q=s.length;q>o;o++)if(c=s[o],!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else{if(b=!1,i=c.dom_id,h=a("#"+i),f.test(c.html))b=!0,j+=1;else if(this.enable_split_word_search&&(c.html.indexOf(" ")>=0||0===c.html.indexOf("["))&&(e=c.html.replace(/\[|\]/g,"").split(" "),e.length))for(p=0,r=e.length;r>p;p++)d=e[p],f.test(d)&&(b=!0,j+=1);b?(k.length?(l=c.html.search(n),m=c.html.substr(0,l+k.length)+"</em>"+c.html.substr(l+k.length),m=m.substr(0,l)+"<em>"+m.substr(l)):m=c.html,h.html(m),this.result_activate(h,c),null!=c.group_array_index&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>j&&k.length?this.no_results(k):this.winnow_results_set_highlight()},Chosen.prototype.winnow_results_set_highlight=function(){var a,b;return this.result_highlight||(b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null==a)?void 0:this.result_do_highlight(a)},Chosen.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i;if(this.is_multiple){for(c=0,g=0,e="position:absolute; left: -1000px; top: -1000px; display:none;",f=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],h=0,i=f.length;i>h;h++)d=f[h],e+=d+":"+this.search_field.css(d)+";";return b=a("<div />",{style:e}),b.text(this.search_field.val()),a("body").append(b),g=b.width()+25,b.remove(),this.f_width||(this.f_width=this.container.outerWidth()),g>this.f_width-10&&(g=this.f_width-10),this.search_field.css({width:g+"px"})}},Chosen.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();a("#"+b).length>0;)b+=this.generate_random_char();return b},Chosen}(AbstractChosen),b.Chosen=Chosen}.call(this);
/*---------------------------------------------------------------------------------------------------------------------------------------*/
/**
 * tipsy, facebook style tooltips for jquery  v1.0.0a
 * License: MIT License 
 * © 2008-2010 jason frame [jason@onehackoranother.com] 
 */
(function($){function maybeCall(a,b){return(typeof a=='function')?(a.call(b)):a};function isElementInDOM(a){while(a=a.parentNode){if(a==document)return true}return false};function Tipsy(a,b){this.$element=$(a);this.options=b;this.enabled=true;this.fixTitle()};Tipsy.prototype={show:function(){var a=this.getTitle();if(a&&this.enabled){var b=this.tip();b.find('.tipsy-inner')[this.options.html?'html':'text'](a);b[0].className='tipsy';b.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).prependTo(document.body);var c=$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var d=b[0].offsetWidth,actualHeight=b[0].offsetHeight,gravity=maybeCall(this.options.gravity,this.$element[0]);var e;switch(gravity.charAt(0)){case'n':e={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-d/2};break;case's':e={top:c.top-actualHeight-this.options.offset,left:c.left+c.width/2-d/2};break;case'e':e={top:c.top+c.height/2-actualHeight/2,left:c.left-d-this.options.offset};break;case'w':e={top:c.top+c.height/2-actualHeight/2,left:c.left+c.width+this.options.offset};break}if(gravity.length==2){if(gravity.charAt(1)=='w'){e.left=c.left+c.width/2-15}else{e.left=c.left+c.width/2-d+15}}b.css(e).addClass('tipsy-'+gravity);b.find('.tipsy-arrow')[0].className='tipsy-arrow tipsy-arrow-'+gravity.charAt(0);if(this.options.className){b.addClass(maybeCall(this.options.className,this.$element[0]))}if(this.options.fade){b.stop().css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:this.options.opacity})}else{b.css({visibility:'visible',opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){$(this).remove()})}else{this.tip().remove()}},fixTitle:function(){var a=this.$element;if(a.attr('title')||typeof(a.attr('original-title'))!='string'){a.attr('original-title',a.attr('title')||'').removeAttr('title')}},getTitle:function(){var a,$e=this.$element,o=this.options;this.fixTitle();var a,o=this.options;if(typeof o.title=='string'){a=$e.attr(o.title=='title'?'original-title':o.title)}else if(typeof o.title=='function'){a=o.title.call($e[0])}a=(''+a).replace(/(^\s*|\s*$)/,"");return a||o.fallback},tip:function(){if(!this.$tip){this.$tip=$('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');this.$tip.data('tipsy-pointee',this.$element[0])}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};$.fn.tipsy=function(c){if(c===true){return this.data('tipsy')}else if(typeof c=='string'){var d=this.data('tipsy');if(d)d[c]();return this}c=$.extend({},$.fn.tipsy.defaults,c);function get(a){var b=$.data(a,'tipsy');if(!b){b=new Tipsy(a,$.fn.tipsy.elementOptions(a,c));$.data(a,'tipsy',b)}return b}function enter(){var a=get(this);a.hoverState='in';if(c.delayIn==0){a.show()}else{a.fixTitle();setTimeout(function(){if(a.hoverState=='in')a.show()},c.delayIn)}};function leave(){var a=get(this);a.hoverState='out';if(c.delayOut==0){a.hide()}else{setTimeout(function(){if(a.hoverState=='out')a.hide()},c.delayOut)}};if(!c.live)this.each(function(){get(this)});if(c.trigger!='manual'){var e=c.live?'live':'bind',eventIn=c.trigger=='hover'?'mouseenter':'focus',eventOut=c.trigger=='hover'?'mouseleave':'blur';this[e](eventIn,enter)[e](eventOut,leave)}return this};$.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:'',gravity:'n',html:false,live:false,offset:0,opacity:0.8,title:'title',trigger:'hover'};$.fn.tipsy.revalidate=function(){$('.tipsy').each(function(){var a=$.data(this,'tipsy-pointee');if(!a||!isElementInDOM(a)){$(this).remove()}})};$.fn.tipsy.elementOptions=function(a,b){return $.metadata?$.extend({},b,$(a).metadata()):b};$.fn.tipsy.autoNS=function(){return $(this).offset().top>($(document).scrollTop()+$(window).height()/2)?'s':'n'};$.fn.tipsy.autoWE=function(){return $(this).offset().left>($(document).scrollLeft()+$(window).width()/2)?'e':'w'};$.fn.tipsy.autoBounds=function(b,c){return function(){var a={ns:c[0],ew:(c.length>1?c[1]:false)},boundTop=$(document).scrollTop()+b,boundLeft=$(document).scrollLeft()+b,$this=$(this);if($this.offset().top<boundTop)a.ns='n';if($this.offset().left<boundLeft)a.ew='w';if($(window).width()+$(document).scrollLeft()-$this.offset().left<b)a.ew='e';if($(window).height()+$(document).scrollTop()-$this.offset().top<b)a.ns='s';return a.ns+(a.ew?a.ew:'')}}})(jQuery);
/**
 * @author nghia.khuong
 * @email nghia.khuong@enclave.vn, khuongdainghia@gmail.com
 * @function Utils
 * @version 1.6
 * @create date: 23 Apr 2012
 * @last update: 16 Dec 2013
 **/
/*No conflict*/
jQuery.noConflict();var oldName='';function getUniqueid(){var idstr=String.fromCharCode(Math.floor((Math.random()*25)+65));do{var ascicode=Math.floor((Math.random()*42)+48);if(ascicode<58||ascicode>64){idstr+=String.fromCharCode(ascicode)}}while(idstr.length<8);return idstr};function getColor(n){var start=0;for(var i=0;i<n;i++){start+=0.1}return Raphael.hsb(start,1,0.5)};function getNode(id,data){if(!jQuery.isArray(data)){data=[data]}for(var i=0;i<data.length;i++){if(data[i].id==id){return data[i]}}for(var i=0;i<data.length;i++){if(data[i].children){for(var j=0;j<data[i].children.length;j++){if(data[i].children[j].id==id){return data[i].children[j]}}for(var j=0;j<data[i].children.length;j++){if(data[i].children[j].children){for(var k=0;k<data[i].children[j].children.length;k++){if(data[i].children[j].children[k].id==id){return data[i].children[j].children[k]}}for(var k=0;k<data[i].children[j].children.length;k++){if(data[i].children[j].children[k].children){for(var l=0;l<data[i].children[j].children[k].children.length;l++){if(data[i].children[j].children[k].children[l].id==id){return data[i].children[j].children[k].children[l]}}for(var l=0;l<data[i].children[j].children[k].children.length;l++){if(data[i].children[j].children[k].children[l].children){for(var m=0;m<data[i].children[j].children[k].children[l].children.length;m++){if(data[i].children[j].children[k].children[l].children[m].id==id){return data[i].children[j].children[k].children[l].children[m]}}for(var m=0;m<data[i].children[j].children[k].children[l].children.length;m++){if(data[i].children[j].children[k].children[l].children[m].children){for(var n=0;n<data[i].children[j].children[k].children[l].children[m].children.length;n++){if(data[i].children[j].children[k].children[l].children[m].children[n].id==id){return data[i].children[j].children[k].children[l].children[m].children[n]}}}}}}}}}}}}return[]};function getObj(id,data){var packageId;var suiteId;var testcaseId;var stepId;if(data.id==id){return data}try{packageId=id.match(/st[0-9]*/);if(packageId){suiteId=id.match(/st[0-9]*ts[0-9]*/);if(suiteId){testcaseId=id.match(/st[0-9]*ts[0-9]*tc[0-9]*/);if(testcaseId){stepId=id.match(/st[0-9]*ts[0-9]*tc[0-9]*sp[0-9]*/)}}}}catch(e){}if(!jQuery.isArray(data)){data=[data]}for(var i=0;i<data.length;i++){if(data[i].id==id){return data[i]}if(data[i].package){if(stepId){for(var pkgIdx=0;pkgIdx<data[i].package.length;pkgIdx++){for(var stcIdx=0;stcIdx<data[i].package[pkgIdx].testsuite.length;stcIdx++){for(var tcsIdx=0;tcsIdx<data[i].package[pkgIdx].testsuite[stcIdx].testcase.length;tcsIdx++){for(var stpIdx=0;stpIdx<data[i].package[pkgIdx].testsuite[stcIdx].testcase[tcsIdx].teststep.length;stpIdx++){if(data[i].package[pkgIdx].testsuite[stcIdx].testcase[tcsIdx].teststep[stpIdx].id==id){return data[i].package[pkgIdx].testsuite[stcIdx].testcase[tcsIdx].teststep[stpIdx]}}}}}}else if(testcaseId){for(var pkgIdx=0;pkgIdx<data[i].package.length;pkgIdx++){for(var stcIdx=0;stcIdx<data[i].package[pkgIdx].testsuite.length;stcIdx++){for(var tcsIdx=0;tcsIdx<data[i].package[pkgIdx].testsuite[stcIdx].testcase.length;tcsIdx++){if(data[i].package[pkgIdx].testsuite[stcIdx].testcase[tcsIdx].id==id){return data[i].package[pkgIdx].testsuite[stcIdx].testcase[tcsIdx]}}}}}else if(suiteId){for(var pkgIdx=0;pkgIdx<data[i].package.length;pkgIdx++){for(var stcIdx=0;stcIdx<data[i].package[pkgIdx].testsuite.length;stcIdx++){if(data[i].package[pkgIdx].testsuite[stcIdx].id==id){return data[i].package[pkgIdx].testsuite[stcIdx]}}}}else if(packageId){for(var pkgIdx=0;pkgIdx<data[i].package.length;pkgIdx++){if(data[i].package[pkgIdx].id==id){return data[i].package[pkgIdx]}}}}else if(data[i].testsuite){if(stepId){for(var stcIdx=0;stcIdx<data[i].testsuite.length;stcIdx++){for(var tcsIdx=0;tcsIdx<data[i].testsuite[stcIdx].testcase.length;tcsIdx++){for(var stpIdx=0;stpIdx<data[i].testsuite[stcIdx].testcase[tcsIdx].teststep.length;stpIdx++){if(data[i].testsuite[stcIdx].testcase[tcsIdx].teststep[stpIdx].id==id){return data[i].testsuite[stcIdx].testcase[tcsIdx].teststep[stpIdx]}}}}}else if(testcaseId){for(var stcIdx=0;stcIdx<data[i].testsuite.length;stcIdx++){for(var tcsIdx=0;tcsIdx<data[i].testsuite[stcIdx].testcase.length;tcsIdx++){if(data[i].testsuite[stcIdx].testcase[tcsIdx].id==id){return data[i].testsuite[stcIdx].testcase[tcsIdx]}}}}else if(suiteId){for(var stcIdx=0;stcIdx<data[i].testsuite.length;stcIdx++){if(data[i].testsuite[stcIdx].id==id){return data[i].testsuite[stcIdx]}}}}else if(data[i].testcase){if(stepId){for(var tcsIdx=0;tcsIdx<data[i].testcase.length;tcsIdx++){for(var stpIdx=0;stpIdx<data[i].testcase[tcsIdx].teststep.length;stpIdx++){if(data[i].testcase[tcsIdx].teststep[stpIdx].id==id){return data[i].testcase[tcsIdx].teststep[stpIdx]}}}}else if(testcaseId){for(var tcsIdx=0;tcsIdx<data[i].testcase.length;tcsIdx++){if(data[i].testsuite[stcIdx].testcase[tcsIdx].id==id){return data[i].testsuite[stcIdx].testcase[tcsIdx]}}}}else if(data[i].teststep){for(var stpIdx=0;stpIdx<data[i].teststep.length;stpIdx++){if(data[i].teststep[stpIdx].id==id){return data[i].teststep[stpIdx]}}}}packageId=null;suiteId=null;testcaseId=null;stepId=null;return[]};function getUniqueId(){var idstr=String.fromCharCode(Math.floor((Math.random()*25)+65));do{var ascicode=Math.floor((Math.random()*42)+48);if(ascicode<58||ascicode>64){idstr+=String.fromCharCode(ascicode)}}while(idstr.length<8);return idstr};function getQuery(){var get=unescape(location.search.substring(1));var params=new Array();if(get!=''){var pairs=new Array();pairs=get.split('&');for(var i=0;i<pairs.length;i++){params[i]=pairs[i].split('=')}}return params};function getParamValue(name,params){var lname=name.toLowerCase();for(var i=0;i<params.length;i++){if(lname==params[i][0].toLowerCase()){lname=null;return params[i][1]}}lname=null;return''};function findFrameEx(frameName,startFrame){if(startFrame.frames.length==0){return null}var lName=frameName.toLowerCase();try{return startFrame.frames[frameName]}catch(e){for(var i=0;i<startFrame.frames.length;i++){var curFrame=startFrame.frames[i];if((curFrame.name)&&(lName==curFrame.name.toLowerCase())){return curFrame}else{var f=findFrameEx(frameName,curFrame);if(f){return f}}}}return null};function findFrame(frameName){return findFrameEx(frameName,top)};function removeBookmark(link){if(!link||(link==''))return'';var idx=link.indexOf('#');if(idx>=0){return link.substring(idx,0)}return link};function getBookmark(link){if(!link||(link==''))return'';var idx=link.indexOf('#');if(idx>=0){var s=link.substring(idx+1);if(s!=''){s=s.replace(/[^\w\?&=]|[\s]/g,'');return s}}return''};function secondsToHms(secValue){var returnValue='';secValue=Number(secValue);if(secValue==0){returnValue='0s'}else{var h=Math.floor(secValue/3600);var m=Math.floor(secValue%3600/60);var s=Math.floor(secValue%3600%60);if(h>0){returnValue=h+'h '}if(m>0){if(h>0){if(m<10){returnValue+=' 0'+m+'m'}else{returnValue+=' '+m+'m'}}else{returnValue+=m+'m'}}if(s>0){if(m>0){if(s<10){returnValue+=' 0'+s+'s'}else{returnValue+=' '+s+'s'}}else{returnValue+=s+'s'}}else if(returnValue==''){returnValue=secValue.toFixed(1)+'s'}h=null;m=null;s=null}return returnValue};function percentage(total,elm){var tmp=((elm/total)*100).toFixed(1);if(tmp.endsWith('.0')){tmp=tmp.replace('.0','')}return tmp.replace('NaN','0')};function passFailBar(dataContext){var failObj='';var passObj='';var totalTCs=dataContext.fail+dataContext.pass;if(totalTCs){if(dataContext.fail<=0){passObj='<span class="percent-complete-bar tooltip" title="Pass: '+dataContext.pass+'/'+totalTCs+' - 100%" style="background:green;width:100%"></span>'}else if(dataContext.pass<=0){passObj='<span class="percent-complete-bar tooltip" title="Fail: '+dataContext.fail+'/'+totalTCs+' - 100%" style="background:red;width:100%"></span>'}else{var failPc=percentage(dataContext.total,dataContext.fail);var passPc=100-failPc;failObj='<span class="percent-complete-bar-fail tooltip" title="Fail: '+dataContext.fail+'/'+totalTCs+' - '+failPc+'%" style="background:red;width:'+(((failPc>0&&(failPc<1)))?Math.ceil(failPc):failPc)+'%"></span>';passObj='<span class="percent-complete-bar-pass tooltip" title="Pass: '+dataContext.pass+'/'+totalTCs+' - '+passPc+'%" style="background:green;width:'+(((passPc>0&&(passPc<1)))?Math.ceil(passPc):Math.floor(passPc))+'%"></span>'}}else{passObj='&nbsp;'}return passObj+failObj};function replaceParam(a,b,c){b=b.replace(/[\[]/,'\\\[').replace(/[\]]/,'\\\]');var d="[\\?&]"+b+"=([^&#]*)";var e=new RegExp(d);var f=e.exec(a);if(f!=null){if(f[1]==''){a=a.replace(f[0],f[0]+c)}else{a=a.replace(f[0],f[0].substring(0,1)+b+'='+c)}}else{if(a.indexOf('?')==-1){a+='?'+b+'='+c}else{a+='&'+b+'='+c}}a=a.replace('?','&');return a};function humanizedTimeSpan(a){switch(typeof a){case'number':break;case'string':a=((new Date(a)).addHours(jReport.settings.timespan));break;case'object':if(a.constructor===Date)a=a.getTime();break;default:a=+new Date();a.addHours(jReport.timespan)}var b=[[60,'seconds',1],[120,'1 minute ago','1 minute from now'],[3600,'minutes',60],[7200,'1 hour ago','1 hour from now'],[86400,'hours',3600],[172800,'Yesterday','Tomorrow'],[604800,'days',86400],[1209600,'Last week','Next week'],[2419200,'weeks',604800],[4838400,'Last month','Next month'],[29030400,'months',2419200],[58060800,'Last year','Next year'],[2903040000,'years',29030400],[5806080000,'Last century','Next century'],[58060800000,'centuries',2903040000]];var c=(+new Date()-a)/1000,token='ago',list_choice=1;if(c==0){return'Just now'}if(c<0){c=Math.abs(c);token='from now';list_choice=2}var i=0,format;while(format=b[i++])if(c<format[0]){if(typeof format[2]=='string')return format[list_choice];else return Math.floor(c/format[2])+' '+format[1]+' '+token}return a};function formatDatetime(a,b){var c='dd mmm yyyy HH:MM TT';if(b!=undefined){c=b.toString()}var d=Date.parse(a);return dateFormat(d,c)};function clone(a){if(a==null||typeof(a)!='object')return a;var b=new a.constructor();for(var c in a)b[c]=clone(a[c]);return b};function formatDatetimeNew(a){var b,suffix,returnst;var c=new Date(a);b=c.getDate();returnst=dateFormat(c,' mmm yyyy');if(b==1)suffix=('st');else if(b==2)suffix=('nd');else if(b==3)suffix=('rd');else if(b==21)suffix=('st');else if(b==22)suffix=('nd');else if(b==23)suffix=('rd');else if(b==31)suffix=('st');else suffix=('th');return b+'<sup style="font-size:x-small; vertical-align:top;">'+suffix+'</sup>'+' '+returnst};function getRandomColor(){var hexCharList='0123456789ABCDEF'.split('');var returnValue='#';for(var i=0;i<6;i++){returnValue+=hexCharList[Math.round(Math.random()*15)]}hexCharList=null;return returnValue};function getIndexPageURL(){var urlParamIndex=-1;var currentLocURL=window.location.href;urlParamIndex=currentLocURL.indexOf(jReport.page.settings.entryPage);if(urlParamIndex>1){currentLocURL=currentLocURL.substring(0,urlParamIndex+jReport.page.settings.entryPage.length)}urlParamIndex=null;return currentLocURL};function getPackageNameById(a){try{for(var i=0;i<reportData.package.length;i++){if(reportData.package[i].id==a.substring(0,reportData.package[i].id.length)){return trim(reportData.package[i].text)}}}catch(e){}return''};function dynamicSort(c,d){if(d){return function(a,b){return(a[c]>b[c])?-1:(a[c]<b[c])?1:0}}return function(a,b){return(a[c]<b[c])?-1:(a[c]>b[c])?1:0}};function dynamicSortNumber(c,d){if(d){return function(a,b){return(Number(a[c])>Number(b[c]))?-1:(Number(a[c])<Number(b[c]))?1:0}}return function(a,b){return(Number(a[c])<Number(b[c]))?-1:(Number(a[c])>Number(b[c]))?1:0}};function count(a){if(a!=oldName){i=1;oldName=a}return i++};function logError(ex){var returnValue='';for(var c in ex){returnValue+='property: '+c+' value: ['+ex[c]+']\n'}returnValue+='toString(): '+' value: ['+ex.toString()+']';log(returnValue)};function isArray(a){try{return a.constructor===Array}catch(e){return false}};function replaceAll(a,b,c){while(a.indexOf(b)!==-1){a=a.replace(b,c)}return a};function trim(st){return st.replace(/^\s+|\s+$/g,'')};function JSONstringify(obj){var t=typeof(obj);if(t!="object"||obj===null){if(t=="string")obj='"'+obj+'"';return String(obj)}else{var n,v,json=[],arr=(obj&&obj.constructor==Array);for(n in obj){v=obj[n];t=typeof(v);if(t=="string")v='"'+v+'"';else if(t=="object"&&v!==null)v=JSON.stringify(v);json.push((arr?"":'"'+n+'":')+String(v))}return(arr?"[":"{")+String(json)+(arr?"]":"}")}};if(!Date.prototype.addHours){Date.prototype.addHours=function(h){this.setTime(this.getTime()+(h*60*60*1000));return this}};if(!String.prototype.startsWith){String.prototype.startsWith=function(prefix){return this.indexOf(prefix)===0}};if(!String.prototype.endsWith){String.prototype.endsWith=function(suffix){try{return this.match(suffix+"$")==suffix}catch(e){return false}}};if(!Array.prototype.remove){Array.prototype.remove=function(name,value){var rest=jQuery.grep(this,function(item){return(item[name]!==value)});this.length=0;this.push.apply(this,rest);return this}};if(!Array.prototype.removeinvert){Array.prototype.removeinvert=function(name,value){var rest=jQuery.grep(this,function(item){return(item[name]===value)});this.length=0;this.push.apply(this,rest);return this}};if(!Array.prototype.removeinvertempty){Array.prototype.removeinvertempty=function(name,value,elem){var rest=jQuery.grep(this,function(item){return((item[name]===value)&&(item[elem].length!==0))});this.length=0;this.push.apply(this,rest);return this}};if(!Array.prototype.removeinvertempty3){Array.prototype.removeinvertempty3=function(name,value,elem){var rest=jQuery.grep(this,function(item){return((item[name]===value)&&(item[elem].length!==0))});this.length=0;this.push.apply(this,rest);return this}};if(!Array.prototype.removeEmptyA){Array.prototype.removeEmptyA=function(name,elem){var rest=jQuery.grep(this,function(item){return(item[elem].length!==0)});this.length=0;this.push.apply(this,rest);return this}};if(!Array.prototype.removeA){Array.prototype.removeA=function(from,to){var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest)}};if(!String.prototype.capitalize){String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})}};if(!String.prototype.equalTo){String.prototype.equalTo=function(str){return this.toLowerCase()===str.toLowerCase()}};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'')}};if(!String.prototype.capitalize){String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})}};if(!String.prototype.ucfirst){String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()}};var iSnow=function(){var f='images/Xmas/';var g=45;var h=45;var j=2;var k=2;var l=false;var m=null;var p=false;var q=false;var r=null;var t=true;var u=4;var v=6;var w=6;var z=0;var A=0;var B=0;var C=function(o,a,b){typeof(attachEvent)=='undefined'?o.addEventListener(a,b,false):o.attachEvent('on'+a,b)};var D=function(o,a,b){typeof(attachEvent)=='undefined'?o.removeEventListener(a,b,false):o.detachEvent('on'+a,b)};var E=function(o,a){return(typeof(o.className)!='undefined'?o.className.indexOf(a)+1:false)};var s=this;var F=this;this.durationrs=[];this.flakes=[];this.disabled=false;this.terrain=[];this.active=false;var G=navigator.userAgent.match(/msie/i);var H=navigator.userAgent.match(/msie 6/i);var I=(G&&(H||navigator.userAgent.match(/msie 5/i)));var J=navigator.appVersion.match(/windows 98/i);var K=navigator.userAgent.match(/iphone/i);var L=navigator.userAgent.match(/opera/i);if(L)G=false;var M=null;var N=null;var O=null;var P=null;var Q=null;var R=null;var S=1;var T=2;var U=(!G||(G&&!H&&!I));var V=document.createDocumentFragment();this.oControl=null;if(A==null)A=0;if(B==null)B=0;function rnd(n,a){if(isNaN(a))a=0;return(Math.random()*n)+a};this.randomizeWind=function(){Q=plusMinus(rnd(j,0.2));R=rnd(k,0.2);if(this.flakes){for(var i=0;i<this.flakes.length;i++){if(this.flakes[i].active)this.flakes[i].setVelocities()}}};function plusMinus(n){return(parseInt(rnd(2))==1?n*-1:n)};this.scrollHandler=function(){P=(m?0:parseInt(window.scrollY||document.documentElement.scrollTop||document.body.scrollTop));if(isNaN(P))P=0;if(!m&&s.flakes){for(var i=0;i<s.flakes.length;i++){if(s.flakes[i].active==0)s.flakes[i].stick()}}};this.resizeHandler=function(){if(window.innerWidth||window.innerHeight){M=window.innerWidth-(!G?16:2)-B;O=(m?m:window.innerHeight)}else{M=(document.documentElement.clientWidth||document.body.clientWidth||document.body.scrollWidth)-(!G?8:0)-B;O=m?m:(document.documentElement.clientHeight||document.body.clientHeight||document.body.scrollHeight)}N=parseInt(M/2)};this.resizeHandlerAlt=function(){M=r.offsetLeft+r.offsetWidth-B;O=m?m:r.offsetTop+r.offsetHeight;N=parseInt(M/2)};this.freeze=function(){if(!s.disabled){s.disabled=1}else{return false}for(var i=0;i<s.durationrs.length;i++){clearInterval(s.durationrs[i])}};this.resume=function(){if(s.disabled){s.disabled=0}else{return false}s.durationrInit()};this.toggleSnow=function(){if(!s.flakes.length){s.start();s.setControlActive(true)}else{s.active=!s.active;if(s.active){s.show();s.resume();s.setControlActive(true)}else{s.stop();s.freeze();s.setControlActive(false)}}};this.setControlActive=function(a){};this.stop=function(){this.freeze();for(var i=this.flakes.length;i--;){this.flakes[i].o.style.display='none'}D(window,'scroll',s.scrollHandler);D(window,'resize',s.resizeHandler);if(!G){D(window,'blur',s.freeze);D(window,'focus',s.resume)}};this.show=function(){for(var i=this.flakes.length;i--;){this.flakes[i].o.style.display='block'}};this.SnowFlake=function(c,d,x,y){var s=this;var e=c;this.type=d;this.x=x||parseInt(rnd(M-20));this.y=(!isNaN(y)?y:-rnd(O)-12);this.vX=null;this.vY=null;this.vAmpTypes=[2.0,1.0,1.25,1.0,1.5,1.75];this.vAmp=this.vAmpTypes[this.type];this.active=1;this.o=document.createElement('img');this.o.style.position='absolute';this.o.style.width=v+'px';this.o.style.height=w+'px';this.o.style.fontSize='1px';this.o.style.zIndex=z;this.o.src=f+this.type+(U&&'.gif');V.appendChild(this.o);this.refresh=function(){s.o.style.left=s.x+'px';s.o.style.top=s.y+'px'};this.stick=function(){if(H||K||(r!=document.documentElement&&r!=document.body)){s.o.style.top=(O+P-w-e.terrain[Math.floor(s.x)])+'px'}else{s.o.style.display='none';s.o.style.top='auto';s.o.style.bottom='0px';s.o.style.position='fixed';s.o.style.display='block'}};this.vCheck=function(){if(s.vX>=0&&s.vX<0.2){s.vX=0.2}else if(s.vX<0&&s.vX>-0.2){s.vX=-0.2}if(s.vY>=0&&s.vY<0.2){s.vY=0.2}};this.move=function(){s.x+=s.vX*S;s.y+=(s.vY*s.vAmp);s.refresh();if(s.vX&&M-s.x<v+(s.vX*S)){s.x=0}else if((s.vX<0||S<0)&&s.x-A<0-v){s.x=M-v}var a=O+P-s.y-e.terrain[Math.floor(s.x)];if(a<w){s.active=0;if(q&&p){var b=[0.75,1.5,0.75];for(var i=0;i<2;i++){e.terrain[Math.floor(s.x)+i+2]+=b[i]}}s.o.style.left=(s.x/M*100)+'%';if(!m){if(p){s.stick()}else{s.recycle()}}}};this.animate=function(){s.move()};this.setVelocities=function(){s.vX=Q+rnd(j*0.12,0.1);s.vY=R+rnd(k*0.12,0.1)};this.recycle=function(){s.o.style.display='none';s.o.style.position='absolute';s.o.style.bottom='auto';s.setVelocities();s.vCheck();s.x=parseInt(rnd(M-v-20));s.y=parseInt(rnd(O)*-1)-w;s.o.style.left=s.x+'px';s.o.style.top=s.y+'px';s.o.style.display='block';s.active=1};this.recycle();this.refresh()};this.snow=function(){var a=0;var b=0;var c=0;for(var i=s.flakes.length;i--;){if(s.flakes[i].active==1){s.flakes[i].move();a++}else if(s.flakes[i].active==0){b++}else{c++}}if(q&&!c){s.createSnow(h,true)}if(a<h){with(s.flakes[parseInt(rnd(s.flakes.length))]){if(!q&&a==0){recycle()}else if(a==-1){a=1}}}};this.mouseMove=function(e){if(!t)return true;var x=parseInt(e.clientX);if(x<N){S=-T+(x/N*T)}else{x-=N;S=(x/N)*T}};this.createSnow=function(a,b){for(var i=0;i<a;i++){s.flakes[s.flakes.length]=new s.SnowFlake(s,parseInt(rnd(u)));if(b||i>h)s.flakes[s.flakes.length-1].active=-1}r.appendChild(V)};this.durationrInit=function(){s.durationrs=(!J?[setInterval(s.snow,20)]:[setInterval(s.snow,75),setInterval(s.snow,25)])};this.init=function(){for(var i=0;i<2048;i++){s.terrain[i]=0}s.randomizeWind();s.createSnow(q?h:h*2);C(window,'resize',s.resizeHandler);C(window,'scroll',s.scrollHandler);if(!G){C(window,'blur',s.freeze);C(window,'focus',s.resume)}s.resizeHandler();s.scrollHandler();if(t){C(document,'mousemove',s.mouseMove)}s.durationrInit()};var W=false;this.start=function(a){if(!W){W=true}else if(a){return true}if(typeof r=='string'){r=document.getElementById(r);if(!r)throw new Error('iSnow: Unable to get targetElement');}if(!r){r=(!G?(document.documentElement?document.documentElement:document.body):document.body)}if(r!=document.documentElement&&r!=document.body)s.resizeHandler=s.resizeHandlerAlt;s.resizeHandler();if(M&&O&&!s.disabled){s.init();s.active=true}}};
/**
 * Pie chart
 */
Raphael.fn.pieChart=function(cx,cy,r,values,labels,stroke){var paper=this,rad=Math.PI/180,chart=this.set();function sector(cx,cy,r,startAngle,endAngle,params){var x1=cx+r*Math.cos(-startAngle*rad),x2=cx+r*Math.cos(-endAngle*rad),y1=cy+r*Math.sin(-startAngle*rad),y2=cy+r*Math.sin(-endAngle*rad);return paper.path(['M',cx,cy,'L',x1,y1,'A',r,r,0,+(endAngle-startAngle>180),0,x2,y2,'z']).attr(params)}var angle=0,total=0,start=0,process=function(j){var value=values[j],angleplus=360*value/total,popangle=angle+(angleplus/2),color=Raphael.hsb(start,.75,1),ms=500,delta=-17,bcolor=getColor(j),p=sector(cx,cy,r,angle,angle+angleplus,{fill:'90-'+bcolor+'-'+color,stroke:stroke,'stroke-width':1}),txt=paper.text(cx+(r+delta)*Math.cos(-popangle*rad),cy+(r+delta)*Math.sin(-popangle*rad),((value/total)*100).toFixed(1)+'%').attr({fill:'white',stroke:'none',opacity:0.9,'font-size':9});p.mouseover(function(){p.stop().animate({transform:'s1.1 1.1 '+cx+' '+cy},ms,'elastic');txt.stop().animate({opacity:1,fill:'white'},ms,'elastic')}).mouseout(function(){p.stop().animate({transform:''},ms,'elastic');txt.stop().animate({opacity:0.9,fill:'white'},ms)});angle+=angleplus;chart.push(p);chart.push(txt);start+=.1};for(var i=0,ii=values.length;i<ii;i++){total+=values[i]}for(i=0;i<ii;i++){process(i)}angle=null;total=null;start=null;process=null;paper=null;rad=null;return chart};
/**
 * Get the hashchange event to work in all browsers (including IE7)
 */
(function(){if('onhashchange'in window){if(window.addEventListener){window.addHashChange=function(a,b){window.addEventListener('hashchange',a,b)};window.removeHashChange=function(a){window.removeEventListener('hashchange',a)};return}else if(window.attachEvent){window.addHashChange=function(a){window.attachEvent('onhashchange',a)};window.removeHashChange=function(a){window.detachEvent('onhashchange',a)};return}}var c=[];var d=location.href;window.addHashChange=function(a,b){if(typeof a==='function')c[b?'unshift':'push'](a)};window.removeHashChange=function(a){for(var i=c.length-1;i>=0;i--)if(c[i]===a)c.splice(i,1)};setInterval(function(){var a=location.href;if(d!==a){d=a;for(var i=0;i<c.length;i++){c[i].call(window,{'type':'hashchange','newURL':a,'oldURL':d})}}},1000)})();